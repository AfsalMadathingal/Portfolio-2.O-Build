var Ys=Object.defineProperty;var Ks=(f,m,mt)=>m in f?Ys(f,m,{enumerable:!0,configurable:!0,writable:!0,value:mt}):f[m]=mt;var Je=(f,m,mt)=>(Ks(f,typeof m!="symbol"?m+"":m,mt),mt),Li=(f,m,mt)=>{if(!m.has(f))throw TypeError("Cannot "+mt)};var e=(f,m,mt)=>(Li(f,m,"read from private field"),mt?mt.call(f):m.get(f)),U=(f,m,mt)=>{if(m.has(f))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(f):m.set(f,mt)},ft=(f,m,mt,p)=>(Li(f,m,"write to private field"),p?p.call(f,mt):m.set(f,mt),mt);var qn=(f,m,mt,p)=>({set _(E){ft(f,m,E,mt)},get _(){return e(f,m,p)}}),tt=(f,m,mt)=>(Li(f,m,"access private method"),mt);import{t as tv,r as reactExports,u as useProviderContext,m as mapPropsVariants,a as useDOMRef,o as objectToDeps,c as clsx,d as dataAttr,f as forwardRef,j as jsxRuntimeExports,g as getAugmentedNamespace,b as useNavigate,e as useModal,h as button_default}from"./index-DYvT089J.js";import{A as AnimatedPage}from"./AnimatedPage-08KYlS9u.js";var image=tv({slots:{wrapper:"relative shadow-black/5",zoomedWrapper:"relative overflow-hidden rounded-inherit",img:"relative z-10 opacity-0 shadow-black/5 data-[loaded=true]:opacity-100",blurredImg:["absolute","z-0","inset-0","w-full","h-full","object-cover","filter","blur-lg","scale-105","saturate-150","opacity-30","translate-y-1"]},variants:{radius:{none:{},sm:{},md:{},lg:{},full:{}},shadow:{none:{wrapper:"shadow-none",img:"shadow-none"},sm:{wrapper:"shadow-small",img:"shadow-small"},md:{wrapper:"shadow-medium",img:"shadow-medium"},lg:{wrapper:"shadow-large",img:"shadow-large"}},isZoomed:{true:{img:["object-cover","transform","hover:scale-125"]}},showSkeleton:{true:{wrapper:["group","relative","overflow-hidden","bg-content3 dark:bg-content2"],img:"opacity-0"}},disableAnimation:{true:{img:"transition-none"},false:{img:"transition-transform-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{radius:"lg",shadow:"none",isZoomed:!1,isBlurred:!1,showSkeleton:!1},compoundVariants:[{showSkeleton:!0,disableAnimation:!1,class:{wrapper:["before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2"]}}],compoundSlots:[{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"none",class:"rounded-none"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"full",class:"rounded-full"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"sm",class:"rounded-small"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"md",class:"rounded-md"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"lg",class:"rounded-large"}]}),useSafeLayoutEffect=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:reactExports.useEffect;function useImage$1(f={}){const{loading:m,src:mt,srcSet:p,onLoad:E,onError:t,crossOrigin:Z,sizes:Ct,ignoreFallback:G}=f,[L,u]=reactExports.useState("pending");reactExports.useEffect(()=>{u(mt?"loading":"pending")},[mt]);const H=reactExports.useRef(),B=reactExports.useCallback(()=>{if(!mt)return;P();const b=new Image;b.src=mt,Z&&(b.crossOrigin=Z),p&&(b.srcset=p),Ct&&(b.sizes=Ct),m&&(b.loading=m),b.onload=w=>{P(),u("loaded"),E==null||E(w)},b.onerror=w=>{P(),u("failed"),t==null||t(w)},H.current=b},[mt,Z,p,Ct,E,t,m]),P=()=>{H.current&&(H.current.onload=null,H.current.onerror=null,H.current=null)};return useSafeLayoutEffect(()=>{if(!G)return L==="loading"&&B(),()=>{P()}},[L,B,G]),G?"loaded":L}function useImage(f){var m,mt;const p=useProviderContext(),[E,t]=mapPropsVariants(f,image.variantKeys),{ref:Z,as:Ct,src:G,className:L,classNames:u,loading:H,isBlurred:B,fallbackSrc:P,isLoading:b,disableSkeleton:w=!!P,removeWrapper:v=!1,onError:C,onLoad:F,srcSet:R,sizes:x,crossOrigin:o,...d}=E,D=useImage$1({src:G,loading:H,onError:C,onLoad:F,ignoreFallback:!1,srcSet:R,sizes:x,crossOrigin:o}),y=(mt=(m=f.disableAnimation)!=null?m:p==null?void 0:p.disableAnimation)!=null?mt:!1,l=D==="loaded"&&!b,M=D==="loading"||b,A=f.isZoomed,q=Ct||"img",Q=useDOMRef(Z),{w:k}=reactExports.useMemo(()=>({w:E.width?typeof E.width=="number"?`${E.width}px`:E.width:"fit-content"}),[E==null?void 0:E.width]),et=(!G||!l)&&!!P,pt=M&&!w,vt=reactExports.useMemo(()=>image({...t,disableAnimation:y,showSkeleton:pt}),[objectToDeps(t),y,pt]),$=clsx(L,u==null?void 0:u.img),yt=(Ut={})=>{const T=clsx($,Ut==null?void 0:Ut.className);return{src:G,ref:Q,"data-loaded":dataAttr(l),className:vt.img({class:T}),loading:H,srcSet:R,sizes:x,crossOrigin:o,...d}},Tt=reactExports.useCallback(()=>{const Ut=et?{backgroundImage:`url(${P})`}:{};return{className:vt.wrapper({class:u==null?void 0:u.wrapper}),style:{...Ut,maxWidth:k}}},[vt,et,P,u==null?void 0:u.wrapper]),Nt=reactExports.useCallback(()=>({src:G,"aria-hidden":dataAttr(!0),className:vt.blurredImg({class:u==null?void 0:u.blurredImg})}),[vt,G,u==null?void 0:u.blurredImg]);return{Component:q,domRef:Q,slots:vt,classNames:u,isBlurred:B,disableSkeleton:w,fallbackSrc:P,removeWrapper:v,isZoomed:A,isLoading:M,getImgProps:yt,getWrapperProps:Tt,getBlurredImgProps:Nt}}var Image$1=forwardRef((f,m)=>{const{Component:mt,domRef:p,slots:E,classNames:t,isBlurred:Z,isZoomed:Ct,fallbackSrc:G,removeWrapper:L,disableSkeleton:u,getImgProps:H,getWrapperProps:B,getBlurredImgProps:P}=useImage({...f,ref:m}),b=jsxRuntimeExports.jsx(mt,{ref:p,...H()});if(L)return b;const w=jsxRuntimeExports.jsx("div",{className:E.zoomedWrapper({class:t==null?void 0:t.zoomedWrapper}),children:b});return Z?jsxRuntimeExports.jsxs("div",{...B(),children:[Ct?w:b,reactExports.cloneElement(b,P())]}):Ct||!u||G?jsxRuntimeExports.jsxs("div",{...B(),children:[" ",Ct?w:b]}):b});Image$1.displayName="NextUI.Image";var image_default=Image$1;const profilePic="/assets/profilev2-BrSkhPYv.png",resume="/assets/afsalmadathingalresume-BEXI8TaI.pdf";var lib={exports:{}},core_min={};function commonjsRequire(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(m,mt){module.exports=m.pdfjsLib=mt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(f,m)=>{var we;Object.defineProperty(m,"__esModule",{value:!0}),m.VerbosityLevel=m.Util=m.UnknownErrorException=m.UnexpectedResponseException=m.TextRenderingMode=m.RenderingIntentFlag=m.PromiseCapability=m.PermissionFlag=m.PasswordResponses=m.PasswordException=m.PageActionEventType=m.OPS=m.MissingPDFException=m.MAX_IMAGE_SIZE_TO_CACHE=m.LINE_FACTOR=m.LINE_DESCENT_FACTOR=m.InvalidPDFException=m.ImageKind=m.IDENTITY_MATRIX=m.FormatError=m.FeatureTest=m.FONT_IDENTITY_MATRIX=m.DocumentActionEventType=m.CMapCompressionType=m.BaseException=m.BASELINE_FACTOR=m.AnnotationType=m.AnnotationReplyType=m.AnnotationPrefix=m.AnnotationMode=m.AnnotationFlag=m.AnnotationFieldFlag=m.AnnotationEditorType=m.AnnotationEditorPrefix=m.AnnotationEditorParamsType=m.AnnotationBorderStyleType=m.AnnotationActionEventType=m.AbortException=void 0,m.assert=yt,m.bytesToString=z,m.createValidAbsoluteUrl=Nt,m.getModificationDate=jt,m.getUuid=_e,m.getVerbosityLevel=et,m.info=pt,m.isArrayBuffer=St,m.isArrayEqual=Wt,m.isNodeJS=void 0,m.normalizeUnicode=ge,m.objectFromMap=Et,m.objectSize=bt,m.setVerbosityLevel=k,m.shadow=Ut,m.string32=ct,m.stringToBytes=dt,m.stringToPDFString=Pt,m.stringToUTF8String=ht,m.unreachable=$,m.utf8StringToString=at,m.warn=vt;const mt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");m.isNodeJS=mt;const p=[1,0,0,1,0,0];m.IDENTITY_MATRIX=p;const E=[.001,0,0,.001,0,0];m.FONT_IDENTITY_MATRIX=E;const t=1e7;m.MAX_IMAGE_SIZE_TO_CACHE=t;const Z=1.35;m.LINE_FACTOR=Z;const Ct=.35;m.LINE_DESCENT_FACTOR=Ct;const G=Ct/Z;m.BASELINE_FACTOR=G;const L={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};m.RenderingIntentFlag=L;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};m.AnnotationMode=u;const H="pdfjs_internal_editor_";m.AnnotationEditorPrefix=H;const B={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};m.AnnotationEditorType=B;const P={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};m.AnnotationEditorParamsType=P;const b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};m.PermissionFlag=b;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};m.TextRenderingMode=w;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};m.ImageKind=v;const C={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};m.AnnotationType=C;const F={GROUP:"Group",REPLY:"R"};m.AnnotationReplyType=F;const R={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};m.AnnotationFlag=R;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};m.AnnotationFieldFlag=x;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};m.AnnotationBorderStyleType=o;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};m.AnnotationActionEventType=d;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};m.DocumentActionEventType=D;const y={O:"PageOpen",C:"PageClose"};m.PageActionEventType=y;const l={ERRORS:0,WARNINGS:1,INFOS:5};m.VerbosityLevel=l;const M={NONE:0,BINARY:1};m.CMapCompressionType=M;const A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};m.OPS=A;const q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};m.PasswordResponses=q;let Q=l.WARNINGS;function k(_t){Number.isInteger(_t)&&(Q=_t)}function et(){return Q}function pt(_t){Q>=l.INFOS&&console.log(`Info: ${_t}`)}function vt(_t){Q>=l.WARNINGS&&console.log(`Warning: ${_t}`)}function $(_t){throw new Error(_t)}function yt(_t,nt){_t||$(nt)}function Tt(_t){switch(_t==null?void 0:_t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nt(_t,nt=null,Y=null){if(!_t)return null;try{if(Y&&typeof _t=="string"){if(Y.addDefaultProtocol&&_t.startsWith("www.")){const At=_t.match(/\./g);(At==null?void 0:At.length)>=2&&(_t=`http://${_t}`)}if(Y.tryConvertEncoding)try{_t=ht(_t)}catch{}}const Ft=nt?new URL(_t,nt):new URL(_t);if(Tt(Ft))return Ft}catch{}return null}function Ut(_t,nt,Y,Ft=!1){return Object.defineProperty(_t,nt,{value:Y,enumerable:!Ft,configurable:!0,writable:!1}),Y}const T=function(){function nt(Y,Ft){this.constructor===nt&&$("Cannot initialize BaseException."),this.message=Y,this.name=Ft}return nt.prototype=new Error,nt.constructor=nt,nt}();m.BaseException=T;class i extends T{constructor(nt,Y){super(nt,"PasswordException"),this.code=Y}}m.PasswordException=i;class a extends T{constructor(nt,Y){super(nt,"UnknownErrorException"),this.details=Y}}m.UnknownErrorException=a;class s extends T{constructor(nt){super(nt,"InvalidPDFException")}}m.InvalidPDFException=s;class c extends T{constructor(nt){super(nt,"MissingPDFException")}}m.MissingPDFException=c;class h extends T{constructor(nt,Y){super(nt,"UnexpectedResponseException"),this.status=Y}}m.UnexpectedResponseException=h;class S extends T{constructor(nt){super(nt,"FormatError")}}m.FormatError=S;class I extends T{constructor(nt){super(nt,"AbortException")}}m.AbortException=I;function z(_t){(typeof _t!="object"||(_t==null?void 0:_t.length)===void 0)&&$("Invalid argument for bytesToString");const nt=_t.length,Y=8192;if(nt<Y)return String.fromCharCode.apply(null,_t);const Ft=[];for(let At=0;At<nt;At+=Y){const Re=Math.min(At+Y,nt),Ue=_t.subarray(At,Re);Ft.push(String.fromCharCode.apply(null,Ue))}return Ft.join("")}function dt(_t){typeof _t!="string"&&$("Invalid argument for stringToBytes");const nt=_t.length,Y=new Uint8Array(nt);for(let Ft=0;Ft<nt;++Ft)Y[Ft]=_t.charCodeAt(Ft)&255;return Y}function ct(_t){return String.fromCharCode(_t>>24&255,_t>>16&255,_t>>8&255,_t&255)}function bt(_t){return Object.keys(_t).length}function Et(_t){const nt=Object.create(null);for(const[Y,Ft]of _t)nt[Y]=Ft;return nt}function Dt(){const _t=new Uint8Array(4);return _t[0]=1,new Uint32Array(_t.buffer,0,1)[0]===1}function wt(){try{return new Function(""),!0}catch{return!1}}class $t{static get isLittleEndian(){return Ut(this,"isLittleEndian",Dt())}static get isEvalSupported(){return Ut(this,"isEvalSupported",wt())}static get isOffscreenCanvasSupported(){return Ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ut(this,"platform",{isWin:!1,isMac:!1}):Ut(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var nt,Y;return Ut(this,"isCSSRoundSupported",(Y=(nt=globalThis.CSS)==null?void 0:nt.supports)==null?void 0:Y.call(nt,"width: round(1.5px, 1px)"))}}m.FeatureTest=$t;const ie=[...Array(256).keys()].map(_t=>_t.toString(16).padStart(2,"0"));class It{static makeHexColor(nt,Y,Ft){return`#${ie[nt]}${ie[Y]}${ie[Ft]}`}static scaleMinMax(nt,Y){let Ft;nt[0]?(nt[0]<0&&(Ft=Y[0],Y[0]=Y[1],Y[1]=Ft),Y[0]*=nt[0],Y[1]*=nt[0],nt[3]<0&&(Ft=Y[2],Y[2]=Y[3],Y[3]=Ft),Y[2]*=nt[3],Y[3]*=nt[3]):(Ft=Y[0],Y[0]=Y[2],Y[2]=Ft,Ft=Y[1],Y[1]=Y[3],Y[3]=Ft,nt[1]<0&&(Ft=Y[2],Y[2]=Y[3],Y[3]=Ft),Y[2]*=nt[1],Y[3]*=nt[1],nt[2]<0&&(Ft=Y[0],Y[0]=Y[1],Y[1]=Ft),Y[0]*=nt[2],Y[1]*=nt[2]),Y[0]+=nt[4],Y[1]+=nt[4],Y[2]+=nt[5],Y[3]+=nt[5]}static transform(nt,Y){return[nt[0]*Y[0]+nt[2]*Y[1],nt[1]*Y[0]+nt[3]*Y[1],nt[0]*Y[2]+nt[2]*Y[3],nt[1]*Y[2]+nt[3]*Y[3],nt[0]*Y[4]+nt[2]*Y[5]+nt[4],nt[1]*Y[4]+nt[3]*Y[5]+nt[5]]}static applyTransform(nt,Y){const Ft=nt[0]*Y[0]+nt[1]*Y[2]+Y[4],At=nt[0]*Y[1]+nt[1]*Y[3]+Y[5];return[Ft,At]}static applyInverseTransform(nt,Y){const Ft=Y[0]*Y[3]-Y[1]*Y[2],At=(nt[0]*Y[3]-nt[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/Ft,Re=(-nt[0]*Y[1]+nt[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/Ft;return[At,Re]}static getAxialAlignedBoundingBox(nt,Y){const Ft=this.applyTransform(nt,Y),At=this.applyTransform(nt.slice(2,4),Y),Re=this.applyTransform([nt[0],nt[3]],Y),Ue=this.applyTransform([nt[2],nt[1]],Y);return[Math.min(Ft[0],At[0],Re[0],Ue[0]),Math.min(Ft[1],At[1],Re[1],Ue[1]),Math.max(Ft[0],At[0],Re[0],Ue[0]),Math.max(Ft[1],At[1],Re[1],Ue[1])]}static inverseTransform(nt){const Y=nt[0]*nt[3]-nt[1]*nt[2];return[nt[3]/Y,-nt[1]/Y,-nt[2]/Y,nt[0]/Y,(nt[2]*nt[5]-nt[4]*nt[3])/Y,(nt[4]*nt[1]-nt[5]*nt[0])/Y]}static singularValueDecompose2dScale(nt){const Y=[nt[0],nt[2],nt[1],nt[3]],Ft=nt[0]*Y[0]+nt[1]*Y[2],At=nt[0]*Y[1]+nt[1]*Y[3],Re=nt[2]*Y[0]+nt[3]*Y[2],Ue=nt[2]*Y[1]+nt[3]*Y[3],st=(Ft+Ue)/2,Ot=Math.sqrt((Ft+Ue)**2-4*(Ft*Ue-Re*At))/2,Qt=st+Ot||1,zt=st-Ot||1;return[Math.sqrt(Qt),Math.sqrt(zt)]}static normalizeRect(nt){const Y=nt.slice(0);return nt[0]>nt[2]&&(Y[0]=nt[2],Y[2]=nt[0]),nt[1]>nt[3]&&(Y[1]=nt[3],Y[3]=nt[1]),Y}static intersect(nt,Y){const Ft=Math.max(Math.min(nt[0],nt[2]),Math.min(Y[0],Y[2])),At=Math.min(Math.max(nt[0],nt[2]),Math.max(Y[0],Y[2]));if(Ft>At)return null;const Re=Math.max(Math.min(nt[1],nt[3]),Math.min(Y[1],Y[3])),Ue=Math.min(Math.max(nt[1],nt[3]),Math.max(Y[1],Y[3]));return Re>Ue?null:[Ft,Re,At,Ue]}static bezierBoundingBox(nt,Y,Ft,At,Re,Ue,st,Ot){const Qt=[],zt=[[],[]];let te,ne,Ie,Lt,Te,Zt,N,n;for(let it=0;it<2;++it){if(it===0?(ne=6*nt-12*Ft+6*Re,te=-3*nt+9*Ft-9*Re+3*st,Ie=3*Ft-3*nt):(ne=6*Y-12*At+6*Ue,te=-3*Y+9*At-9*Ue+3*Ot,Ie=3*At-3*Y),Math.abs(te)<1e-12){if(Math.abs(ne)<1e-12)continue;Lt=-Ie/ne,0<Lt&&Lt<1&&Qt.push(Lt);continue}N=ne*ne-4*Ie*te,n=Math.sqrt(N),!(N<0)&&(Te=(-ne+n)/(2*te),0<Te&&Te<1&&Qt.push(Te),Zt=(-ne-n)/(2*te),0<Zt&&Zt<1&&Qt.push(Zt))}let _=Qt.length,j;const K=_;for(;_--;)Lt=Qt[_],j=1-Lt,zt[0][_]=j*j*j*nt+3*j*j*Lt*Ft+3*j*Lt*Lt*Re+Lt*Lt*Lt*st,zt[1][_]=j*j*j*Y+3*j*j*Lt*At+3*j*Lt*Lt*Ue+Lt*Lt*Lt*Ot;return zt[0][K]=nt,zt[1][K]=Y,zt[0][K+1]=st,zt[1][K+1]=Ot,zt[0].length=zt[1].length=K+2,[Math.min(...zt[0]),Math.min(...zt[1]),Math.max(...zt[0]),Math.max(...zt[1])]}}m.Util=It;const Jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Pt(_t){if(_t[0]>="ï"){let Y;if(_t[0]==="þ"&&_t[1]==="ÿ"?Y="utf-16be":_t[0]==="ÿ"&&_t[1]==="þ"?Y="utf-16le":_t[0]==="ï"&&_t[1]==="»"&&_t[2]==="¿"&&(Y="utf-8"),Y)try{const Ft=new TextDecoder(Y,{fatal:!0}),At=dt(_t);return Ft.decode(At)}catch(Ft){vt(`stringToPDFString: "${Ft}".`)}}const nt=[];for(let Y=0,Ft=_t.length;Y<Ft;Y++){const At=Jt[_t.charCodeAt(Y)];nt.push(At?String.fromCharCode(At):_t.charAt(Y))}return nt.join("")}function ht(_t){return decodeURIComponent(escape(_t))}function at(_t){return unescape(encodeURIComponent(_t))}function St(_t){return typeof _t=="object"&&(_t==null?void 0:_t.byteLength)!==void 0}function Wt(_t,nt){if(_t.length!==nt.length)return!1;for(let Y=0,Ft=_t.length;Y<Ft;Y++)if(_t[Y]!==nt[Y])return!1;return!0}function jt(_t=new Date){return[_t.getUTCFullYear().toString(),(_t.getUTCMonth()+1).toString().padStart(2,"0"),_t.getUTCDate().toString().padStart(2,"0"),_t.getUTCHours().toString().padStart(2,"0"),_t.getUTCMinutes().toString().padStart(2,"0"),_t.getUTCSeconds().toString().padStart(2,"0")].join("")}class le{constructor(){U(this,we,!1);this.promise=new Promise((nt,Y)=>{this.resolve=Ft=>{ft(this,we,!0),nt(Ft)},this.reject=Ft=>{ft(this,we,!0),Y(Ft)}})}get settled(){return e(this,we)}}we=new WeakMap,m.PromiseCapability=le;let fe=null,ce=null;function ge(_t){return fe||(fe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ce=new Map([["ﬅ","ſt"]])),_t.replaceAll(fe,(nt,Y,Ft)=>Y?Y.normalize("NFKC"):ce.get(Ft))}function _e(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const _t=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(_t);else for(let nt=0;nt<32;nt++)_t[nt]=Math.floor(Math.random()*255);return z(_t)}const re="pdfjs_internal_id_";m.AnnotationPrefix=re},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var f,mt,p,E,jn,Z,oi,G,L,u,H,B,P,b,w,v,li,F,R,Di,o,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:M}=l,A=y.url?getUrlProp(y.url):null,q=y.data?getDataProp(y.data):null,Q=y.httpHeaders||null,k=y.withCredentials===!0,et=y.password??null,pt=y.range instanceof PDFDataRangeTransport?y.range:null,vt=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let $=y.worker instanceof PDFWorker?y.worker:null;const yt=y.verbosity,Tt=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,Nt=typeof y.cMapUrl=="string"?y.cMapUrl:null,Ut=y.cMapPacked!==!1,T=y.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,a=y.StandardFontDataFactory||DefaultStandardFontDataFactory,s=y.stopAtErrors!==!0,c=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,h=y.isEvalSupported!==!1,S=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,I=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,z=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,dt=y.fontExtraProperties===!0,ct=y.enableXfa===!0,bt=y.ownerDocument||globalThis.document,Et=y.disableRange===!0,Dt=y.disableStream===!0,wt=y.disableAutoFetch===!0,$t=y.pdfBug===!0,ie=pt?pt.length:y.length??NaN,It=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!z,Jt=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:T===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&Nt&&i&&(0,_display_utils.isValidFetchUrl)(Nt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),Pt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:bt}),ht=y.filterFactory||new DefaultFilterFactory({docId:M,ownerDocument:bt}),at=null;(0,_util.setVerbosityLevel)(yt);const St={canvasFactory:Pt,filterFactory:ht};if(Jt||(St.cMapReaderFactory=new T({baseUrl:Nt,isCompressed:Ut}),St.standardFontDataFactory=new a({baseUrl:i})),!$){const le={verbosity:yt,port:_worker_options.GlobalWorkerOptions.workerPort};$=le.port?PDFWorker.fromPort(le):new PDFWorker(le),l._worker=$}const Wt={docId:M,apiVersion:"3.11.174",data:q,password:et,disableAutoFetch:wt,rangeChunkSize:vt,length:ie,docBaseUrl:Tt,enableXfa:ct,evaluatorOptions:{maxImageSize:c,disableFontFace:z,ignoreErrors:s,isEvalSupported:h,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:I,fontExtraProperties:dt,useSystemFonts:It,cMapUrl:Jt?Nt:null,standardFontDataUrl:Jt?i:null}},jt={ignoreErrors:s,isEvalSupported:h,disableFontFace:z,fontExtraProperties:dt,enableXfa:ct,ownerDocument:bt,disableAutoFetch:wt,pdfBug:$t,styleElement:at};return $.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const le=_fetchDocument($,Wt),fe=new Promise(function(ce){let ge;pt?ge=new _transport_stream.PDFDataTransportStream({length:ie,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:Et,disableStream:Dt},pt):q||(ge=(re=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(re):(0,_display_utils.isValidFetchUrl)(re.url)?new _displayFetch_stream.PDFFetchStream(re):new _displayNetwork.PDFNetworkStream(re))({url:A,length:ie,httpHeaders:Q,withCredentials:k,rangeChunkSize:vt,disableRange:Et,disableStream:Dt})),ce(ge)});return Promise.all([le,fe]).then(function([ce,ge]){if(l.destroyed)throw new Error("Loading aborted");const _e=new _message_handler.MessageHandler(M,ce,$.port),re=new WorkerTransport(_e,l,ge,jt,St);l._transport=re,_e.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(y,l){if(y.destroyed)throw new Error("Worker was destroyed");const M=await y.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return M}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const m=class m{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${qn(m,f)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,M,A;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((M=this._transport)==null?void 0:M.destroy())}catch(q){throw(A=this._worker)!=null&&A.port&&delete this._worker._pendingDestroy,q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};f=new WeakMap,U(m,f,0);let PDFDocumentLoadingTask=m;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,M,A=!1,q=null){this.length=l,this.initialData=M,this.progressiveDone=A,this.contentDispositionFilename=q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,M){for(const A of this._rangeListeners)A(l,M)}onDataProgress(l,M){this._readyCapability.promise.then(()=>{for(const A of this._progressListeners)A(l,M)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const M of this._progressiveReadListeners)M(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,M){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,M){this._pdfInfo=l,this._transport=M,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(A=>{if(!A)return A;const q=[];for(const Q in A)q.push(...A[Q]);return q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,M,A,q=!1){U(this,E);U(this,Z);U(this,mt,null);U(this,p,!1);this._pageIndex=l,this._pageInfo=M,this._transport=A,this._stats=q?new _display_utils.StatTimer:null,this._pdfBug=q,this.commonObjs=A.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:M=this.rotate,offsetX:A=0,offsetY:q=0,dontFlip:Q=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:M,offsetX:A,offsetY:q,dontFlip:Q})}getAnnotations({intent:l="display"}={}){const M=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,M.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:M,intent:A="display",annotationMode:q=_util.AnnotationMode.ENABLE,transform:Q=null,background:k=null,optionalContentConfigPromise:et=null,annotationCanvasMap:pt=null,pageColors:vt=null,printAnnotationStorage:$=null}){var a,s;(a=this._stats)==null||a.time("Overall");const yt=this._transport.getRenderingIntent(A,q,$);ft(this,p,!1),tt(this,Z,oi).call(this),et||(et=this._transport.getOptionalContentConfig());let Tt=this._intentStates.get(yt.cacheKey);Tt||(Tt=Object.create(null),this._intentStates.set(yt.cacheKey,Tt)),Tt.streamReaderCancelTimeout&&(clearTimeout(Tt.streamReaderCancelTimeout),Tt.streamReaderCancelTimeout=null);const Nt=!!(yt.renderingIntent&_util.RenderingIntentFlag.PRINT);Tt.displayReadyCapability||(Tt.displayReadyCapability=new _util.PromiseCapability,Tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(yt));const Ut=c=>{var h,S;Tt.renderTasks.delete(T),(this._maybeCleanupAfterRender||Nt)&&ft(this,p,!0),tt(this,E,jn).call(this,!Nt),c?(T.capability.reject(c),this._abortOperatorList({intentState:Tt,reason:c instanceof Error?c:new Error(c)})):T.capability.resolve(),(h=this._stats)==null||h.timeEnd("Rendering"),(S=this._stats)==null||S.timeEnd("Overall")},T=new InternalRenderTask({callback:Ut,params:{canvasContext:l,viewport:M,transform:Q,background:k},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:Tt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Nt,pdfBug:this._pdfBug,pageColors:vt});(Tt.renderTasks||(Tt.renderTasks=new Set)).add(T);const i=T.task;return Promise.all([Tt.displayReadyCapability.promise,et]).then(([c,h])=>{var S;if(this.destroyed){Ut();return}(S=this._stats)==null||S.time("Rendering"),T.initializeGraphics({transparency:c,optionalContentConfig:h}),T.operatorListChanged()}).catch(Ut),i}getOperatorList({intent:l="display",annotationMode:M=_util.AnnotationMode.ENABLE,printAnnotationStorage:A=null}={}){var pt;function q(){k.operatorList.lastChunk&&(k.opListReadCapability.resolve(k.operatorList),k.renderTasks.delete(et))}const Q=this._transport.getRenderingIntent(l,M,A,!0);let k=this._intentStates.get(Q.cacheKey);k||(k=Object.create(null),this._intentStates.set(Q.cacheKey,k));let et;return k.opListReadCapability||(et=Object.create(null),et.operatorListChanged=q,k.opListReadCapability=new _util.PromiseCapability,(k.renderTasks||(k.renderTasks=new Set)).add(et),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(Q)),k.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:M=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:M===!0},{highWaterMark:100,size(q){return q.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(A=>_xfa_text.XfaText.textContent(A));const M=this.streamTextContent(l);return new Promise(function(A,q){function Q(){k.read().then(function({value:pt,done:vt}){if(vt){A(et);return}Object.assign(et.styles,pt.styles),et.items.push(...pt.items),Q()},q)}const k=M.getReader(),et={items:[],styles:Object.create(null)};Q()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const M of this._intentStates.values())if(this._abortOperatorList({intentState:M,reason:new Error("Page was destroyed."),force:!0}),!M.opListReadCapability)for(const A of M.renderTasks)l.push(A.completed),A.cancel();return this.objs.clear(),ft(this,p,!1),tt(this,Z,oi).call(this),Promise.all(l)}cleanup(l=!1){ft(this,p,!0);const M=tt(this,E,jn).call(this,!1);return l&&M&&this._stats&&(this._stats=new _display_utils.StatTimer),M}_startRenderPage(l,M){var q,Q;const A=this._intentStates.get(M);A&&((q=this._stats)==null||q.timeEnd("Page Request"),(Q=A.displayReadyCapability)==null||Q.resolve(l))}_renderPageChunk(l,M){for(let A=0,q=l.length;A<q;A++)M.operatorList.fnArray.push(l.fnArray[A]),M.operatorList.argsArray.push(l.argsArray[A]);M.operatorList.lastChunk=l.lastChunk,M.operatorList.separateAnnots=l.separateAnnots;for(const A of M.renderTasks)A.operatorListChanged();l.lastChunk&&tt(this,E,jn).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:M,annotationStorageSerializable:A}){const{map:q,transfers:Q}=A,et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:M,annotationStorage:q},Q).getReader(),pt=this._intentStates.get(M);pt.streamReader=et;const vt=()=>{et.read().then(({value:$,done:yt})=>{if(yt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk($,pt),vt())},$=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const yt of pt.renderTasks)yt.operatorListChanged();tt(this,E,jn).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject($);else if(pt.opListReadCapability)pt.opListReadCapability.reject($);else throw $}})};vt()}_abortOperatorList({intentState:l,reason:M,force:A=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!A){if(l.renderTasks.size>0)return;if(M instanceof _display_utils.RenderingCancelledException){let q=RENDERING_CANCELLED_TIMEOUT;M.extraDelay>0&&M.extraDelay<1e3&&(q+=M.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:M,force:!0})},q);return}}if(l.streamReader.cancel(new _util.AbortException(M.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[q,Q]of this._intentStates)if(Q===l){this._intentStates.delete(q);break}this.cleanup()}}}get stats(){return this._stats}}mt=new WeakMap,p=new WeakMap,E=new WeakSet,jn=function(l=!1){if(tt(this,Z,oi).call(this),!e(this,p)||this.destroyed)return!1;if(l)return ft(this,mt,setTimeout(()=>{ft(this,mt,null),tt(this,E,jn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:M,operatorList:A}of this._intentStates.values())if(M.size>0||!A.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ft(this,p,!1),!0},Z=new WeakSet,oi=function(){e(this,mt)&&(clearTimeout(e(this,mt)),ft(this,mt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){U(this,G,new Set);U(this,L,Promise.resolve())}postMessage(l,M){const A={data:structuredClone(l,M?{transfer:M}:null)};e(this,L).then(()=>{for(const q of e(this,G))q.call(this,A)})}addEventListener(l,M){e(this,G).add(M)}removeEventListener(l,M){e(this,G).delete(M)}terminate(){e(this,G).clear()}}G=new WeakMap,L=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(u=document==null?void 0:document.currentScript)==null?void 0:u.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,l){let M;try{if(M=new URL(y),!M.origin||M.origin==="null")return!1}catch{return!1}const A=new URL(l,M);return M.origin===A.origin},PDFWorkerUtil.createCDNWrapper=function(y){const l=`importScripts("${y}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:l=null,verbosity:M=(0,_util.getVerbosityLevel)()}={}){var A;if(this.name=y,this.destroyed=!1,this.verbosity=M,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((A=e(_PDFWorker,H))!=null&&A.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,H)||ft(_PDFWorker,H,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const l=new Worker(y),M=new _message_handler.MessageHandler("main","worker",l),A=()=>{l.removeEventListener("error",q),M.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},q=()=>{this._webWorker||A()};l.addEventListener("error",q),M.on("test",k=>{if(l.removeEventListener("error",q),this.destroyed){A();return}k?(this._messageHandler=M,this._port=l,this._webWorker=l,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),M.destroy(),l.terminate())}),M.on("ready",k=>{if(l.removeEventListener("error",q),this.destroyed){A();return}try{Q()}catch{this._setupFakeWorker()}});const Q=()=>{const k=new Uint8Array;M.send("test",k,[k.buffer])};Q();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const M=`fake${PDFWorkerUtil.fakeWorkerId++}`,A=new _message_handler.MessageHandler(M+"_worker",M,l);y.setup(A,l);const q=new _message_handler.MessageHandler(M,M+"_worker",l);this._messageHandler=q,this._readyCapability.resolve(),q.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=e(_PDFWorker,H))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var M;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(M=e(this,H))==null?void 0:M.get(y.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};H=new WeakMap,U(_PDFWorker,H,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,M,A,q,Q){U(this,v);U(this,B,new Map);U(this,P,new Map);U(this,b,new Map);U(this,w,null);this.messageHandler=l,this.loadingTask=M,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:q.ownerDocument,styleElement:q.styleElement}),this._params=q,this.canvasFactory=Q.canvasFactory,this.filterFactory=Q.filterFactory,this.cMapReaderFactory=Q.cMapReaderFactory,this.standardFontDataFactory=Q.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=A,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,M=_util.AnnotationMode.ENABLE,A=null,q=!1){let Q=_util.RenderingIntentFlag.DISPLAY,k=_annotation_storage.SerializableEmpty;switch(l){case"any":Q=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Q=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(M){case _util.AnnotationMode.DISABLE:Q+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Q+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Q+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,k=(Q&_util.RenderingIntentFlag.PRINT&&A instanceof _annotation_storage.PrintAnnotationStorage?A:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${M}`)}return q&&(Q+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Q,cacheKey:`${Q}_${k.hash}`,annotationStorageSerializable:k}}destroy(){var A;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(A=e(this,w))==null||A.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const q of e(this,P).values())l.push(q._destroy());e(this,P).clear(),e(this,b).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const M=this.messageHandler.sendWithPromise("Terminate",null);return l.push(M),Promise.all(l).then(()=>{var q;this.commonObjs.clear(),this.fontLoader.clear(),e(this,B).clear(),this.filterFactory.destroy(),(q=this._networkStream)==null||q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:M}=this;l.on("GetReader",(A,q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Q=>{this._lastProgress={loaded:Q.loaded,total:Q.total}},q.onPull=()=>{this._fullReader.read().then(function({value:Q,done:k}){if(k){q.close();return}(0,_util.assert)(Q instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),q.enqueue(new Uint8Array(Q),1,[Q])}).catch(Q=>{q.error(Q)})},q.onCancel=Q=>{this._fullReader.cancel(Q),q.ready.catch(k=>{if(!this.destroyed)throw k})}}),l.on("ReaderHeadersReady",A=>{const q=new _util.PromiseCapability,Q=this._fullReader;return Q.headersReady.then(()=>{var k;(!Q.isStreamingSupported||!Q.isRangeSupported)&&(this._lastProgress&&((k=M.onProgress)==null||k.call(M,this._lastProgress)),Q.onProgress=et=>{var pt;(pt=M.onProgress)==null||pt.call(M,{loaded:et.loaded,total:et.total})}),q.resolve({isStreamingSupported:Q.isStreamingSupported,isRangeSupported:Q.isRangeSupported,contentLength:Q.contentLength})},q.reject),q.promise}),l.on("GetRangeReader",(A,q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Q=this._networkStream.getRangeReader(A.begin,A.end);if(!Q){q.close();return}q.onPull=()=>{Q.read().then(function({value:k,done:et}){if(et){q.close();return}(0,_util.assert)(k instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),q.enqueue(new Uint8Array(k),1,[k])}).catch(k=>{q.error(k)})},q.onCancel=k=>{Q.cancel(k),q.ready.catch(et=>{if(!this.destroyed)throw et})}}),l.on("GetDoc",({pdfInfo:A})=>{this._numPages=A.numPages,this._htmlForXfa=A.htmlForXfa,delete A.htmlForXfa,M._capability.resolve(new PDFDocumentProxy(A,this))}),l.on("DocException",function(A){let q;switch(A.name){case"PasswordException":q=new _util.PasswordException(A.message,A.code);break;case"InvalidPDFException":q=new _util.InvalidPDFException(A.message);break;case"MissingPDFException":q=new _util.MissingPDFException(A.message);break;case"UnexpectedResponseException":q=new _util.UnexpectedResponseException(A.message,A.status);break;case"UnknownErrorException":q=new _util.UnknownErrorException(A.message,A.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}M._capability.reject(q)}),l.on("PasswordRequest",A=>{if(ft(this,w,new _util.PromiseCapability),M.onPassword){const q=Q=>{Q instanceof Error?e(this,w).reject(Q):e(this,w).resolve({password:Q})};try{M.onPassword(q,A.code)}catch(Q){e(this,w).reject(Q)}}else e(this,w).reject(new _util.PasswordException(A.message,A.code));return e(this,w).promise}),l.on("DataLoaded",A=>{var q;(q=M.onProgress)==null||q.call(M,{loaded:A.length,total:A.length}),this.downloadInfoCapability.resolve(A)}),l.on("StartRenderPage",A=>{if(this.destroyed)return;e(this,P).get(A.pageIndex)._startRenderPage(A.transparency,A.cacheKey)}),l.on("commonobj",([A,q,Q])=>{var k;if(!this.destroyed&&!this.commonObjs.has(A))switch(q){case"Font":const et=this._params;if("error"in Q){const $=Q.error;(0,_util.warn)(`Error during font loading: ${$}`),this.commonObjs.resolve(A,$);break}const pt=et.pdfBug&&((k=globalThis.FontInspector)!=null&&k.enabled)?($,yt)=>globalThis.FontInspector.fontAdded($,yt):null,vt=new _font_loader.FontFaceObject(Q,{isEvalSupported:et.isEvalSupported,disableFontFace:et.disableFontFace,ignoreErrors:et.ignoreErrors,inspectFont:pt});this.fontLoader.bind(vt).catch($=>l.sendWithPromise("FontFallback",{id:A})).finally(()=>{!et.fontExtraProperties&&vt.data&&(vt.data=null),this.commonObjs.resolve(A,vt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(A,Q);break;default:throw new Error(`Got unknown common object type ${q}`)}}),l.on("obj",([A,q,Q,k])=>{var pt;if(this.destroyed)return;const et=e(this,P).get(q);if(!et.objs.has(A))switch(Q){case"Image":if(et.objs.resolve(A,k),k){let vt;if(k.bitmap){const{width:$,height:yt}=k;vt=$*yt*4}else vt=((pt=k.data)==null?void 0:pt.length)||0;vt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(et._maybeCleanupAfterRender=!0)}break;case"Pattern":et.objs.resolve(A,k);break;default:throw new Error(`Got unknown object type ${Q}`)}}),l.on("DocProgress",A=>{var q;this.destroyed||(q=M.onProgress)==null||q.call(M,{loaded:A.loaded,total:A.total})}),l.on("FetchBuiltInCMap",A=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(A):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",A=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(A):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var A;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:M}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((A=this._fullReader)==null?void 0:A.filename)??null},M).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const M=l-1,A=e(this,b).get(M);if(A)return A;const q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:M}).then(Q=>{if(this.destroyed)throw new Error("Transport destroyed");const k=new PDFPageProxy(M,Q,this,this._params.pdfBug);return e(this,P).set(M,k),k});return e(this,b).set(M,q),q}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,M){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:M})}getFieldObjects(){return tt(this,v,li).call(this,"GetFieldObjects")}hasJSActions(){return tt(this,v,li).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return tt(this,v,li).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",M=e(this,B).get(l);if(M)return M;const A=this.messageHandler.sendWithPromise(l,null).then(q=>{var Q,k;return{info:q[0],metadata:q[1]?new _metadata.Metadata(q[1]):null,contentDispositionFilename:((Q=this._fullReader)==null?void 0:Q.filename)??null,contentLength:((k=this._fullReader)==null?void 0:k.contentLength)??null}});return e(this,B).set(l,A),A}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const M of e(this,P).values())if(!M.cleanup())throw new Error(`startCleanup: Page ${M.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),e(this,B).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:M}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:M})}}B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakSet,li=function(l,M=null){const A=e(this,B).get(l);if(A)return A;const q=this.messageHandler.sendWithPromise(l,M);return e(this,B).set(l,q),q};class PDFObjects{constructor(){U(this,R);U(this,F,Object.create(null))}get(l,M=null){if(M){const q=tt(this,R,Di).call(this,l);return q.capability.promise.then(()=>M(q.data)),null}const A=e(this,F)[l];if(!(A!=null&&A.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return A.data}has(l){const M=e(this,F)[l];return(M==null?void 0:M.capability.settled)||!1}resolve(l,M=null){const A=tt(this,R,Di).call(this,l);A.data=M,A.capability.resolve()}clear(){var l;for(const M in e(this,F)){const{data:A}=e(this,F)[M];(l=A==null?void 0:A.bitmap)==null||l.close()}ft(this,F,Object.create(null))}}F=new WeakMap,R=new WeakSet,Di=function(l){var M;return(M=e(this,F))[l]||(M[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){U(this,o,null);ft(this,o,l),this.onContinue=null}get promise(){return e(this,o).capability.promise}cancel(l=0){e(this,o).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=e(this,o).operatorList;if(!l)return!1;const{annotationCanvasMap:M}=e(this,o);return l.form||l.canvas&&(M==null?void 0:M.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const D=class D{constructor({callback:l,params:M,objs:A,commonObjs:q,annotationCanvasMap:Q,operatorList:k,pageIndex:et,canvasFactory:pt,filterFactory:vt,useRequestAnimationFrame:$=!1,pdfBug:yt=!1,pageColors:Tt=null}){this.callback=l,this.params=M,this.objs=A,this.commonObjs=q,this.annotationCanvasMap=Q,this.operatorListIdx=null,this.operatorList=k,this._pageIndex=et,this.canvasFactory=pt,this.filterFactory=vt,this._pdfBug=yt,this.pageColors=Tt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=$===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=M.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:M}){var et,pt;if(this.cancelled)return;if(this._canvas){if(e(D,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(D,d).add(this._canvas)}this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:A,viewport:q,transform:Q,background:k}=this.params;this.gfx=new _canvas.CanvasGraphics(A,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:M},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Q,viewport:q,transparency:l,background:k}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(l=null,M=0){var A;this.running=!1,this.cancelled=!0,(A=this.gfx)==null||A.endDrawing(),e(D,d).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,M))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(D,d).delete(this._canvas),this.callback())))}};d=new WeakMap,U(D,d,new WeakSet);let InternalRenderTask=D;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(f,m,mt)=>{var L,u,H,Fr,P;Object.defineProperty(m,"__esModule",{value:!0}),m.SerializableEmpty=m.PrintAnnotationStorage=m.AnnotationStorage=void 0;var p=mt(1),E=mt(4),t=mt(8);const Z=Object.freeze({map:null,hash:"",transfers:void 0});m.SerializableEmpty=Z;class Ct{constructor(){U(this,H);U(this,L,!1);U(this,u,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(w,v){const C=e(this,u).get(w);return C===void 0?v:Object.assign(v,C)}getRawValue(w){return e(this,u).get(w)}remove(w){if(e(this,u).delete(w),e(this,u).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of e(this,u).values())if(v instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(w,v){const C=e(this,u).get(w);let F=!1;if(C!==void 0)for(const[R,x]of Object.entries(v))C[R]!==x&&(F=!0,C[R]=x);else F=!0,e(this,u).set(w,v);F&&tt(this,H,Fr).call(this),v instanceof E.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(w){return e(this,u).has(w)}getAll(){return e(this,u).size>0?(0,p.objectFromMap)(e(this,u)):null}setAll(w){for(const[v,C]of Object.entries(w))this.setValue(v,C)}get size(){return e(this,u).size}resetModified(){e(this,L)&&(ft(this,L,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(e(this,u).size===0)return Z;const w=new Map,v=new t.MurmurHash3_64,C=[],F=Object.create(null);let R=!1;for(const[x,o]of e(this,u)){const d=o instanceof E.AnnotationEditor?o.serialize(!1,F):o;d&&(w.set(x,d),v.update(`${x}:${JSON.stringify(d)}`),R||(R=!!d.bitmap))}if(R)for(const x of w.values())x.bitmap&&C.push(x.bitmap);return w.size>0?{map:w,hash:v.hexdigest(),transfers:C}:Z}}L=new WeakMap,u=new WeakMap,H=new WeakSet,Fr=function(){e(this,L)||(ft(this,L,!0),typeof this.onSetModified=="function"&&this.onSetModified())},m.AnnotationStorage=Ct;class G extends Ct{constructor(v){super();U(this,P,void 0);const{map:C,hash:F,transfers:R}=v.serializable,x=structuredClone(C,R?{transfer:R}:null);ft(this,P,{map:x,hash:F,transfers:R})}get print(){(0,p.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,P)}}P=new WeakMap,m.PrintAnnotationStorage=G},(f,m,mt)=>{var G,L,u,H,B,P,b,w,v,C,F,R,x,o,d,Ii,y,Oi,M,Ni,q,Bi,k,Lr,pt,Dr,$,Ir,Tt,ji,Ut,Or;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditor=void 0;var p=mt(5),E=mt(1),t=mt(6);const i=class i{constructor(s){U(this,d);U(this,y);U(this,q);U(this,k);U(this,pt);U(this,$);U(this,Tt);U(this,Ut);U(this,G,"");U(this,L,!1);U(this,u,null);U(this,H,null);U(this,B,null);U(this,P,!1);U(this,b,null);U(this,w,this.focusin.bind(this));U(this,v,this.focusout.bind(this));U(this,C,!1);U(this,F,!1);U(this,R,!1);Je(this,"_initialOptions",Object.create(null));Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);Je(this,"_l10nPromise",null);U(this,x,!1);U(this,o,i._zIndex++);this.constructor===i&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=s.parent,this.id=s.id,this.width=this.height=null,this.pageIndex=s.parent.pageIndex,this.name=s.name,this.div=null,this._uiManager=s.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=s.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:h,pageHeight:S,pageX:I,pageY:z}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[h,S],this.pageTranslation=[I,z];const[dt,ct]=this.parentDimensions;this.x=s.x/dt,this.y=s.y/ct,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(s){const c=new Ct({id:s.parent.getNextId(),parent:s.parent,uiManager:s._uiManager});c.annotationElementId=s.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(s,c=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(S=>[S,s.get(S)]))),c!=null&&c.strings)for(const S of c.strings)i._l10nPromise.set(S,s.get(S));if(i._borderLineWidth!==-1)return;const h=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(h.getPropertyValue("--outline-width"))||0}static updateDefaultParams(s,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(s){return!1}static paste(s,c){(0,E.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,x)}set _isDraggable(s){var c;ft(this,x,s),(c=this.div)==null||c.classList.toggle("draggable",s)}center(){const[s,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(s*2),this.y+=this.width*s/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(s*2),this.y-=this.width*s/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(s){this._uiManager.addCommands(s)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,o)}setParent(s){s!==null&&(this.pageIndex=s.pageIndex,this.pageDimensions=s.pageDimensions),this.parent=s}focusin(s){this._focusEventsAllowed&&(e(this,C)?ft(this,C,!1):this.parent.setSelected(this))}focusout(s){var h;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=s.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(s.preventDefault(),(h=this.parent)!=null&&h.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(s,c,h,S){const[I,z]=this.parentDimensions;[h,S]=this.screenToPageTranslation(h,S),this.x=(s+h)/I,this.y=(c+S)/z,this.fixAndSetPosition()}translate(s,c){tt(this,d,Ii).call(this,this.parentDimensions,s,c)}translateInPage(s,c){tt(this,d,Ii).call(this,this.pageDimensions,s,c),this.div.scrollIntoView({block:"nearest"})}drag(s,c){const[h,S]=this.parentDimensions;if(this.x+=s/h,this.y+=c/S,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:bt,y:Et}=this.div.getBoundingClientRect();this.parent.findNewParent(this,bt,Et)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:I,y:z}=this;const[dt,ct]=tt(this,y,Oi).call(this);I+=dt,z+=ct,this.div.style.left=`${(100*I).toFixed(2)}%`,this.div.style.top=`${(100*z).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[s,c]=this.pageDimensions;let{x:h,y:S,width:I,height:z}=this;switch(I*=s,z*=c,h*=s,S*=c,this.rotation){case 0:h=Math.max(0,Math.min(s-I,h)),S=Math.max(0,Math.min(c-z,S));break;case 90:h=Math.max(0,Math.min(s-z,h)),S=Math.min(c,Math.max(I,S));break;case 180:h=Math.min(s,Math.max(I,h)),S=Math.min(c,Math.max(z,S));break;case 270:h=Math.min(s,Math.max(z,h)),S=Math.max(0,Math.min(c-I,S));break}this.x=h/=s,this.y=S/=c;const[dt,ct]=tt(this,y,Oi).call(this);h+=dt,S+=ct;const{style:bt}=this.div;bt.left=`${(100*h).toFixed(2)}%`,bt.top=`${(100*S).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(s,c){var h;return tt(h=i,M,Ni).call(h,s,c,this.parentRotation)}pageTranslationToScreen(s,c){var h;return tt(h=i,M,Ni).call(h,s,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:s,pageDimensions:[c,h]}=this,S=c*s,I=h*s;return E.FeatureTest.isCSSRoundSupported?[Math.round(S),Math.round(I)]:[S,I]}setDims(s,c){var I;const[h,S]=this.parentDimensions;this.div.style.width=`${(100*s/h).toFixed(2)}%`,e(this,P)||(this.div.style.height=`${(100*c/S).toFixed(2)}%`),(I=e(this,u))==null||I.classList.toggle("small",s<i.SMALL_EDITOR_SIZE||c<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:s}=this.div,{height:c,width:h}=s,S=h.endsWith("%"),I=!e(this,P)&&c.endsWith("%");if(S&&I)return;const[z,dt]=this.parentDimensions;S||(s.width=`${(100*parseFloat(h)/z).toFixed(2)}%`),!e(this,P)&&!I&&(s.height=`${(100*parseFloat(c)/dt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,u))return;const s=ft(this,u,document.createElement("button"));s.className="altText";const c=await i._l10nPromise.get("editor_alt_text_button_label");s.textContent=c,s.setAttribute("aria-label",c),s.tabIndex="0",s.addEventListener("contextmenu",t.noContextMenu),s.addEventListener("pointerdown",h=>h.stopPropagation()),s.addEventListener("click",h=>{h.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),s.addEventListener("keydown",h=>{h.target===s&&h.key==="Enter"&&(h.preventDefault(),this._uiManager.editAltText(this))}),tt(this,Tt,ji).call(this),this.div.append(s),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(s.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,G),decorative:e(this,L)}}set altTextData({altText:s,decorative:c}){e(this,G)===s&&e(this,L)===c||(ft(this,G,s),ft(this,L,c),tt(this,Tt,ji).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,w)),this.div.addEventListener("focusout",e(this,v));const[s,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/c).toFixed(2)}%`);const[h,S]=this.getInitialTranslation();return this.translate(h,S),(0,p.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(s){const{isMac:c}=E.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&c){s.preventDefault();return}ft(this,C,!0),tt(this,Ut,Or).call(this,s)}moveInDOM(){var s;(s=this.parent)==null||s.moveEditorInDOM(this)}_setParentAndPosition(s,c,h){s.changeParent(this),this.x=c,this.y=h,this.fixAndSetPosition()}getRect(s,c){const h=this.parentScale,[S,I]=this.pageDimensions,[z,dt]=this.pageTranslation,ct=s/h,bt=c/h,Et=this.x*S,Dt=this.y*I,wt=this.width*S,$t=this.height*I;switch(this.rotation){case 0:return[Et+ct+z,I-Dt-bt-$t+dt,Et+ct+wt+z,I-Dt-bt+dt];case 90:return[Et+bt+z,I-Dt+ct+dt,Et+bt+$t+z,I-Dt+ct+wt+dt];case 180:return[Et-ct-wt+z,I-Dt+bt+dt,Et-ct+z,I-Dt+bt+$t+dt];case 270:return[Et-bt-$t+z,I-Dt-ct-wt+dt,Et-bt+z,I-Dt-ct+dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(s,c){const[h,S,I,z]=s,dt=I-h,ct=z-S;switch(this.rotation){case 0:return[h,c-z,dt,ct];case 90:return[h,c-S,ct,dt];case 180:return[I,c-S,dt,ct];case 270:return[I,c-z,ct,dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ft(this,R,!0)}disableEditMode(){ft(this,R,!1)}isInEditMode(){return e(this,R)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,c;(s=this.div)==null||s.addEventListener("focusin",e(this,w)),(c=this.div)==null||c.addEventListener("focusout",e(this,v))}serialize(s=!1,c=null){(0,E.unreachable)("An editor must be serializable")}static deserialize(s,c,h){const S=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:h});S.rotation=s.rotation;const[I,z]=S.pageDimensions,[dt,ct,bt,Et]=S.getRectInCurrentCoords(s.rect,z);return S.x=dt/I,S.y=ct/z,S.width=bt/I,S.height=Et/z,S}remove(){var s;this.div.removeEventListener("focusin",e(this,w)),this.div.removeEventListener("focusout",e(this,v)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(s=e(this,u))==null||s.remove(),ft(this,u,null),ft(this,H,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(tt(this,k,Lr).call(this),e(this,b).classList.remove("hidden"))}select(){var s;this.makeResizable(),(s=this.div)==null||s.classList.add("selectedEditor")}unselect(){var s,c,h;(s=e(this,b))==null||s.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(h=this.div)!=null&&h.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(s,c){}disableEditing(){e(this,u)&&(e(this,u).hidden=!0)}enableEditing(){e(this,u)&&(e(this,u).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,F)}set isEditing(s){ft(this,F,s),this.parent&&(s?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(s,c){ft(this,P,!0);const h=s/c,{style:S}=this.div;S.aspectRatio=h,S.height="auto"}static get MIN_SIZE(){return 16}};G=new WeakMap,L=new WeakMap,u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakMap,F=new WeakMap,R=new WeakMap,x=new WeakMap,o=new WeakMap,d=new WeakSet,Ii=function([s,c],h,S){[h,S]=this.screenToPageTranslation(h,S),this.x+=h/s,this.y+=S/c,this.fixAndSetPosition()},y=new WeakSet,Oi=function(){const[s,c]=this.parentDimensions,{_borderLineWidth:h}=i,S=h/s,I=h/c;switch(this.rotation){case 90:return[-S,I];case 180:return[S,I];case 270:return[S,-I];default:return[-S,-I]}},M=new WeakSet,Ni=function(s,c,h){switch(h){case 90:return[c,-s];case 180:return[-s,-c];case 270:return[-c,s];default:return[s,c]}},q=new WeakSet,Bi=function(s){switch(s){case 90:{const[c,h]=this.pageDimensions;return[0,-c/h,h/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,h]=this.pageDimensions;return[0,c/h,-h/c,0]}default:return[1,0,0,1]}},k=new WeakSet,Lr=function(){if(e(this,b))return;ft(this,b,document.createElement("div")),e(this,b).classList.add("resizers");const s=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||s.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of s){const h=document.createElement("div");e(this,b).append(h),h.classList.add("resizer",c),h.addEventListener("pointerdown",tt(this,pt,Dr).bind(this,c)),h.addEventListener("contextmenu",t.noContextMenu)}this.div.prepend(e(this,b))},pt=new WeakSet,Dr=function(s,c){c.preventDefault();const{isMac:h}=E.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&h)return;const S=tt(this,$,Ir).bind(this,s),I=this._isDraggable;this._isDraggable=!1;const z={passive:!0,capture:!0};window.addEventListener("pointermove",S,z);const dt=this.x,ct=this.y,bt=this.width,Et=this.height,Dt=this.parent.div.style.cursor,wt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const $t=()=>{this._isDraggable=I,window.removeEventListener("pointerup",$t),window.removeEventListener("blur",$t),window.removeEventListener("pointermove",S,z),this.parent.div.style.cursor=Dt,this.div.style.cursor=wt;const ie=this.x,It=this.y,Jt=this.width,Pt=this.height;ie===dt&&It===ct&&Jt===bt&&Pt===Et||this.addCommands({cmd:()=>{this.width=Jt,this.height=Pt,this.x=ie,this.y=It;const[ht,at]=this.parentDimensions;this.setDims(ht*Jt,at*Pt),this.fixAndSetPosition()},undo:()=>{this.width=bt,this.height=Et,this.x=dt,this.y=ct;const[ht,at]=this.parentDimensions;this.setDims(ht*bt,at*Et),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",$t),window.addEventListener("blur",$t)},$=new WeakSet,Ir=function(s,c){const[h,S]=this.parentDimensions,I=this.x,z=this.y,dt=this.width,ct=this.height,bt=i.MIN_SIZE/h,Et=i.MIN_SIZE/S,Dt=Ft=>Math.round(Ft*1e4)/1e4,wt=tt(this,q,Bi).call(this,this.rotation),$t=(Ft,At)=>[wt[0]*Ft+wt[2]*At,wt[1]*Ft+wt[3]*At],ie=tt(this,q,Bi).call(this,360-this.rotation),It=(Ft,At)=>[ie[0]*Ft+ie[2]*At,ie[1]*Ft+ie[3]*At];let Jt,Pt,ht=!1,at=!1;switch(s){case"topLeft":ht=!0,Jt=(Ft,At)=>[0,0],Pt=(Ft,At)=>[Ft,At];break;case"topMiddle":Jt=(Ft,At)=>[Ft/2,0],Pt=(Ft,At)=>[Ft/2,At];break;case"topRight":ht=!0,Jt=(Ft,At)=>[Ft,0],Pt=(Ft,At)=>[0,At];break;case"middleRight":at=!0,Jt=(Ft,At)=>[Ft,At/2],Pt=(Ft,At)=>[0,At/2];break;case"bottomRight":ht=!0,Jt=(Ft,At)=>[Ft,At],Pt=(Ft,At)=>[0,0];break;case"bottomMiddle":Jt=(Ft,At)=>[Ft/2,At],Pt=(Ft,At)=>[Ft/2,0];break;case"bottomLeft":ht=!0,Jt=(Ft,At)=>[0,At],Pt=(Ft,At)=>[Ft,0];break;case"middleLeft":at=!0,Jt=(Ft,At)=>[0,At/2],Pt=(Ft,At)=>[Ft,At/2];break}const St=Jt(dt,ct),Wt=Pt(dt,ct);let jt=$t(...Wt);const le=Dt(I+jt[0]),fe=Dt(z+jt[1]);let ce=1,ge=1,[_e,re]=this.screenToPageTranslation(c.movementX,c.movementY);if([_e,re]=It(_e/h,re/S),ht){const Ft=Math.hypot(dt,ct);ce=ge=Math.max(Math.min(Math.hypot(Wt[0]-St[0]-_e,Wt[1]-St[1]-re)/Ft,1/dt,1/ct),bt/dt,Et/ct)}else at?ce=Math.max(bt,Math.min(1,Math.abs(Wt[0]-St[0]-_e)))/dt:ge=Math.max(Et,Math.min(1,Math.abs(Wt[1]-St[1]-re)))/ct;const we=Dt(dt*ce),_t=Dt(ct*ge);jt=$t(...Pt(we,_t));const nt=le-jt[0],Y=fe-jt[1];this.width=we,this.height=_t,this.x=nt,this.y=Y,this.setDims(h*we,S*_t),this.fixAndSetPosition()},Tt=new WeakSet,ji=async function(){var h;const s=e(this,u);if(!s)return;if(!e(this,G)&&!e(this,L)){s.classList.remove("done"),(h=e(this,H))==null||h.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(S=>{s.setAttribute("aria-label",S)});let c=e(this,H);if(!c){ft(this,H,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const S=c.id=`alt-text-tooltip-${this.id}`;s.setAttribute("aria-describedby",S);const I=100;s.addEventListener("mouseenter",()=>{ft(this,B,setTimeout(()=>{ft(this,B,null),e(this,H).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},I))}),s.addEventListener("mouseleave",()=>{var z;clearTimeout(e(this,B)),ft(this,B,null),(z=e(this,H))==null||z.classList.remove("show")})}s.classList.add("done"),c.innerText=e(this,L)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,G),c.parentNode||s.append(c)},Ut=new WeakSet,Or=function(s){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let h,S;c&&(h={passive:!0,capture:!0},S=z=>{const[dt,ct]=this.screenToPageTranslation(z.movementX,z.movementY);this._uiManager.dragSelectedEditors(dt,ct)},window.addEventListener("pointermove",S,h));const I=()=>{if(window.removeEventListener("pointerup",I),window.removeEventListener("blur",I),c&&window.removeEventListener("pointermove",S,h),ft(this,C,!1),!this._uiManager.endDragSession()){const{isMac:z}=E.FeatureTest.platform;s.ctrlKey&&!z||s.shiftKey||s.metaKey&&z?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",I),window.addEventListener("blur",I)},U(i,M),Je(i,"_borderLineWidth",-1),Je(i,"_colorManager",new p.ColorManager),Je(i,"_zIndex",1),Je(i,"SMALL_EDITOR_SIZE",0);let Z=i;m.AnnotationEditor=Z;class Ct extends Z{constructor(s){super(s),this.annotationElementId=s.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(f,m,mt)=>{var P,b,w,v,C,Hi,x,o,d,D,y,Nr,A,q,Q,k,et,pt,vt,$,yt,Tt,Nt,Ut,T,i,a,s,c,h,S,I,z,dt,ct,bt,Et,Dt,wt,$t,ie,It,Jt,Pt,ht,at,St,Br,jt,Ui,fe,Wi,ge,ci,re,zi,_t,Vi,Y,Sn,At,Xn,Ue,jr,Ot,Hr,zt,Gi,ne,$n,Lt,qi;Object.defineProperty(m,"__esModule",{value:!0}),m.KeyboardManager=m.CommandManager=m.ColorManager=m.AnnotationEditorUIManager=void 0,m.bindEvents=t,m.opacityToHex=Z;var p=mt(1),E=mt(6);function t(N,n,_){for(const j of _)n.addEventListener(j,N[j].bind(N))}function Z(N){return Math.round(Math.min(255,Math.max(1,255*N))).toString(16).padStart(2,"0")}class Ct{constructor(){U(this,P,0)}getId(){return`${p.AnnotationEditorPrefix}${qn(this,P)._++}`}}P=new WeakMap;const R=class R{constructor(){U(this,C);U(this,b,(0,p.getUuid)());U(this,w,0);U(this,v,null)}static get _isSVGFittingCanvas(){const n='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',j=new OffscreenCanvas(1,3).getContext("2d"),K=new Image;K.src=n;const it=K.decode().then(()=>(j.drawImage(K,0,0,1,1,0,0,1,3),new Uint32Array(j.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,p.shadow)(this,"_isSVGFittingCanvas",it)}async getFromFile(n){const{lastModified:_,name:j,size:K,type:it}=n;return tt(this,C,Hi).call(this,`${_}_${j}_${K}_${it}`,n)}async getFromUrl(n){return tt(this,C,Hi).call(this,n,n)}async getFromId(n){e(this,v)||ft(this,v,new Map);const _=e(this,v).get(n);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(n){const _=e(this,v).get(n);return _!=null&&_.isSvg?_.svgUrl:null}deleteId(n){e(this,v)||ft(this,v,new Map);const _=e(this,v).get(n);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(n){return n.startsWith(`image_${e(this,b)}_`)}};b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakSet,Hi=async function(n,_){e(this,v)||ft(this,v,new Map);let j=e(this,v).get(n);if(j===null)return null;if(j!=null&&j.bitmap)return j.refCounter+=1,j;try{j||(j={bitmap:null,id:`image_${e(this,b)}_${qn(this,w)._++}`,refCounter:0,isSvg:!1});let K;if(typeof _=="string"){j.url=_;const it=await fetch(_);if(!it.ok)throw new Error(it.statusText);K=await it.blob()}else K=j.file=_;if(K.type==="image/svg+xml"){const it=R._isSVGFittingCanvas,gt=new FileReader,Rt=new Image,qt=new Promise((Vt,ve)=>{Rt.onload=()=>{j.bitmap=Rt,j.isSvg=!0,Vt()},gt.onload=async()=>{const Yt=j.svgUrl=gt.result;Rt.src=await it?`${Yt}#svgView(preserveAspectRatio(none))`:Yt},Rt.onerror=gt.onerror=ve});gt.readAsDataURL(K),await qt}else j.bitmap=await createImageBitmap(K);j.refCounter=1}catch(K){console.error(K),j=null}return e(this,v).set(n,j),j&&e(this,v).set(j.id,j),j};let G=R;class L{constructor(n=128){U(this,x,[]);U(this,o,!1);U(this,d,void 0);U(this,D,-1);ft(this,d,n)}add({cmd:n,undo:_,mustExec:j,type:K=NaN,overwriteIfSameType:it=!1,keepUndo:gt=!1}){if(j&&n(),e(this,o))return;const Rt={cmd:n,undo:_,type:K};if(e(this,D)===-1){e(this,x).length>0&&(e(this,x).length=0),ft(this,D,0),e(this,x).push(Rt);return}if(it&&e(this,x)[e(this,D)].type===K){gt&&(Rt.undo=e(this,x)[e(this,D)].undo),e(this,x)[e(this,D)]=Rt;return}const qt=e(this,D)+1;qt===e(this,d)?e(this,x).splice(0,1):(ft(this,D,qt),qt<e(this,x).length&&e(this,x).splice(qt)),e(this,x).push(Rt)}undo(){e(this,D)!==-1&&(ft(this,o,!0),e(this,x)[e(this,D)].undo(),ft(this,o,!1),ft(this,D,e(this,D)-1))}redo(){e(this,D)<e(this,x).length-1&&(ft(this,D,e(this,D)+1),ft(this,o,!0),e(this,x)[e(this,D)].cmd(),ft(this,o,!1))}hasSomethingToUndo(){return e(this,D)!==-1}hasSomethingToRedo(){return e(this,D)<e(this,x).length-1}destroy(){ft(this,x,null)}}x=new WeakMap,o=new WeakMap,d=new WeakMap,D=new WeakMap,m.CommandManager=L;class u{constructor(n){U(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=p.FeatureTest.platform;for(const[j,K,it={}]of n)for(const gt of j){const Rt=gt.startsWith("mac+");_&&Rt?(this.callbacks.set(gt.slice(4),{callback:K,options:it}),this.allKeys.add(gt.split("+").at(-1))):!_&&!Rt&&(this.callbacks.set(gt,{callback:K,options:it}),this.allKeys.add(gt.split("+").at(-1)))}}exec(n,_){if(!this.allKeys.has(_.key))return;const j=this.callbacks.get(tt(this,y,Nr).call(this,_));if(!j)return;const{callback:K,options:{bubbles:it=!1,args:gt=[],checker:Rt=null}}=j;Rt&&!Rt(n,_)||(K.bind(n,...gt)(),it||(_.stopPropagation(),_.preventDefault()))}}y=new WeakSet,Nr=function(n){n.altKey&&this.buffer.push("alt"),n.ctrlKey&&this.buffer.push("ctrl"),n.metaKey&&this.buffer.push("meta"),n.shiftKey&&this.buffer.push("shift"),this.buffer.push(n.key);const _=this.buffer.join("+");return this.buffer.length=0,_},m.KeyboardManager=u;const M=class M{get _colors(){const n=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(n),(0,p.shadow)(this,"_colors",n)}convert(n){const _=(0,E.getRGB)(n);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[j,K]of this._colors)if(K.every((it,gt)=>it===_[gt]))return M._colorsMapping.get(j);return _}getHexCode(n){const _=this._colors.get(n);return _?p.Util.makeHexColor(..._):n}};Je(M,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let H=M;m.ColorManager=H;const Zt=class Zt{constructor(n,_,j,K,it,gt){U(this,St);U(this,jt);U(this,fe);U(this,ge);U(this,re);U(this,_t);U(this,Y);U(this,At);U(this,Ue);U(this,Ot);U(this,zt);U(this,ne);U(this,Lt);U(this,A,null);U(this,q,new Map);U(this,Q,new Map);U(this,k,null);U(this,et,null);U(this,pt,new L);U(this,vt,0);U(this,$,new Set);U(this,yt,null);U(this,Tt,null);U(this,Nt,new Set);U(this,Ut,null);U(this,T,new Ct);U(this,i,!1);U(this,a,!1);U(this,s,null);U(this,c,p.AnnotationEditorType.NONE);U(this,h,new Set);U(this,S,null);U(this,I,this.blur.bind(this));U(this,z,this.focus.bind(this));U(this,dt,this.copy.bind(this));U(this,ct,this.cut.bind(this));U(this,bt,this.paste.bind(this));U(this,Et,this.keydown.bind(this));U(this,Dt,this.onEditingAction.bind(this));U(this,wt,this.onPageChanging.bind(this));U(this,$t,this.onScaleChanging.bind(this));U(this,ie,this.onRotationChanging.bind(this));U(this,It,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});U(this,Jt,[0,0]);U(this,Pt,null);U(this,ht,null);U(this,at,null);ft(this,ht,n),ft(this,at,_),ft(this,k,j),this._eventBus=K,this._eventBus._on("editingaction",e(this,Dt)),this._eventBus._on("pagechanging",e(this,wt)),this._eventBus._on("scalechanging",e(this,$t)),this._eventBus._on("rotationchanging",e(this,ie)),ft(this,et,it.annotationStorage),ft(this,Ut,it.filterFactory),ft(this,S,gt),this.viewParameters={realScale:E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const n=Zt.prototype,_=it=>{const{activeElement:gt}=document;return gt&&e(it,ht).contains(gt)&&it.hasSomethingToControl()},j=this.TRANSLATE_SMALL,K=this.TRANSLATE_BIG;return(0,p.shadow)(this,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],n.selectAll],[["ctrl+z","mac+meta+z"],n.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],n.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],n.delete],[["Escape","mac+Escape"],n.unselectAll],[["ArrowLeft","mac+ArrowLeft"],n.translateSelectedEditors,{args:[-j,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n.translateSelectedEditors,{args:[-K,0],checker:_}],[["ArrowRight","mac+ArrowRight"],n.translateSelectedEditors,{args:[j,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n.translateSelectedEditors,{args:[K,0],checker:_}],[["ArrowUp","mac+ArrowUp"],n.translateSelectedEditors,{args:[0,-j],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n.translateSelectedEditors,{args:[0,-K],checker:_}],[["ArrowDown","mac+ArrowDown"],n.translateSelectedEditors,{args:[0,j],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n.translateSelectedEditors,{args:[0,K],checker:_}]]))}destroy(){tt(this,ge,ci).call(this),tt(this,jt,Ui).call(this),this._eventBus._off("editingaction",e(this,Dt)),this._eventBus._off("pagechanging",e(this,wt)),this._eventBus._off("scalechanging",e(this,$t)),this._eventBus._off("rotationchanging",e(this,ie));for(const n of e(this,Q).values())n.destroy();e(this,Q).clear(),e(this,q).clear(),e(this,Nt).clear(),ft(this,A,null),e(this,h).clear(),e(this,pt).destroy(),e(this,k).destroy()}get hcmFilter(){return(0,p.shadow)(this,"hcmFilter",e(this,S)?e(this,Ut).addHCMFilter(e(this,S).foreground,e(this,S).background):"none")}get direction(){return(0,p.shadow)(this,"direction",getComputedStyle(e(this,ht)).direction)}editAltText(n){var _;(_=e(this,k))==null||_.editAltText(this,n)}onPageChanging({pageNumber:n}){ft(this,vt,n-1)}focusMainContainer(){e(this,ht).focus()}findParent(n,_){for(const j of e(this,Q).values()){const{x:K,y:it,width:gt,height:Rt}=j.div.getBoundingClientRect();if(n>=K&&n<=K+gt&&_>=it&&_<=it+Rt)return j}return null}disableUserSelect(n=!1){e(this,at).classList.toggle("noUserSelect",n)}addShouldRescale(n){e(this,Nt).add(n)}removeShouldRescale(n){e(this,Nt).delete(n)}onScaleChanging({scale:n}){this.commitOrRemove(),this.viewParameters.realScale=n*E.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of e(this,Nt))_.onScaleChanging()}onRotationChanging({pagesRotation:n}){this.commitOrRemove(),this.viewParameters.rotation=n}addToAnnotationStorage(n){!n.isEmpty()&&e(this,et)&&!e(this,et).has(n.id)&&e(this,et).setValue(n.id,n)}blur(){if(!this.hasSelection)return;const{activeElement:n}=document;for(const _ of e(this,h))if(_.div.contains(n)){ft(this,s,[_,n]),_._focusEventsAllowed=!1;break}}focus(){if(!e(this,s))return;const[n,_]=e(this,s);ft(this,s,null),_.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0}),_.focus()}addEditListeners(){tt(this,fe,Wi).call(this),tt(this,re,zi).call(this)}removeEditListeners(){tt(this,ge,ci).call(this),tt(this,_t,Vi).call(this)}copy(n){var j;if(n.preventDefault(),(j=e(this,A))==null||j.commitOrRemove(),!this.hasSelection)return;const _=[];for(const K of e(this,h)){const it=K.serialize(!0);it&&_.push(it)}_.length!==0&&n.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(n){this.copy(n),this.delete()}paste(n){n.preventDefault();const{clipboardData:_}=n;for(const it of _.items)for(const gt of e(this,Tt))if(gt.isHandlingMimeForPasting(it.type)){gt.paste(it,this.currentLayer);return}let j=_.getData("application/pdfjs");if(!j)return;try{j=JSON.parse(j)}catch(it){(0,p.warn)(`paste: "${it.message}".`);return}if(!Array.isArray(j))return;this.unselectAll();const K=this.currentLayer;try{const it=[];for(const qt of j){const Vt=K.deserialize(qt);if(!Vt)return;it.push(Vt)}const gt=()=>{for(const qt of it)tt(this,zt,Gi).call(this,qt);tt(this,Lt,qi).call(this,it)},Rt=()=>{for(const qt of it)qt.remove()};this.addCommands({cmd:gt,undo:Rt,mustExec:!0})}catch(it){(0,p.warn)(`paste: "${it.message}".`)}}keydown(n){var _;(_=this.getActive())!=null&&_.shouldGetKeyboardEvents()||Zt._keyboardManager.exec(this,n)}onEditingAction(n){["undo","redo","delete","selectAll"].includes(n.name)&&this[n.name]()}setEditingState(n){n?(tt(this,St,Br).call(this),tt(this,fe,Wi).call(this),tt(this,re,zi).call(this),tt(this,Y,Sn).call(this,{isEditing:e(this,c)!==p.AnnotationEditorType.NONE,isEmpty:tt(this,ne,$n).call(this),hasSomethingToUndo:e(this,pt).hasSomethingToUndo(),hasSomethingToRedo:e(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(tt(this,jt,Ui).call(this),tt(this,ge,ci).call(this),tt(this,_t,Vi).call(this),tt(this,Y,Sn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(n){if(!e(this,Tt)){ft(this,Tt,n);for(const _ of e(this,Tt))tt(this,At,Xn).call(this,_.defaultPropertiesToUpdate)}}getId(){return e(this,T).getId()}get currentLayer(){return e(this,Q).get(e(this,vt))}getLayer(n){return e(this,Q).get(n)}get currentPageIndex(){return e(this,vt)}addLayer(n){e(this,Q).set(n.pageIndex,n),e(this,i)?n.enable():n.disable()}removeLayer(n){e(this,Q).delete(n.pageIndex)}updateMode(n,_=null){if(e(this,c)!==n){if(ft(this,c,n),n===p.AnnotationEditorType.NONE){this.setEditingState(!1),tt(this,Ot,Hr).call(this);return}this.setEditingState(!0),tt(this,Ue,jr).call(this),this.unselectAll();for(const j of e(this,Q).values())j.updateMode(n);if(_){for(const j of e(this,q).values())if(j.annotationElementId===_){this.setSelected(j),j.enterInEditMode();break}}}}updateToolbar(n){n!==e(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:n})}updateParams(n,_){if(e(this,Tt)){if(n===p.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(n);return}for(const j of e(this,h))j.updateParams(n,_);for(const j of e(this,Tt))j.updateDefaultParams(n,_)}}enableWaiting(n=!1){if(e(this,a)!==n){ft(this,a,n);for(const _ of e(this,Q).values())n?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",n)}}getEditors(n){const _=[];for(const j of e(this,q).values())j.pageIndex===n&&_.push(j);return _}getEditor(n){return e(this,q).get(n)}addEditor(n){e(this,q).set(n.id,n)}removeEditor(n){var _;e(this,q).delete(n.id),this.unselect(n),(!n.annotationElementId||!e(this,$).has(n.annotationElementId))&&((_=e(this,et))==null||_.remove(n.id))}addDeletedAnnotationElement(n){e(this,$).add(n.annotationElementId),n.deleted=!0}isDeletedAnnotationElement(n){return e(this,$).has(n)}removeDeletedAnnotationElement(n){e(this,$).delete(n.annotationElementId),n.deleted=!1}setActiveEditor(n){e(this,A)!==n&&(ft(this,A,n),n&&tt(this,At,Xn).call(this,n.propertiesToUpdate))}toggleSelected(n){if(e(this,h).has(n)){e(this,h).delete(n),n.unselect(),tt(this,Y,Sn).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,h).add(n),n.select(),tt(this,At,Xn).call(this,n.propertiesToUpdate),tt(this,Y,Sn).call(this,{hasSelectedEditor:!0})}setSelected(n){for(const _ of e(this,h))_!==n&&_.unselect();e(this,h).clear(),e(this,h).add(n),n.select(),tt(this,At,Xn).call(this,n.propertiesToUpdate),tt(this,Y,Sn).call(this,{hasSelectedEditor:!0})}isSelected(n){return e(this,h).has(n)}unselect(n){n.unselect(),e(this,h).delete(n),tt(this,Y,Sn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,h).size!==0}undo(){e(this,pt).undo(),tt(this,Y,Sn).call(this,{hasSomethingToUndo:e(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:tt(this,ne,$n).call(this)})}redo(){e(this,pt).redo(),tt(this,Y,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,pt).hasSomethingToRedo(),isEmpty:tt(this,ne,$n).call(this)})}addCommands(n){e(this,pt).add(n),tt(this,Y,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:tt(this,ne,$n).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const n=[...e(this,h)],_=()=>{for(const K of n)K.remove()},j=()=>{for(const K of n)tt(this,zt,Gi).call(this,K)};this.addCommands({cmd:_,undo:j,mustExec:!0})}commitOrRemove(){var n;(n=e(this,A))==null||n.commitOrRemove()}hasSomethingToControl(){return e(this,A)||this.hasSelection}selectAll(){for(const n of e(this,h))n.commit();tt(this,Lt,qi).call(this,e(this,q).values())}unselectAll(){if(e(this,A)){e(this,A).commitOrRemove();return}if(this.hasSelection){for(const n of e(this,h))n.unselect();e(this,h).clear(),tt(this,Y,Sn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(n,_,j=!1){if(j||this.commitOrRemove(),!this.hasSelection)return;e(this,Jt)[0]+=n,e(this,Jt)[1]+=_;const[K,it]=e(this,Jt),gt=[...e(this,h)],Rt=1e3;e(this,Pt)&&clearTimeout(e(this,Pt)),ft(this,Pt,setTimeout(()=>{ft(this,Pt,null),e(this,Jt)[0]=e(this,Jt)[1]=0,this.addCommands({cmd:()=>{for(const qt of gt)e(this,q).has(qt.id)&&qt.translateInPage(K,it)},undo:()=>{for(const qt of gt)e(this,q).has(qt.id)&&qt.translateInPage(-K,-it)},mustExec:!1})},Rt));for(const qt of gt)qt.translateInPage(n,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ft(this,yt,new Map);for(const n of e(this,h))e(this,yt).set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,yt))return!1;this.disableUserSelect(!1);const n=e(this,yt);ft(this,yt,null);let _=!1;for(const[{x:K,y:it,pageIndex:gt},Rt]of n)Rt.newX=K,Rt.newY=it,Rt.newPageIndex=gt,_||(_=K!==Rt.savedX||it!==Rt.savedY||gt!==Rt.savedPageIndex);if(!_)return!1;const j=(K,it,gt,Rt)=>{if(e(this,q).has(K.id)){const qt=e(this,Q).get(Rt);qt?K._setParentAndPosition(qt,it,gt):(K.pageIndex=Rt,K.x=it,K.y=gt)}};return this.addCommands({cmd:()=>{for(const[K,{newX:it,newY:gt,newPageIndex:Rt}]of n)j(K,it,gt,Rt)},undo:()=>{for(const[K,{savedX:it,savedY:gt,savedPageIndex:Rt}]of n)j(K,it,gt,Rt)},mustExec:!0}),!0}dragSelectedEditors(n,_){if(e(this,yt))for(const j of e(this,yt).keys())j.drag(n,_)}rebuild(n){if(n.parent===null){const _=this.getLayer(n.pageIndex);_?(_.changeParent(n),_.addOrRebuild(n)):(this.addEditor(n),this.addToAnnotationStorage(n),n.rebuild())}else n.parent.addOrRebuild(n)}isActive(n){return e(this,A)===n}getActive(){return e(this,A)}getMode(){return e(this,c)}get imageManager(){return(0,p.shadow)(this,"imageManager",new G)}};A=new WeakMap,q=new WeakMap,Q=new WeakMap,k=new WeakMap,et=new WeakMap,pt=new WeakMap,vt=new WeakMap,$=new WeakMap,yt=new WeakMap,Tt=new WeakMap,Nt=new WeakMap,Ut=new WeakMap,T=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,h=new WeakMap,S=new WeakMap,I=new WeakMap,z=new WeakMap,dt=new WeakMap,ct=new WeakMap,bt=new WeakMap,Et=new WeakMap,Dt=new WeakMap,wt=new WeakMap,$t=new WeakMap,ie=new WeakMap,It=new WeakMap,Jt=new WeakMap,Pt=new WeakMap,ht=new WeakMap,at=new WeakMap,St=new WeakSet,Br=function(){window.addEventListener("focus",e(this,z)),window.addEventListener("blur",e(this,I))},jt=new WeakSet,Ui=function(){window.removeEventListener("focus",e(this,z)),window.removeEventListener("blur",e(this,I))},fe=new WeakSet,Wi=function(){window.addEventListener("keydown",e(this,Et),{capture:!0})},ge=new WeakSet,ci=function(){window.removeEventListener("keydown",e(this,Et),{capture:!0})},re=new WeakSet,zi=function(){document.addEventListener("copy",e(this,dt)),document.addEventListener("cut",e(this,ct)),document.addEventListener("paste",e(this,bt))},_t=new WeakSet,Vi=function(){document.removeEventListener("copy",e(this,dt)),document.removeEventListener("cut",e(this,ct)),document.removeEventListener("paste",e(this,bt))},Y=new WeakSet,Sn=function(n){Object.entries(n).some(([j,K])=>e(this,It)[j]!==K)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,It),n)})},At=new WeakSet,Xn=function(n){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:n})},Ue=new WeakSet,jr=function(){if(!e(this,i)){ft(this,i,!0);for(const n of e(this,Q).values())n.enable()}},Ot=new WeakSet,Hr=function(){if(this.unselectAll(),e(this,i)){ft(this,i,!1);for(const n of e(this,Q).values())n.disable()}},zt=new WeakSet,Gi=function(n){const _=e(this,Q).get(n.pageIndex);_?_.addOrRebuild(n):this.addEditor(n)},ne=new WeakSet,$n=function(){if(e(this,q).size===0)return!0;if(e(this,q).size===1)for(const n of e(this,q).values())return n.isEmpty();return!1},Lt=new WeakSet,qi=function(n){e(this,h).clear();for(const _ of n)_.isEmpty()||(e(this,h).add(_),_.select());tt(this,Y,Sn).call(this,{hasSelectedEditor:!0})},Je(Zt,"TRANSLATE_SMALL",1),Je(Zt,"TRANSLATE_BIG",10);let B=Zt;m.AnnotationEditorUIManager=B},(f,m,mt)=>{var vt,$,yt,Tt,Nt,Ut,T,i,a,s,c,h,Hn,I,Un,dt,Xi,bt,hi,Dt,ui,$t,Yn,It,Kn;Object.defineProperty(m,"__esModule",{value:!0}),m.StatTimer=m.RenderingCancelledException=m.PixelsPerInch=m.PageViewport=m.PDFDateString=m.DOMStandardFontDataFactory=m.DOMSVGFactory=m.DOMFilterFactory=m.DOMCanvasFactory=m.DOMCMapReaderFactory=void 0,m.deprecated=D,m.getColorValues=q,m.getCurrentTransform=Q,m.getCurrentTransformInverse=k,m.getFilenameFromUrl=C,m.getPdfFilenameFromUrl=F,m.getRGB=A,m.getXfaPageViewport=M,m.isDataScheme=w,m.isPdfFile=v,m.isValidFetchUrl=x,m.loadScript=d,m.noContextMenu=o,m.setLayerDimensions=et;var p=mt(7),E=mt(1);const t="http://www.w3.org/2000/svg",pt=class pt{};Je(pt,"CSS",96),Je(pt,"PDF",72),Je(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let Z=pt;m.PixelsPerInch=Z;class Ct extends p.BaseFilterFactory{constructor({docId:at,ownerDocument:St=globalThis.document}={}){super();U(this,h);U(this,I);U(this,dt);U(this,bt);U(this,Dt);U(this,$t);U(this,It);U(this,vt,void 0);U(this,$,void 0);U(this,yt,void 0);U(this,Tt,void 0);U(this,Nt,void 0);U(this,Ut,void 0);U(this,T,void 0);U(this,i,void 0);U(this,a,void 0);U(this,s,void 0);U(this,c,0);ft(this,yt,at),ft(this,Tt,St)}addFilter(at){if(!at)return"none";let St=e(this,h,Hn).get(at);if(St)return St;let Wt,jt,le,fe;if(at.length===1){const re=at[0],we=new Array(256);for(let _t=0;_t<256;_t++)we[_t]=re[_t]/255;fe=Wt=jt=le=we.join(",")}else{const[re,we,_t]=at,nt=new Array(256),Y=new Array(256),Ft=new Array(256);for(let At=0;At<256;At++)nt[At]=re[At]/255,Y[At]=we[At]/255,Ft[At]=_t[At]/255;Wt=nt.join(","),jt=Y.join(","),le=Ft.join(","),fe=`${Wt}${jt}${le}`}if(St=e(this,h,Hn).get(fe),St)return e(this,h,Hn).set(at,St),St;const ce=`g_${e(this,yt)}_transfer_map_${qn(this,c)._++}`,ge=`url(#${ce})`;e(this,h,Hn).set(at,ge),e(this,h,Hn).set(fe,ge);const _e=tt(this,bt,hi).call(this,ce);return tt(this,$t,Yn).call(this,Wt,jt,le,_e),ge}addHCMFilter(at,St){var we;const Wt=`${at}-${St}`;if(e(this,Ut)===Wt)return e(this,T);if(ft(this,Ut,Wt),ft(this,T,"none"),(we=e(this,Nt))==null||we.remove(),!at||!St)return e(this,T);const jt=tt(this,It,Kn).call(this,at);at=E.Util.makeHexColor(...jt);const le=tt(this,It,Kn).call(this,St);if(St=E.Util.makeHexColor(...le),e(this,I,Un).style.color="",at==="#000000"&&St==="#ffffff"||at===St)return e(this,T);const fe=new Array(256);for(let _t=0;_t<=255;_t++){const nt=_t/255;fe[_t]=nt<=.03928?nt/12.92:((nt+.055)/1.055)**2.4}const ce=fe.join(","),ge=`g_${e(this,yt)}_hcm_filter`,_e=ft(this,i,tt(this,bt,hi).call(this,ge));tt(this,$t,Yn).call(this,ce,ce,ce,_e),tt(this,dt,Xi).call(this,_e);const re=(_t,nt)=>{const Y=jt[_t]/255,Ft=le[_t]/255,At=new Array(nt+1);for(let Re=0;Re<=nt;Re++)At[Re]=Y+Re/nt*(Ft-Y);return At.join(",")};return tt(this,$t,Yn).call(this,re(0,5),re(1,5),re(2,5),_e),ft(this,T,`url(#${ge})`),e(this,T)}addHighlightHCMFilter(at,St,Wt,jt){var Ft;const le=`${at}-${St}-${Wt}-${jt}`;if(e(this,a)===le)return e(this,s);if(ft(this,a,le),ft(this,s,"none"),(Ft=e(this,i))==null||Ft.remove(),!at||!St)return e(this,s);const[fe,ce]=[at,St].map(tt(this,It,Kn).bind(this));let ge=Math.round(.2126*fe[0]+.7152*fe[1]+.0722*fe[2]),_e=Math.round(.2126*ce[0]+.7152*ce[1]+.0722*ce[2]),[re,we]=[Wt,jt].map(tt(this,It,Kn).bind(this));_e<ge&&([ge,_e,re,we]=[_e,ge,we,re]),e(this,I,Un).style.color="";const _t=(At,Re,Ue)=>{const st=new Array(256),Ot=(_e-ge)/Ue,Qt=At/255,zt=(Re-At)/(255*Ue);let te=0;for(let ne=0;ne<=Ue;ne++){const Ie=Math.round(ge+ne*Ot),Lt=Qt+ne*zt;for(let Te=te;Te<=Ie;Te++)st[Te]=Lt;te=Ie+1}for(let ne=te;ne<256;ne++)st[ne]=st[te-1];return st.join(",")},nt=`g_${e(this,yt)}_hcm_highlight_filter`,Y=ft(this,i,tt(this,bt,hi).call(this,nt));return tt(this,dt,Xi).call(this,Y),tt(this,$t,Yn).call(this,_t(re[0],we[0],5),_t(re[1],we[1],5),_t(re[2],we[2],5),Y),ft(this,s,`url(#${nt})`),e(this,s)}destroy(at=!1){at&&(e(this,T)||e(this,s))||(e(this,$)&&(e(this,$).parentNode.parentNode.remove(),ft(this,$,null)),e(this,vt)&&(e(this,vt).clear(),ft(this,vt,null)),ft(this,c,0))}}vt=new WeakMap,$=new WeakMap,yt=new WeakMap,Tt=new WeakMap,Nt=new WeakMap,Ut=new WeakMap,T=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,h=new WeakSet,Hn=function(){return e(this,vt)||ft(this,vt,new Map)},I=new WeakSet,Un=function(){if(!e(this,$)){const at=e(this,Tt).createElement("div"),{style:St}=at;St.visibility="hidden",St.contain="strict",St.width=St.height=0,St.position="absolute",St.top=St.left=0,St.zIndex=-1;const Wt=e(this,Tt).createElementNS(t,"svg");Wt.setAttribute("width",0),Wt.setAttribute("height",0),ft(this,$,e(this,Tt).createElementNS(t,"defs")),at.append(Wt),Wt.append(e(this,$)),e(this,Tt).body.append(at)}return e(this,$)},dt=new WeakSet,Xi=function(at){const St=e(this,Tt).createElementNS(t,"feColorMatrix");St.setAttribute("type","matrix"),St.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),at.append(St)},bt=new WeakSet,hi=function(at){const St=e(this,Tt).createElementNS(t,"filter");return St.setAttribute("color-interpolation-filters","sRGB"),St.setAttribute("id",at),e(this,I,Un).append(St),St},Dt=new WeakSet,ui=function(at,St,Wt){const jt=e(this,Tt).createElementNS(t,St);jt.setAttribute("type","discrete"),jt.setAttribute("tableValues",Wt),at.append(jt)},$t=new WeakSet,Yn=function(at,St,Wt,jt){const le=e(this,Tt).createElementNS(t,"feComponentTransfer");jt.append(le),tt(this,Dt,ui).call(this,le,"feFuncR",at),tt(this,Dt,ui).call(this,le,"feFuncG",St),tt(this,Dt,ui).call(this,le,"feFuncB",Wt)},It=new WeakSet,Kn=function(at){return e(this,I,Un).style.color=at,A(getComputedStyle(e(this,I,Un)).getPropertyValue("color"))},m.DOMFilterFactory=Ct;class G extends p.BaseCanvasFactory{constructor({ownerDocument:ht=globalThis.document}={}){super(),this._document=ht}_createCanvas(ht,at){const St=this._document.createElement("canvas");return St.width=ht,St.height=at,St}}m.DOMCanvasFactory=G;async function L(Pt,ht=!1){if(x(Pt,document.baseURI)){const at=await fetch(Pt);if(!at.ok)throw new Error(at.statusText);return ht?new Uint8Array(await at.arrayBuffer()):(0,E.stringToBytes)(await at.text())}return new Promise((at,St)=>{const Wt=new XMLHttpRequest;Wt.open("GET",Pt,!0),ht&&(Wt.responseType="arraybuffer"),Wt.onreadystatechange=()=>{if(Wt.readyState===XMLHttpRequest.DONE){if(Wt.status===200||Wt.status===0){let jt;if(ht&&Wt.response?jt=new Uint8Array(Wt.response):!ht&&Wt.responseText&&(jt=(0,E.stringToBytes)(Wt.responseText)),jt){at(jt);return}}St(new Error(Wt.statusText))}},Wt.send(null)})}class u extends p.BaseCMapReaderFactory{_fetchData(ht,at){return L(ht,this.isCompressed).then(St=>({cMapData:St,compressionType:at}))}}m.DOMCMapReaderFactory=u;class H extends p.BaseStandardFontDataFactory{_fetchData(ht){return L(ht,!0)}}m.DOMStandardFontDataFactory=H;class B extends p.BaseSVGFactory{_createSVG(ht){return document.createElementNS(t,ht)}}m.DOMSVGFactory=B;class P{constructor({viewBox:ht,scale:at,rotation:St,offsetX:Wt=0,offsetY:jt=0,dontFlip:le=!1}){this.viewBox=ht,this.scale=at,this.rotation=St,this.offsetX=Wt,this.offsetY=jt;const fe=(ht[2]+ht[0])/2,ce=(ht[3]+ht[1])/2;let ge,_e,re,we;switch(St%=360,St<0&&(St+=360),St){case 180:ge=-1,_e=0,re=0,we=1;break;case 90:ge=0,_e=1,re=1,we=0;break;case 270:ge=0,_e=-1,re=-1,we=0;break;case 0:ge=1,_e=0,re=0,we=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}le&&(re=-re,we=-we);let _t,nt,Y,Ft;ge===0?(_t=Math.abs(ce-ht[1])*at+Wt,nt=Math.abs(fe-ht[0])*at+jt,Y=(ht[3]-ht[1])*at,Ft=(ht[2]-ht[0])*at):(_t=Math.abs(fe-ht[0])*at+Wt,nt=Math.abs(ce-ht[1])*at+jt,Y=(ht[2]-ht[0])*at,Ft=(ht[3]-ht[1])*at),this.transform=[ge*at,_e*at,re*at,we*at,_t-ge*at*fe-re*at*ce,nt-_e*at*fe-we*at*ce],this.width=Y,this.height=Ft}get rawDims(){const{viewBox:ht}=this;return(0,E.shadow)(this,"rawDims",{pageWidth:ht[2]-ht[0],pageHeight:ht[3]-ht[1],pageX:ht[0],pageY:ht[1]})}clone({scale:ht=this.scale,rotation:at=this.rotation,offsetX:St=this.offsetX,offsetY:Wt=this.offsetY,dontFlip:jt=!1}={}){return new P({viewBox:this.viewBox.slice(),scale:ht,rotation:at,offsetX:St,offsetY:Wt,dontFlip:jt})}convertToViewportPoint(ht,at){return E.Util.applyTransform([ht,at],this.transform)}convertToViewportRectangle(ht){const at=E.Util.applyTransform([ht[0],ht[1]],this.transform),St=E.Util.applyTransform([ht[2],ht[3]],this.transform);return[at[0],at[1],St[0],St[1]]}convertToPdfPoint(ht,at){return E.Util.applyInverseTransform([ht,at],this.transform)}}m.PageViewport=P;class b extends E.BaseException{constructor(ht,at=0){super(ht,"RenderingCancelledException"),this.extraDelay=at}}m.RenderingCancelledException=b;function w(Pt){const ht=Pt.length;let at=0;for(;at<ht&&Pt[at].trim()==="";)at++;return Pt.substring(at,at+5).toLowerCase()==="data:"}function v(Pt){return typeof Pt=="string"&&/\.pdf$/i.test(Pt)}function C(Pt,ht=!1){return ht||([Pt]=Pt.split(/[#?]/,1)),Pt.substring(Pt.lastIndexOf("/")+1)}function F(Pt,ht="document.pdf"){if(typeof Pt!="string")return ht;if(w(Pt))return(0,E.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ht;const at=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Wt=at.exec(Pt);let jt=St.exec(Wt[1])||St.exec(Wt[2])||St.exec(Wt[3]);if(jt&&(jt=jt[0],jt.includes("%")))try{jt=St.exec(decodeURIComponent(jt))[0]}catch{}return jt||ht}class R{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(ht){ht in this.started&&(0,E.warn)(`Timer is already running for ${ht}`),this.started[ht]=Date.now()}timeEnd(ht){ht in this.started||(0,E.warn)(`Timer has not been started for ${ht}`),this.times.push({name:ht,start:this.started[ht],end:Date.now()}),delete this.started[ht]}toString(){const ht=[];let at=0;for(const{name:St}of this.times)at=Math.max(St.length,at);for(const{name:St,start:Wt,end:jt}of this.times)ht.push(`${St.padEnd(at)} ${jt-Wt}ms
`);return ht.join("")}}m.StatTimer=R;function x(Pt,ht){try{const{protocol:at}=ht?new URL(Pt,ht):new URL(Pt);return at==="http:"||at==="https:"}catch{return!1}}function o(Pt){Pt.preventDefault()}function d(Pt,ht=!1){return new Promise((at,St)=>{const Wt=document.createElement("script");Wt.src=Pt,Wt.onload=function(jt){ht&&Wt.remove(),at(jt)},Wt.onerror=function(){St(new Error(`Cannot load script at: ${Wt.src}`))},(document.head||document.documentElement).append(Wt)})}function D(Pt){console.log("Deprecated API usage: "+Pt)}let y;class l{static toDateObject(ht){if(!ht||typeof ht!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const at=y.exec(ht);if(!at)return null;const St=parseInt(at[1],10);let Wt=parseInt(at[2],10);Wt=Wt>=1&&Wt<=12?Wt-1:0;let jt=parseInt(at[3],10);jt=jt>=1&&jt<=31?jt:1;let le=parseInt(at[4],10);le=le>=0&&le<=23?le:0;let fe=parseInt(at[5],10);fe=fe>=0&&fe<=59?fe:0;let ce=parseInt(at[6],10);ce=ce>=0&&ce<=59?ce:0;const ge=at[7]||"Z";let _e=parseInt(at[8],10);_e=_e>=0&&_e<=23?_e:0;let re=parseInt(at[9],10)||0;return re=re>=0&&re<=59?re:0,ge==="-"?(le+=_e,fe+=re):ge==="+"&&(le-=_e,fe-=re),new Date(Date.UTC(St,Wt,jt,le,fe,ce))}}m.PDFDateString=l;function M(Pt,{scale:ht=1,rotation:at=0}){const{width:St,height:Wt}=Pt.attributes.style,jt=[0,0,parseInt(St),parseInt(Wt)];return new P({viewBox:jt,scale:ht,rotation:at})}function A(Pt){if(Pt.startsWith("#")){const ht=parseInt(Pt.slice(1),16);return[(ht&16711680)>>16,(ht&65280)>>8,ht&255]}return Pt.startsWith("rgb(")?Pt.slice(4,-1).split(",").map(ht=>parseInt(ht)):Pt.startsWith("rgba(")?Pt.slice(5,-1).split(",").map(ht=>parseInt(ht)).slice(0,3):((0,E.warn)(`Not a valid color format: "${Pt}"`),[0,0,0])}function q(Pt){const ht=document.createElement("span");ht.style.visibility="hidden",document.body.append(ht);for(const at of Pt.keys()){ht.style.color=at;const St=window.getComputedStyle(ht).color;Pt.set(at,A(St))}ht.remove()}function Q(Pt){const{a:ht,b:at,c:St,d:Wt,e:jt,f:le}=Pt.getTransform();return[ht,at,St,Wt,jt,le]}function k(Pt){const{a:ht,b:at,c:St,d:Wt,e:jt,f:le}=Pt.getTransform().invertSelf();return[ht,at,St,Wt,jt,le]}function et(Pt,ht,at=!1,St=!0){if(ht instanceof P){const{pageWidth:Wt,pageHeight:jt}=ht.rawDims,{style:le}=Pt,fe=E.FeatureTest.isCSSRoundSupported,ce=`var(--scale-factor) * ${Wt}px`,ge=`var(--scale-factor) * ${jt}px`,_e=fe?`round(${ce}, 1px)`:`calc(${ce})`,re=fe?`round(${ge}, 1px)`:`calc(${ge})`;!at||ht.rotation%180===0?(le.width=_e,le.height=re):(le.width=re,le.height=_e)}St&&Pt.setAttribute("data-main-rotation",ht.rotation)}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.BaseStandardFontDataFactory=m.BaseSVGFactory=m.BaseFilterFactory=m.BaseCanvasFactory=m.BaseCMapReaderFactory=void 0;var p=mt(1);class E{constructor(){this.constructor===E&&(0,p.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(u){return"none"}addHCMFilter(u,H){return"none"}addHighlightHCMFilter(u,H,B,P){return"none"}destroy(u=!1){}}m.BaseFilterFactory=E;class t{constructor(){this.constructor===t&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,H){if(u<=0||H<=0)throw new Error("Invalid canvas size");const B=this._createCanvas(u,H);return{canvas:B,context:B.getContext("2d")}}reset(u,H,B){if(!u.canvas)throw new Error("Canvas is not specified");if(H<=0||B<=0)throw new Error("Invalid canvas size");u.canvas.width=H,u.canvas.height=B}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,H){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}m.BaseCanvasFactory=t;class Z{constructor({baseUrl:u=null,isCompressed:H=!0}){this.constructor===Z&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=H}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const H=this.baseUrl+u+(this.isCompressed?".bcmap":""),B=this.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE;return this._fetchData(H,B).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${H}`)})}_fetchData(u,H){(0,p.unreachable)("Abstract method `_fetchData` called.")}}m.BaseCMapReaderFactory=Z;class Ct{constructor({baseUrl:u=null}){this.constructor===Ct&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const H=`${this.baseUrl}${u}`;return this._fetchData(H).catch(B=>{throw new Error(`Unable to load font data at: ${H}`)})}_fetchData(u){(0,p.unreachable)("Abstract method `_fetchData` called.")}}m.BaseStandardFontDataFactory=Ct;class G{constructor(){this.constructor===G&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,H,B=!1){if(u<=0||H<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),B||(P.setAttribute("width",`${u}px`),P.setAttribute("height",`${H}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${u} ${H}`),P}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,p.unreachable)("Abstract method `_createSVG` called.")}}m.BaseSVGFactory=G},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MurmurHash3_64=void 0;var p=mt(1);const E=3285377520,t=4294901760,Z=65535;class Ct{constructor(L){this.h1=L?L&4294967295:E,this.h2=L?L&4294967295:E}update(L){let u,H;if(typeof L=="string"){u=new Uint8Array(L.length*2),H=0;for(let D=0,y=L.length;D<y;D++){const l=L.charCodeAt(D);l<=255?u[H++]=l:(u[H++]=l>>>8,u[H++]=l&255)}}else if((0,p.isArrayBuffer)(L))u=L.slice(),H=u.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const B=H>>2,P=H-B*4,b=new Uint32Array(u.buffer,0,B);let w=0,v=0,C=this.h1,F=this.h2;const R=3432918353,x=461845907,o=R&Z,d=x&Z;for(let D=0;D<B;D++)D&1?(w=b[D],w=w*R&t|w*o&Z,w=w<<15|w>>>17,w=w*x&t|w*d&Z,C^=w,C=C<<13|C>>>19,C=C*5+3864292196):(v=b[D],v=v*R&t|v*o&Z,v=v<<15|v>>>17,v=v*x&t|v*d&Z,F^=v,F=F<<13|F>>>19,F=F*5+3864292196);switch(w=0,P){case 3:w^=u[B*4+2]<<16;case 2:w^=u[B*4+1]<<8;case 1:w^=u[B*4],w=w*R&t|w*o&Z,w=w<<15|w>>>17,w=w*x&t|w*d&Z,B&1?C^=w:F^=w}this.h1=C,this.h2=F}hexdigest(){let L=this.h1,u=this.h2;return L^=u>>>1,L=L*3981806797&t|L*36045&Z,u=u*4283543511&t|((u<<16|L>>>16)*2950163797&t)>>>16,L^=u>>>1,L=L*444984403&t|L*60499&Z,u=u*3301882366&t|((u<<16|L>>>16)*3120437893&t)>>>16,L^=u>>>1,(L>>>0).toString(16).padStart(8,"0")+(u>>>0).toString(16).padStart(8,"0")}}m.MurmurHash3_64=Ct},(f,m,mt)=>{var Z;Object.defineProperty(m,"__esModule",{value:!0}),m.FontLoader=m.FontFaceObject=void 0;var p=mt(1);class E{constructor({ownerDocument:G=globalThis.document,styleElement:L=null}){U(this,Z,new Set);this._document=G,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(G){this.nativeFontFaces.add(G),this._document.fonts.add(G)}removeNativeFontFace(G){this.nativeFontFaces.delete(G),this._document.fonts.delete(G)}insertRule(G){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const L=this.styleElement.sheet;L.insertRule(G,L.cssRules.length)}clear(){for(const G of this.nativeFontFaces)this._document.fonts.delete(G);this.nativeFontFaces.clear(),e(this,Z).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(G){if(!(!G||e(this,Z).has(G.loadedName))){if((0,p.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:L,src:u,style:H}=G,B=new FontFace(L,u,H);this.addNativeFontFace(B);try{await B.load(),e(this,Z).add(L)}catch{(0,p.warn)(`Cannot load system font: ${G.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(B)}return}(0,p.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(G){if(G.attached||G.missingFile&&!G.systemFontInfo)return;if(G.attached=!0,G.systemFontInfo){await this.loadSystemFont(G.systemFontInfo);return}if(this.isFontLoadingAPISupported){const u=G.createNativeFontFace();if(u){this.addNativeFontFace(u);try{await u.loaded}catch(H){throw(0,p.warn)(`Failed to load font '${u.family}': '${H}'.`),G.disableFontFace=!0,H}}return}const L=G.createFontFaceRule();if(L){if(this.insertRule(L),this.isSyncFontLoadingSupported)return;await new Promise(u=>{const H=this._queueLoadingCallback(u);this._prepareFontLoadEvent(G,H)})}}get isFontLoadingAPISupported(){var L;const G=!!((L=this._document)!=null&&L.fonts);return(0,p.shadow)(this,"isFontLoadingAPISupported",G)}get isSyncFontLoadingSupported(){let G=!1;return(p.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(G=!0),(0,p.shadow)(this,"isSyncFontLoadingSupported",G)}_queueLoadingCallback(G){function L(){for((0,p.assert)(!H.done,"completeRequest() cannot be called twice."),H.done=!0;u.length>0&&u[0].done;){const B=u.shift();setTimeout(B.callback,0)}}const{loadingRequests:u}=this,H={done:!1,complete:L,callback:G};return u.push(H),H}get _loadTestFont(){const G=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,p.shadow)(this,"_loadTestFont",G)}_prepareFontLoadEvent(G,L){function u(A,q){return A.charCodeAt(q)<<24|A.charCodeAt(q+1)<<16|A.charCodeAt(q+2)<<8|A.charCodeAt(q+3)&255}function H(A,q,Q,k){const et=A.substring(0,q),pt=A.substring(q+Q);return et+k+pt}let B,P;const b=this._document.createElement("canvas");b.width=1,b.height=1;const w=b.getContext("2d");let v=0;function C(A,q){if(++v>30){(0,p.warn)("Load test font never loaded."),q();return}if(w.font="30px "+A,w.fillText(".",0,20),w.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(C.bind(null,A,q))}const F=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=H(R,976,F.length,F);const o=16,d=1482184792;let D=u(R,o);for(B=0,P=F.length-3;B<P;B+=4)D=D-d+u(F,B)|0;B<F.length&&(D=D-d+u(F+"XXX",B)|0),R=H(R,o,4,(0,p.string32)(D));const y=`url(data:font/opentype;base64,${btoa(R)});`,l=`@font-face {font-family:"${F}";src:${y}}`;this.insertRule(l);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const A of[G.loadedName,F]){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=A,M.append(q)}this._document.body.append(M),C(F,()=>{M.remove(),L.complete()})}}Z=new WeakMap,m.FontLoader=E;class t{constructor(G,{isEvalSupported:L=!0,disableFontFace:u=!1,ignoreErrors:H=!1,inspectFont:B=null}){this.compiledGlyphs=Object.create(null);for(const P in G)this[P]=G[P];this.isEvalSupported=L!==!1,this.disableFontFace=u===!0,this.ignoreErrors=H===!0,this._inspectFont=B}createNativeFontFace(){var L;if(!this.data||this.disableFontFace)return null;let G;if(!this.cssFontInfo)G=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),G=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return(L=this._inspectFont)==null||L.call(this,this),G}createFontFaceRule(){var H;if(!this.data||this.disableFontFace)return null;const G=(0,p.bytesToString)(this.data),L=`url(data:${this.mimetype};base64,${btoa(G)});`;let u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${L}}`;else{let B=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(B+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${B}src:${L}}`}return(H=this._inspectFont)==null||H.call(this,this,L),u}getPathGenerator(G,L){if(this.compiledGlyphs[L]!==void 0)return this.compiledGlyphs[L];let u;try{u=G.get(this.loadedName+"_path_"+L)}catch(H){if(!this.ignoreErrors)throw H;return(0,p.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[L]=function(B,P){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const H=[];for(const B of u){const P=B.args!==void 0?B.args.join(","):"";H.push("c.",B.cmd,"(",P,`);
`)}return this.compiledGlyphs[L]=new Function("c","size",H.join(""))}return this.compiledGlyphs[L]=function(H,B){for(const P of u)P.cmd==="scale"&&(P.args=[B,-B]),H[P.cmd].apply(H,P.args)}}}m.FontFaceObject=t},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NodeStandardFontDataFactory=m.NodeFilterFactory=m.NodeCanvasFactory=m.NodeCMapReaderFactory=void 0;var p=mt(7);mt(1);const E=function(L){return new Promise((u,H)=>{require$$5.readFile(L,(P,b)=>{if(P||!b){H(new Error(P));return}u(new Uint8Array(b))})})};class t extends p.BaseFilterFactory{}m.NodeFilterFactory=t;class Z extends p.BaseCanvasFactory{_createCanvas(u,H){return require$$5.createCanvas(u,H)}}m.NodeCanvasFactory=Z;class Ct extends p.BaseCMapReaderFactory{_fetchData(u,H){return E(u).then(B=>({cMapData:B,compressionType:H}))}}m.NodeCMapReaderFactory=Ct;class G extends p.BaseStandardFontDataFactory{_fetchData(u){return E(u)}}m.NodeStandardFontDataFactory=G},(f,m,mt)=>{var $,$i,Tt,Yi;Object.defineProperty(m,"__esModule",{value:!0}),m.CanvasGraphics=void 0;var p=mt(1),E=mt(6),t=mt(12),Z=mt(13);const Ct=16,G=100,L=4096,u=15,H=10,B=1e3,P=16;function b(T,i){if(T._removeMirroring)throw new Error("Context is already forwarding operations.");T.__originalSave=T.save,T.__originalRestore=T.restore,T.__originalRotate=T.rotate,T.__originalScale=T.scale,T.__originalTranslate=T.translate,T.__originalTransform=T.transform,T.__originalSetTransform=T.setTransform,T.__originalResetTransform=T.resetTransform,T.__originalClip=T.clip,T.__originalMoveTo=T.moveTo,T.__originalLineTo=T.lineTo,T.__originalBezierCurveTo=T.bezierCurveTo,T.__originalRect=T.rect,T.__originalClosePath=T.closePath,T.__originalBeginPath=T.beginPath,T._removeMirroring=()=>{T.save=T.__originalSave,T.restore=T.__originalRestore,T.rotate=T.__originalRotate,T.scale=T.__originalScale,T.translate=T.__originalTranslate,T.transform=T.__originalTransform,T.setTransform=T.__originalSetTransform,T.resetTransform=T.__originalResetTransform,T.clip=T.__originalClip,T.moveTo=T.__originalMoveTo,T.lineTo=T.__originalLineTo,T.bezierCurveTo=T.__originalBezierCurveTo,T.rect=T.__originalRect,T.closePath=T.__originalClosePath,T.beginPath=T.__originalBeginPath,delete T._removeMirroring},T.save=function(){i.save(),this.__originalSave()},T.restore=function(){i.restore(),this.__originalRestore()},T.translate=function(s,c){i.translate(s,c),this.__originalTranslate(s,c)},T.scale=function(s,c){i.scale(s,c),this.__originalScale(s,c)},T.transform=function(s,c,h,S,I,z){i.transform(s,c,h,S,I,z),this.__originalTransform(s,c,h,S,I,z)},T.setTransform=function(s,c,h,S,I,z){i.setTransform(s,c,h,S,I,z),this.__originalSetTransform(s,c,h,S,I,z)},T.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},T.rotate=function(s){i.rotate(s),this.__originalRotate(s)},T.clip=function(s){i.clip(s),this.__originalClip(s)},T.moveTo=function(a,s){i.moveTo(a,s),this.__originalMoveTo(a,s)},T.lineTo=function(a,s){i.lineTo(a,s),this.__originalLineTo(a,s)},T.bezierCurveTo=function(a,s,c,h,S,I){i.bezierCurveTo(a,s,c,h,S,I),this.__originalBezierCurveTo(a,s,c,h,S,I)},T.rect=function(a,s,c,h){i.rect(a,s,c,h),this.__originalRect(a,s,c,h)},T.closePath=function(){i.closePath(),this.__originalClosePath()},T.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class w{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,a,s){let c;return this.cache[i]!==void 0?(c=this.cache[i],this.canvasFactory.reset(c,a,s)):(c=this.canvasFactory.create(a,s),this.cache[i]=c),c}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const a=this.cache[i];this.canvasFactory.destroy(a),delete this.cache[i]}}}function v(T,i,a,s,c,h,S,I,z,dt){const[ct,bt,Et,Dt,wt,$t]=(0,E.getCurrentTransform)(T);if(bt===0&&Et===0){const Jt=S*ct+wt,Pt=Math.round(Jt),ht=I*Dt+$t,at=Math.round(ht),St=(S+z)*ct+wt,Wt=Math.abs(Math.round(St)-Pt)||1,jt=(I+dt)*Dt+$t,le=Math.abs(Math.round(jt)-at)||1;return T.setTransform(Math.sign(ct),0,0,Math.sign(Dt),Pt,at),T.drawImage(i,a,s,c,h,0,0,Wt,le),T.setTransform(ct,bt,Et,Dt,wt,$t),[Wt,le]}if(ct===0&&Dt===0){const Jt=I*Et+wt,Pt=Math.round(Jt),ht=S*bt+$t,at=Math.round(ht),St=(I+dt)*Et+wt,Wt=Math.abs(Math.round(St)-Pt)||1,jt=(S+z)*bt+$t,le=Math.abs(Math.round(jt)-at)||1;return T.setTransform(0,Math.sign(bt),Math.sign(Et),0,Pt,at),T.drawImage(i,a,s,c,h,0,0,le,Wt),T.setTransform(ct,bt,Et,Dt,wt,$t),[le,Wt]}T.drawImage(i,a,s,c,h,S,I,z,dt);const ie=Math.hypot(ct,bt),It=Math.hypot(Et,Dt);return[ie*z,It*dt]}function C(T){const{width:i,height:a}=T;if(i>B||a>B)return null;const s=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=i+1;let S=new Uint8Array(h*(a+1)),I,z,dt;const ct=i+7&-8;let bt=new Uint8Array(ct*a),Et=0;for(const It of T.data){let Jt=128;for(;Jt>0;)bt[Et++]=It&Jt?0:255,Jt>>=1}let Dt=0;for(Et=0,bt[Et]!==0&&(S[0]=1,++Dt),z=1;z<i;z++)bt[Et]!==bt[Et+1]&&(S[z]=bt[Et]?2:1,++Dt),Et++;for(bt[Et]!==0&&(S[z]=2,++Dt),I=1;I<a;I++){Et=I*ct,dt=I*h,bt[Et-ct]!==bt[Et]&&(S[dt]=bt[Et]?1:8,++Dt);let It=(bt[Et]?4:0)+(bt[Et-ct]?8:0);for(z=1;z<i;z++)It=(It>>2)+(bt[Et+1]?4:0)+(bt[Et-ct+1]?8:0),c[It]&&(S[dt+z]=c[It],++Dt),Et++;if(bt[Et-ct]!==bt[Et]&&(S[dt+z]=bt[Et]?2:4,++Dt),Dt>s)return null}for(Et=ct*(a-1),dt=I*h,bt[Et]!==0&&(S[dt]=8,++Dt),z=1;z<i;z++)bt[Et]!==bt[Et+1]&&(S[dt+z]=bt[Et]?4:8,++Dt),Et++;if(bt[Et]!==0&&(S[dt+z]=4,++Dt),Dt>s)return null;const wt=new Int32Array([0,h,-1,0,-h,0,0,0,1]),$t=new Path2D;for(I=0;Dt&&I<=a;I++){let It=I*h;const Jt=It+i;for(;It<Jt&&!S[It];)It++;if(It===Jt)continue;$t.moveTo(It%h,I);const Pt=It;let ht=S[It];do{const at=wt[ht];do It+=at;while(!S[It]);const St=S[It];St!==5&&St!==10?(ht=St,S[It]=0):(ht=St&51*ht>>4,S[It]&=ht>>2|ht<<2),$t.lineTo(It%h,It/h|0),S[It]||--Dt}while(Pt!==It);--I}return bt=null,S=null,function(It){It.save(),It.scale(1/i,-1/a),It.translate(0,-a),It.fill($t),It.beginPath(),It.restore()}}class F{constructor(i,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=p.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=p.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,a])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,a){this.x=i,this.y=a}updatePathMinMax(i,a,s){[a,s]=p.Util.applyTransform([a,s],i),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(i,a){const s=p.Util.applyTransform(a,i),c=p.Util.applyTransform(a.slice(2),i);this.minX=Math.min(this.minX,s[0],c[0]),this.minY=Math.min(this.minY,s[1],c[1]),this.maxX=Math.max(this.maxX,s[0],c[0]),this.maxY=Math.max(this.maxY,s[1],c[1])}updateScalingPathMinMax(i,a){p.Util.scaleMinMax(i,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(i,a,s,c,h,S,I,z,dt,ct){const bt=p.Util.bezierBoundingBox(a,s,c,h,S,I,z,dt);if(ct){ct[0]=Math.min(ct[0],bt[0],bt[2]),ct[1]=Math.max(ct[1],bt[0],bt[2]),ct[2]=Math.min(ct[2],bt[1],bt[3]),ct[3]=Math.max(ct[3],bt[1],bt[3]);return}this.updateRectMinMax(i,bt)}getPathBoundingBox(i=t.PathType.FILL,a=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(i===t.PathType.STROKE){a||(0,p.unreachable)("Stroke bounding box must include transform.");const c=p.Util.singularValueDecompose2dScale(a),h=c[0]*this.lineWidth/2,S=c[1]*this.lineWidth/2;s[0]-=h,s[1]-=S,s[2]+=h,s[3]+=S}return s}updateClipFromPath(){const i=p.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=t.PathType.FILL,a=null){return p.Util.intersect(this.clipBox,this.getPathBoundingBox(i,a))}}function R(T,i){if(typeof ImageData<"u"&&i instanceof ImageData){T.putImageData(i,0,0);return}const a=i.height,s=i.width,c=a%P,h=(a-c)/P,S=c===0?h:h+1,I=T.createImageData(s,P);let z=0,dt;const ct=i.data,bt=I.data;let Et,Dt,wt,$t;if(i.kind===p.ImageKind.GRAYSCALE_1BPP){const ie=ct.byteLength,It=new Uint32Array(bt.buffer,0,bt.byteLength>>2),Jt=It.length,Pt=s+7>>3,ht=4294967295,at=p.FeatureTest.isLittleEndian?4278190080:255;for(Et=0;Et<S;Et++){for(wt=Et<h?P:c,dt=0,Dt=0;Dt<wt;Dt++){const St=ie-z;let Wt=0;const jt=St>Pt?s:St*8-7,le=jt&-8;let fe=0,ce=0;for(;Wt<le;Wt+=8)ce=ct[z++],It[dt++]=ce&128?ht:at,It[dt++]=ce&64?ht:at,It[dt++]=ce&32?ht:at,It[dt++]=ce&16?ht:at,It[dt++]=ce&8?ht:at,It[dt++]=ce&4?ht:at,It[dt++]=ce&2?ht:at,It[dt++]=ce&1?ht:at;for(;Wt<jt;Wt++)fe===0&&(ce=ct[z++],fe=128),It[dt++]=ce&fe?ht:at,fe>>=1}for(;dt<Jt;)It[dt++]=0;T.putImageData(I,0,Et*P)}}else if(i.kind===p.ImageKind.RGBA_32BPP){for(Dt=0,$t=s*P*4,Et=0;Et<h;Et++)bt.set(ct.subarray(z,z+$t)),z+=$t,T.putImageData(I,0,Dt),Dt+=P;Et<S&&($t=s*c*4,bt.set(ct.subarray(z,z+$t)),T.putImageData(I,0,Dt))}else if(i.kind===p.ImageKind.RGB_24BPP)for(wt=P,$t=s*wt,Et=0;Et<S;Et++){for(Et>=h&&(wt=c,$t=s*wt),dt=0,Dt=$t;Dt--;)bt[dt++]=ct[z++],bt[dt++]=ct[z++],bt[dt++]=ct[z++],bt[dt++]=255;T.putImageData(I,0,Et*P)}else throw new Error(`bad image kind: ${i.kind}`)}function x(T,i){if(i.bitmap){T.drawImage(i.bitmap,0,0);return}const a=i.height,s=i.width,c=a%P,h=(a-c)/P,S=c===0?h:h+1,I=T.createImageData(s,P);let z=0;const dt=i.data,ct=I.data;for(let bt=0;bt<S;bt++){const Et=bt<h?P:c;({srcPos:z}=(0,Z.convertBlackAndWhiteToRGBA)({src:dt,srcPos:z,dest:ct,width:s,height:Et,nonBlackColor:0})),T.putImageData(I,0,bt*P)}}function o(T,i){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of a)T[s]!==void 0&&(i[s]=T[s]);T.setLineDash!==void 0&&(i.setLineDash(T.getLineDash()),i.lineDashOffset=T.lineDashOffset)}function d(T){if(T.strokeStyle=T.fillStyle="#000000",T.fillRule="nonzero",T.globalAlpha=1,T.lineWidth=1,T.lineCap="butt",T.lineJoin="miter",T.miterLimit=10,T.globalCompositeOperation="source-over",T.font="10px sans-serif",T.setLineDash!==void 0&&(T.setLineDash([]),T.lineDashOffset=0),!p.isNodeJS){const{filter:i}=T;i!=="none"&&i!==""&&(T.filter="none")}}function D(T,i,a,s){const c=T.length;for(let h=3;h<c;h+=4){const S=T[h];if(S===0)T[h-3]=i,T[h-2]=a,T[h-1]=s;else if(S<255){const I=255-S;T[h-3]=T[h-3]*S+i*I>>8,T[h-2]=T[h-2]*S+a*I>>8,T[h-1]=T[h-1]*S+s*I>>8}}}function y(T,i,a){const s=T.length,c=1/255;for(let h=3;h<s;h+=4){const S=a?a[T[h]]:T[h];i[h]=i[h]*S*c|0}}function l(T,i,a){const s=T.length;for(let c=3;c<s;c+=4){const h=T[c-3]*77+T[c-2]*152+T[c-1]*28;i[c]=a?i[c]*a[h>>8]>>8:i[c]*h>>16}}function M(T,i,a,s,c,h,S,I,z,dt,ct){const bt=!!h,Et=bt?h[0]:0,Dt=bt?h[1]:0,wt=bt?h[2]:0,$t=c==="Luminosity"?l:y,It=Math.min(s,Math.ceil(1048576/a));for(let Jt=0;Jt<s;Jt+=It){const Pt=Math.min(It,s-Jt),ht=T.getImageData(I-dt,Jt+(z-ct),a,Pt),at=i.getImageData(I,Jt+z,a,Pt);bt&&D(ht.data,Et,Dt,wt),$t(ht.data,at.data,S),i.putImageData(at,I,Jt+z)}}function A(T,i,a,s){const c=s[0],h=s[1],S=s[2]-c,I=s[3]-h;S===0||I===0||(M(i.context,a,S,I,i.subtype,i.backdrop,i.transferMap,c,h,i.offsetX,i.offsetY),T.save(),T.globalAlpha=1,T.globalCompositeOperation="source-over",T.setTransform(1,0,0,1,0,0),T.drawImage(a.canvas,0,0),T.restore())}function q(T,i){const a=p.Util.singularValueDecompose2dScale(T);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:a[0]<=s||a[1]<=s}const Q=["butt","round","square"],k=["miter","round","bevel"],et={},pt={},Ut=class Ut{constructor(i,a,s,c,h,{optionalContentConfig:S,markedContentStack:I=null},z,dt){U(this,$);U(this,Tt);this.ctx=i,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=s,this.canvasFactory=c,this.filterFactory=h,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=S,this.cachedCanvases=new w(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=z,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,a=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):a}beginDrawing({transform:i,viewport:a,transparency:s=!1,background:c=null}){const h=this.ctx.canvas.width,S=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,h,S),this.ctx.fillStyle=I,s){const z=this.cachedCanvases.getCanvas("transparent",h,S);this.compositeCtx=this.ctx,this.transparentCanvas=z.canvas,this.ctx=z.context,this.ctx.save(),this.ctx.transform(...(0,E.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,E.getCurrentTransform)(this.ctx)}executeOperatorList(i,a,s,c){const h=i.argsArray,S=i.fnArray;let I=a||0;const z=h.length;if(z===I)return I;const dt=z-I>H&&typeof s=="function",ct=dt?Date.now()+u:0;let bt=0;const Et=this.commonObjs,Dt=this.objs;let wt;for(;;){if(c!==void 0&&I===c.nextBreakPoint)return c.breakIt(I,s),I;if(wt=S[I],wt!==p.OPS.dependency)this[wt].apply(this,h[I]);else for(const $t of h[I]){const ie=$t.startsWith("g_")?Et:Dt;if(!ie.has($t))return ie.get($t,s),I}if(I++,I===z)return I;if(dt&&++bt>H){if(Date.now()>ct)return s(),I;bt=0}}}endDrawing(){tt(this,$,$i).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const a of i.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);i.clear()}this._cachedBitmapsMap.clear(),tt(this,Tt,Yi).call(this)}_scaleImage(i,a){const s=i.width,c=i.height;let h=Math.max(Math.hypot(a[0],a[1]),1),S=Math.max(Math.hypot(a[2],a[3]),1),I=s,z=c,dt="prescale1",ct,bt;for(;h>2&&I>1||S>2&&z>1;){let Et=I,Dt=z;h>2&&I>1&&(Et=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),h/=I/Et),S>2&&z>1&&(Dt=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z)/2,S/=z/Dt),ct=this.cachedCanvases.getCanvas(dt,Et,Dt),bt=ct.context,bt.clearRect(0,0,Et,Dt),bt.drawImage(i,0,0,I,z,0,0,Et,Dt),i=ct.canvas,I=Et,z=Dt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:I,paintHeight:z}}_createMaskCanvas(i){const a=this.ctx,{width:s,height:c}=i,h=this.current.fillColor,S=this.current.patternFill,I=(0,E.getCurrentTransform)(a);let z,dt,ct,bt;if((i.bitmap||i.data)&&i.count>1){const Wt=i.bitmap||i.data.buffer;dt=JSON.stringify(S?I:[I.slice(0,4),h]),z=this._cachedBitmapsMap.get(Wt),z||(z=new Map,this._cachedBitmapsMap.set(Wt,z));const jt=z.get(dt);if(jt&&!S){const le=Math.round(Math.min(I[0],I[2])+I[4]),fe=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:jt,offsetX:le,offsetY:fe}}ct=jt}ct||(bt=this.cachedCanvases.getCanvas("maskCanvas",s,c),x(bt.context,i));let Et=p.Util.transform(I,[1/s,0,0,-1/c,0,0]);Et=p.Util.transform(Et,[1,0,0,1,0,-c]);const Dt=p.Util.applyTransform([0,0],Et),wt=p.Util.applyTransform([s,c],Et),$t=p.Util.normalizeRect([Dt[0],Dt[1],wt[0],wt[1]]),ie=Math.round($t[2]-$t[0])||1,It=Math.round($t[3]-$t[1])||1,Jt=this.cachedCanvases.getCanvas("fillCanvas",ie,It),Pt=Jt.context,ht=Math.min(Dt[0],wt[0]),at=Math.min(Dt[1],wt[1]);Pt.translate(-ht,-at),Pt.transform(...Et),ct||(ct=this._scaleImage(bt.canvas,(0,E.getCurrentTransformInverse)(Pt)),ct=ct.img,z&&S&&z.set(dt,ct)),Pt.imageSmoothingEnabled=q((0,E.getCurrentTransform)(Pt),i.interpolate),v(Pt,ct,0,0,ct.width,ct.height,0,0,s,c),Pt.globalCompositeOperation="source-in";const St=p.Util.transform((0,E.getCurrentTransformInverse)(Pt),[1,0,0,1,-ht,-at]);return Pt.fillStyle=S?h.getPattern(a,this,St,t.PathType.FILL):h,Pt.fillRect(0,0,s,c),z&&!S&&(this.cachedCanvases.delete("fillCanvas"),z.set(dt,Jt.canvas)),{canvas:Jt.canvas,offsetX:Math.round(ht),offsetY:Math.round(at)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=Q[i]}setLineJoin(i){this.ctx.lineJoin=k[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,a){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(i),s.lineDashOffset=a)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[a,s]of i)switch(a){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,a=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(s,i,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const h=this.ctx;h.setTransform(...(0,E.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,h),b(h,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,s=this.suspendedCtx;A(s,a,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,a,s,c,h,S){this.ctx.transform(i,a,s,c,h,S),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,a,s){const c=this.ctx,h=this.current;let S=h.x,I=h.y,z,dt;const ct=(0,E.getCurrentTransform)(c),bt=ct[0]===0&&ct[3]===0||ct[1]===0&&ct[2]===0,Et=bt?s.slice(0):null;for(let Dt=0,wt=0,$t=i.length;Dt<$t;Dt++)switch(i[Dt]|0){case p.OPS.rectangle:S=a[wt++],I=a[wt++];const ie=a[wt++],It=a[wt++],Jt=S+ie,Pt=I+It;c.moveTo(S,I),ie===0||It===0?c.lineTo(Jt,Pt):(c.lineTo(Jt,I),c.lineTo(Jt,Pt),c.lineTo(S,Pt)),bt||h.updateRectMinMax(ct,[S,I,Jt,Pt]),c.closePath();break;case p.OPS.moveTo:S=a[wt++],I=a[wt++],c.moveTo(S,I),bt||h.updatePathMinMax(ct,S,I);break;case p.OPS.lineTo:S=a[wt++],I=a[wt++],c.lineTo(S,I),bt||h.updatePathMinMax(ct,S,I);break;case p.OPS.curveTo:z=S,dt=I,S=a[wt+4],I=a[wt+5],c.bezierCurveTo(a[wt],a[wt+1],a[wt+2],a[wt+3],S,I),h.updateCurvePathMinMax(ct,z,dt,a[wt],a[wt+1],a[wt+2],a[wt+3],S,I,Et),wt+=6;break;case p.OPS.curveTo2:z=S,dt=I,c.bezierCurveTo(S,I,a[wt],a[wt+1],a[wt+2],a[wt+3]),h.updateCurvePathMinMax(ct,z,dt,S,I,a[wt],a[wt+1],a[wt+2],a[wt+3],Et),S=a[wt+2],I=a[wt+3],wt+=4;break;case p.OPS.curveTo3:z=S,dt=I,S=a[wt+2],I=a[wt+3],c.bezierCurveTo(a[wt],a[wt+1],S,I,S,I),h.updateCurvePathMinMax(ct,z,dt,a[wt],a[wt+1],S,I,S,I,Et),wt+=4;break;case p.OPS.closePath:c.closePath();break}bt&&h.updateScalingPathMinMax(ct,Et),h.setCurrentPoint(S,I)}closePath(){this.ctx.closePath()}stroke(i=!0){const a=this.ctx,s=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(a.save(),a.strokeStyle=s.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const a=this.ctx,s=this.current.fillColor,c=this.current.patternFill;let h=!1;c&&(a.save(),a.fillStyle=s.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.FILL),h=!0);const S=this.current.getClippedPathBoundingBox();this.contentVisible&&S!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),h&&a.restore(),i&&this.consumePath(S)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=p.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,a=this.ctx;if(i===void 0){a.beginPath();return}a.save(),a.beginPath();for(const s of i)a.setTransform(...s.transform),a.translate(s.x,s.y),s.addToPath(a,s.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,a){var ct;const s=this.commonObjs.get(i),c=this.current;if(!s)throw new Error(`Can't find font for ${i}`);if(c.fontMatrix=s.fontMatrix||p.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,p.warn)("Invalid font matrix for font "+i),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=s,this.current.fontSize=a,s.isType3Font)return;const h=s.loadedName||"sans-serif",S=((ct=s.systemFontInfo)==null?void 0:ct.css)||`"${h}", ${s.fallbackName}`;let I="normal";s.black?I="900":s.bold&&(I="bold");const z=s.italic?"italic":"normal";let dt=a;a<Ct?dt=Ct:a>G&&(dt=G),this.current.fontSizeScale=a/dt,this.ctx.font=`${z} ${I} ${dt}px ${S}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,a){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=a}setLeadingMoveText(i,a){this.setLeading(-a),this.moveText(i,a)}setTextMatrix(i,a,s,c,h,S){this.current.textMatrix=[i,a,s,c,h,S],this.current.textMatrixScale=Math.hypot(i,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,a,s,c){const h=this.ctx,S=this.current,I=S.font,z=S.textRenderingMode,dt=S.fontSize/S.fontSizeScale,ct=z&p.TextRenderingMode.FILL_STROKE_MASK,bt=!!(z&p.TextRenderingMode.ADD_TO_PATH_FLAG),Et=S.patternFill&&!I.missingFile;let Dt;(I.disableFontFace||bt||Et)&&(Dt=I.getPathGenerator(this.commonObjs,i)),I.disableFontFace||Et?(h.save(),h.translate(a,s),h.beginPath(),Dt(h,dt),c&&h.setTransform(...c),(ct===p.TextRenderingMode.FILL||ct===p.TextRenderingMode.FILL_STROKE)&&h.fill(),(ct===p.TextRenderingMode.STROKE||ct===p.TextRenderingMode.FILL_STROKE)&&h.stroke(),h.restore()):((ct===p.TextRenderingMode.FILL||ct===p.TextRenderingMode.FILL_STROKE)&&h.fillText(i,a,s),(ct===p.TextRenderingMode.STROKE||ct===p.TextRenderingMode.FILL_STROKE)&&h.strokeText(i,a,s)),bt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,E.getCurrentTransform)(h),x:a,y:s,fontSize:dt,addToPath:Dt})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const a=i.getImageData(0,0,10,10).data;let s=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){s=!0;break}return(0,p.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(i){const a=this.current,s=a.font;if(s.isType3Font)return this.showType3Text(i);const c=a.fontSize;if(c===0)return;const h=this.ctx,S=a.fontSizeScale,I=a.charSpacing,z=a.wordSpacing,dt=a.fontDirection,ct=a.textHScale*dt,bt=i.length,Et=s.vertical,Dt=Et?1:-1,wt=s.defaultVMetrics,$t=c*a.fontMatrix[0],ie=a.textRenderingMode===p.TextRenderingMode.FILL&&!s.disableFontFace&&!a.patternFill;h.save(),h.transform(...a.textMatrix),h.translate(a.x,a.y+a.textRise),dt>0?h.scale(ct,-1):h.scale(ct,1);let It;if(a.patternFill){h.save();const St=a.fillColor.getPattern(h,this,(0,E.getCurrentTransformInverse)(h),t.PathType.FILL);It=(0,E.getCurrentTransform)(h),h.restore(),h.fillStyle=St}let Jt=a.lineWidth;const Pt=a.textMatrixScale;if(Pt===0||Jt===0){const St=a.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;(St===p.TextRenderingMode.STROKE||St===p.TextRenderingMode.FILL_STROKE)&&(Jt=this.getSinglePixelWidth())}else Jt/=Pt;if(S!==1&&(h.scale(S,S),Jt/=S),h.lineWidth=Jt,s.isInvalidPDFjsFont){const St=[];let Wt=0;for(const jt of i)St.push(jt.unicode),Wt+=jt.width;h.fillText(St.join(""),0,0),a.x+=Wt*$t*ct,h.restore(),this.compose();return}let ht=0,at;for(at=0;at<bt;++at){const St=i[at];if(typeof St=="number"){ht+=Dt*St*c/1e3;continue}let Wt=!1;const jt=(St.isSpace?z:0)+I,le=St.fontChar,fe=St.accent;let ce,ge,_e=St.width;if(Et){const we=St.vmetric||wt,_t=-(St.vmetric?we[1]:_e*.5)*$t,nt=we[2]*$t;_e=we?-we[0]:_e,ce=_t/S,ge=(ht+nt)/S}else ce=ht/S,ge=0;if(s.remeasure&&_e>0){const we=h.measureText(le).width*1e3/c*S;if(_e<we&&this.isFontSubpixelAAEnabled){const _t=_e/we;Wt=!0,h.save(),h.scale(_t,1),ce/=_t}else _e!==we&&(ce+=(_e-we)/2e3*c/S)}if(this.contentVisible&&(St.isInFont||s.missingFile)){if(ie&&!fe)h.fillText(le,ce,ge);else if(this.paintChar(le,ce,ge,It),fe){const we=ce+c*fe.offset.x/S,_t=ge-c*fe.offset.y/S;this.paintChar(fe.fontChar,we,_t,It)}}const re=Et?_e*$t-jt*dt:_e*$t+jt*dt;ht+=re,Wt&&h.restore()}Et?a.y-=ht:a.x+=ht*ct,h.restore(),this.compose()}showType3Text(i){const a=this.ctx,s=this.current,c=s.font,h=s.fontSize,S=s.fontDirection,I=c.vertical?1:-1,z=s.charSpacing,dt=s.wordSpacing,ct=s.textHScale*S,bt=s.fontMatrix||p.FONT_IDENTITY_MATRIX,Et=i.length,Dt=s.textRenderingMode===p.TextRenderingMode.INVISIBLE;let wt,$t,ie,It;if(!(Dt||h===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...s.textMatrix),a.translate(s.x,s.y),a.scale(ct,S),wt=0;wt<Et;++wt){if($t=i[wt],typeof $t=="number"){It=I*$t*h/1e3,this.ctx.translate(It,0),s.x+=It*ct;continue}const Jt=($t.isSpace?dt:0)+z,Pt=c.charProcOperatorList[$t.operatorListId];if(!Pt){(0,p.warn)(`Type3 character "${$t.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=$t,this.save(),a.scale(h,h),a.transform(...bt),this.executeOperatorList(Pt),this.restore()),ie=p.Util.applyTransform([$t.width,0],bt)[0]*h+Jt,a.translate(ie,0),s.x+=ie*ct}a.restore(),this.processingType3=null}}setCharWidth(i,a){}setCharWidthAndBounds(i,a,s,c,h,S){this.ctx.rect(s,c,h-s,S-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let a;if(i[0]==="TilingPattern"){const s=i[1],c=this.baseTransform||(0,E.getCurrentTransform)(this.ctx),h={createCanvasGraphics:S=>new Ut(S,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new t.TilingPattern(i,s,this.ctx,h,c)}else a=this._getPattern(i[1],i[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,a,s){const c=p.Util.makeHexColor(i,a,s);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(i,a,s){const c=p.Util.makeHexColor(i,a,s);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(i,a=null){let s;return this.cachedPatterns.has(i)?s=this.cachedPatterns.get(i):(s=(0,t.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,s)),a&&(s.matrix=a),s}shadingFill(i){if(!this.contentVisible)return;const a=this.ctx;this.save();const s=this._getPattern(i);a.fillStyle=s.getPattern(a,this,(0,E.getCurrentTransformInverse)(a),t.PathType.SHADING);const c=(0,E.getCurrentTransformInverse)(a);if(c){const{width:h,height:S}=a.canvas,[I,z,dt,ct]=p.Util.getAxialAlignedBoundingBox([0,0,h,S],c);this.ctx.fillRect(I,z,dt-I,ct-z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,p.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,p.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,E.getCurrentTransform)(this.ctx),a)){const s=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],s,c),this.current.updateRectMinMax((0,E.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;i.isolated||(0,p.info)("TODO: Support non-isolated groups."),i.knockout&&(0,p.warn)("Knockout groups not supported.");const s=(0,E.getCurrentTransform)(a);if(i.matrix&&a.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let c=p.Util.getAxialAlignedBoundingBox(i.bbox,(0,E.getCurrentTransform)(a));const h=[0,0,a.canvas.width,a.canvas.height];c=p.Util.intersect(c,h)||[0,0,0,0];const S=Math.floor(c[0]),I=Math.floor(c[1]);let z=Math.max(Math.ceil(c[2])-S,1),dt=Math.max(Math.ceil(c[3])-I,1),ct=1,bt=1;z>L&&(ct=z/L,z=L),dt>L&&(bt=dt/L,dt=L),this.current.startNewPathAndClipBox([0,0,z,dt]);let Et="groupAt"+this.groupLevel;i.smask&&(Et+="_smask_"+this.smaskCounter++%2);const Dt=this.cachedCanvases.getCanvas(Et,z,dt),wt=Dt.context;wt.scale(1/ct,1/bt),wt.translate(-S,-I),wt.transform(...s),i.smask?this.smaskStack.push({canvas:Dt.canvas,context:wt,offsetX:S,offsetY:I,scaleX:ct,scaleY:bt,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(S,I),a.scale(ct,bt),a.save()),o(a,wt),this.ctx=wt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,E.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const h=p.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(i,a,s,c,h){if(tt(this,$,$i).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const S=a[2]-a[0],I=a[3]-a[1];if(h&&this.annotationCanvasMap){s=s.slice(),s[4]-=a[0],s[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=S,a[3]=I;const[z,dt]=p.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(this.ctx)),{viewportScale:ct}=this,bt=Math.ceil(S*this.outputScaleX*ct),Et=Math.ceil(I*this.outputScaleY*ct);this.annotationCanvas=this.canvasFactory.create(bt,Et);const{canvas:Dt,context:wt}=this.annotationCanvas;this.annotationCanvasMap.set(i,Dt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=wt,this.ctx.save(),this.ctx.setTransform(z,0,0,-dt,0,I*dt),d(this.ctx)}else d(this.ctx),this.ctx.rect(a[0],a[1],S,I),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),tt(this,Tt,Yi).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const a=i.count;i=this.getObject(i.data,i),i.count=a;const s=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=C(i)),c.compiled)){c.compiled(s);return}const h=this._createMaskCanvas(i),S=h.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(S,h.offsetX,h.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(i,a,s=0,c=0,h,S){if(!this.contentVisible)return;i=this.getObject(i.data,i);const I=this.ctx;I.save();const z=(0,E.getCurrentTransform)(I);I.transform(a,s,c,h,0,0);const dt=this._createMaskCanvas(i);I.setTransform(1,0,0,1,dt.offsetX-z[4],dt.offsetY-z[5]);for(let ct=0,bt=S.length;ct<bt;ct+=2){const Et=p.Util.transform(z,[a,s,c,h,S[ct],S[ct+1]]),[Dt,wt]=p.Util.applyTransform([0,0],Et);I.drawImage(dt.canvas,Dt,wt)}I.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const a=this.ctx,s=this.current.fillColor,c=this.current.patternFill;for(const h of i){const{data:S,width:I,height:z,transform:dt}=h,ct=this.cachedCanvases.getCanvas("maskCanvas",I,z),bt=ct.context;bt.save();const Et=this.getObject(S,h);x(bt,Et),bt.globalCompositeOperation="source-in",bt.fillStyle=c?s.getPattern(bt,this,(0,E.getCurrentTransformInverse)(a),t.PathType.FILL):s,bt.fillRect(0,0,I,z),bt.restore(),a.save(),a.transform(...dt),a.scale(1,-1),v(a,ct.canvas,0,0,I,z,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const a=this.getObject(i);if(!a){(0,p.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(i,a,s,c){if(!this.contentVisible)return;const h=this.getObject(i);if(!h){(0,p.warn)("Dependent image isn't ready yet");return}const S=h.width,I=h.height,z=[];for(let dt=0,ct=c.length;dt<ct;dt+=2)z.push({transform:[a,0,0,s,c[dt],c[dt+1]],x:0,y:0,w:S,h:I});this.paintInlineImageXObjectGroup(h,z)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:a,width:s,height:c}=i,h=this.cachedCanvases.getCanvas("inlineImage",s,c),S=h.context;return S.filter=this.current.transferMaps,S.drawImage(a,0,0),S.filter="none",h.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const a=i.width,s=i.height,c=this.ctx;if(this.save(),!p.isNodeJS){const{filter:I}=c;I!=="none"&&I!==""&&(c.filter="none")}c.scale(1/a,-1/s);let h;if(i.bitmap)h=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)h=i;else{const z=this.cachedCanvases.getCanvas("inlineImage",a,s).context;R(z,i),h=this.applyTransferMapsToCanvas(z)}const S=this._scaleImage(h,(0,E.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=q((0,E.getCurrentTransform)(c),i.interpolate),v(c,S.img,0,0,S.paintWidth,S.paintHeight,0,-s,a,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,a){if(!this.contentVisible)return;const s=this.ctx;let c;if(i.bitmap)c=i.bitmap;else{const h=i.width,S=i.height,z=this.cachedCanvases.getCanvas("inlineImage",h,S).context;R(z,i),c=this.applyTransferMapsToCanvas(z)}for(const h of a)s.save(),s.transform(...h.transform),s.scale(1,-1),v(s,c,h.x,h.y,h.w,h.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,a){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,a){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip&&(a||(this.pendingClip===pt?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,E.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const a=Math.abs(i[0]*i[3]-i[2]*i[1]),s=Math.hypot(i[0],i[2]),c=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(s,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a,b:s,c,d:h}=this.ctx.getTransform();let S,I;if(s===0&&c===0){const z=Math.abs(a),dt=Math.abs(h);if(z===dt)if(i===0)S=I=1/z;else{const ct=z*i;S=I=ct<1?1/ct:1}else if(i===0)S=1/z,I=1/dt;else{const ct=z*i,bt=dt*i;S=ct<1?1/ct:1,I=bt<1?1/bt:1}}else{const z=Math.abs(a*h-s*c),dt=Math.hypot(a,s),ct=Math.hypot(c,h);if(i===0)S=ct/z,I=dt/z;else{const bt=i*z;S=ct>bt?ct/bt:1,I=dt>bt?dt/bt:1}}this._cachedScaleForStroking[0]=S,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:a}=this,{lineWidth:s}=this.current,[c,h]=this.getScaleForStroking();if(a.lineWidth=s||1,c===1&&h===1){a.stroke();return}const S=a.getLineDash();if(i&&a.save(),a.scale(c,h),S.length>0){const I=Math.max(c,h);a.setLineDash(S.map(z=>z/I)),a.lineDashOffset/=I}a.stroke(),i&&a.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};$=new WeakSet,$i=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Tt=new WeakSet,Yi=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const a=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let vt=Ut;m.CanvasGraphics=vt;for(const T in p.OPS)vt.prototype[T]!==void 0&&(vt.prototype[p.OPS[T]]=vt.prototype[T])},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TilingPattern=m.PathType=void 0,m.getShadingPattern=P;var p=mt(1),E=mt(6);const t={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};m.PathType=t;function Z(C,F){if(!F)return;const R=F[2]-F[0],x=F[3]-F[1],o=new Path2D;o.rect(F[0],F[1],R,x),C.clip(o)}class Ct{constructor(){this.constructor===Ct&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class G extends Ct{constructor(F){super(),this._type=F[1],this._bbox=F[2],this._colorStops=F[3],this._p0=F[4],this._p1=F[5],this._r0=F[6],this._r1=F[7],this.matrix=null}_createGradient(F){let R;this._type==="axial"?R=F.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(R=F.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)R.addColorStop(x[0],x[1]);return R}getPattern(F,R,x,o){let d;if(o===t.STROKE||o===t.FILL){const D=R.current.getClippedPathBoundingBox(o,(0,E.getCurrentTransform)(F))||[0,0,0,0],y=Math.ceil(D[2]-D[0])||1,l=Math.ceil(D[3]-D[1])||1,M=R.cachedCanvases.getCanvas("pattern",y,l,!0),A=M.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-D[0],-D[1]),x=p.Util.transform(x,[1,0,0,1,D[0],D[1]]),A.transform(...R.baseTransform),this.matrix&&A.transform(...this.matrix),Z(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),d=F.createPattern(M.canvas,"no-repeat");const q=new DOMMatrix(x);d.setTransform(q)}else Z(F,this._bbox),d=this._createGradient(F);return d}}function L(C,F,R,x,o,d,D,y){const l=F.coords,M=F.colors,A=C.data,q=C.width*4;let Q;l[R+1]>l[x+1]&&(Q=R,R=x,x=Q,Q=d,d=D,D=Q),l[x+1]>l[o+1]&&(Q=x,x=o,o=Q,Q=D,D=y,y=Q),l[R+1]>l[x+1]&&(Q=R,R=x,x=Q,Q=d,d=D,D=Q);const k=(l[R]+F.offsetX)*F.scaleX,et=(l[R+1]+F.offsetY)*F.scaleY,pt=(l[x]+F.offsetX)*F.scaleX,vt=(l[x+1]+F.offsetY)*F.scaleY,$=(l[o]+F.offsetX)*F.scaleX,yt=(l[o+1]+F.offsetY)*F.scaleY;if(et>=yt)return;const Tt=M[d],Nt=M[d+1],Ut=M[d+2],T=M[D],i=M[D+1],a=M[D+2],s=M[y],c=M[y+1],h=M[y+2],S=Math.round(et),I=Math.round(yt);let z,dt,ct,bt,Et,Dt,wt,$t;for(let ie=S;ie<=I;ie++){if(ie<vt){const at=ie<et?0:(et-ie)/(et-vt);z=k-(k-pt)*at,dt=Tt-(Tt-T)*at,ct=Nt-(Nt-i)*at,bt=Ut-(Ut-a)*at}else{let at;ie>yt?at=1:vt===yt?at=0:at=(vt-ie)/(vt-yt),z=pt-(pt-$)*at,dt=T-(T-s)*at,ct=i-(i-c)*at,bt=a-(a-h)*at}let It;ie<et?It=0:ie>yt?It=1:It=(et-ie)/(et-yt),Et=k-(k-$)*It,Dt=Tt-(Tt-s)*It,wt=Nt-(Nt-c)*It,$t=Ut-(Ut-h)*It;const Jt=Math.round(Math.min(z,Et)),Pt=Math.round(Math.max(z,Et));let ht=q*ie+Jt*4;for(let at=Jt;at<=Pt;at++)It=(z-at)/(z-Et),It<0?It=0:It>1&&(It=1),A[ht++]=dt-(dt-Dt)*It|0,A[ht++]=ct-(ct-wt)*It|0,A[ht++]=bt-(bt-$t)*It|0,A[ht++]=255}}function u(C,F,R){const x=F.coords,o=F.colors;let d,D;switch(F.type){case"lattice":const y=F.verticesPerRow,l=Math.floor(x.length/y)-1,M=y-1;for(d=0;d<l;d++){let A=d*y;for(let q=0;q<M;q++,A++)L(C,R,x[A],x[A+1],x[A+y],o[A],o[A+1],o[A+y]),L(C,R,x[A+y+1],x[A+1],x[A+y],o[A+y+1],o[A+1],o[A+y])}break;case"triangles":for(d=0,D=x.length;d<D;d+=3)L(C,R,x[d],x[d+1],x[d+2],o[d],o[d+1],o[d+2]);break;default:throw new Error("illegal figure")}}class H extends Ct{constructor(F){super(),this._coords=F[2],this._colors=F[3],this._figures=F[4],this._bounds=F[5],this._bbox=F[7],this._background=F[8],this.matrix=null}_createMeshCanvas(F,R,x){const y=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-y,A=Math.ceil(this._bounds[3])-l,q=Math.min(Math.ceil(Math.abs(M*F[0]*1.1)),3e3),Q=Math.min(Math.ceil(Math.abs(A*F[1]*1.1)),3e3),k=M/q,et=A/Q,pt={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-l,scaleX:1/k,scaleY:1/et},vt=q+2*2,$=Q+2*2,yt=x.getCanvas("mesh",vt,$,!1),Tt=yt.context,Nt=Tt.createImageData(q,Q);if(R){const T=Nt.data;for(let i=0,a=T.length;i<a;i+=4)T[i]=R[0],T[i+1]=R[1],T[i+2]=R[2],T[i+3]=255}for(const T of this._figures)u(Nt,T,pt);return Tt.putImageData(Nt,2,2),{canvas:yt.canvas,offsetX:y-2*k,offsetY:l-2*et,scaleX:k,scaleY:et}}getPattern(F,R,x,o){Z(F,this._bbox);let d;if(o===t.SHADING)d=p.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(F));else if(d=p.Util.singularValueDecompose2dScale(R.baseTransform),this.matrix){const y=p.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*y[0],d[1]*y[1]]}const D=this._createMeshCanvas(d,o===t.SHADING?null:this._background,R.cachedCanvases);return o!==t.SHADING&&(F.setTransform(...R.baseTransform),this.matrix&&F.transform(...this.matrix)),F.translate(D.offsetX,D.offsetY),F.scale(D.scaleX,D.scaleY),F.createPattern(D.canvas,"no-repeat")}}class B extends Ct{getPattern(){return"hotpink"}}function P(C){switch(C[0]){case"RadialAxial":return new G(C);case"Mesh":return new H(C);case"Dummy":return new B}throw new Error(`Unknown IR type: ${C[0]}`)}const b={COLORED:1,UNCOLORED:2},v=class v{constructor(F,R,x,o,d){this.operatorList=F[2],this.matrix=F[3]||[1,0,0,1,0,0],this.bbox=F[4],this.xstep=F[5],this.ystep=F[6],this.paintType=F[7],this.tilingType=F[8],this.color=R,this.ctx=x,this.canvasGraphicsFactory=o,this.baseTransform=d}createPatternCanvas(F){const R=this.operatorList,x=this.bbox,o=this.xstep,d=this.ystep,D=this.paintType,y=this.tilingType,l=this.color,M=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+y);const A=x[0],q=x[1],Q=x[2],k=x[3],et=p.Util.singularValueDecompose2dScale(this.matrix),pt=p.Util.singularValueDecompose2dScale(this.baseTransform),vt=[et[0]*pt[0],et[1]*pt[1]],$=this.getSizeAndScale(o,this.ctx.canvas.width,vt[0]),yt=this.getSizeAndScale(d,this.ctx.canvas.height,vt[1]),Tt=F.cachedCanvases.getCanvas("pattern",$.size,yt.size,!0),Nt=Tt.context,Ut=M.createCanvasGraphics(Nt);Ut.groupLevel=F.groupLevel,this.setFillAndStrokeStyleToContext(Ut,D,l);let T=A,i=q,a=Q,s=k;return A<0&&(T=0,a+=Math.abs(A)),q<0&&(i=0,s+=Math.abs(q)),Nt.translate(-($.scale*T),-(yt.scale*i)),Ut.transform($.scale,0,0,yt.scale,0,0),Nt.save(),this.clipBbox(Ut,T,i,a,s),Ut.baseTransform=(0,E.getCurrentTransform)(Ut.ctx),Ut.executeOperatorList(R),Ut.endDrawing(),{canvas:Tt.canvas,scaleX:$.scale,scaleY:yt.scale,offsetX:T,offsetY:i}}getSizeAndScale(F,R,x){F=Math.abs(F);const o=Math.max(v.MAX_PATTERN_SIZE,R);let d=Math.ceil(F*x);return d>=o?d=o:x=d/F,{scale:x,size:d}}clipBbox(F,R,x,o,d){const D=o-R,y=d-x;F.ctx.rect(R,x,D,y),F.current.updateRectMinMax((0,E.getCurrentTransform)(F.ctx),[R,x,o,d]),F.clip(),F.endPath()}setFillAndStrokeStyleToContext(F,R,x){const o=F.ctx,d=F.current;switch(R){case b.COLORED:const D=this.ctx;o.fillStyle=D.fillStyle,o.strokeStyle=D.strokeStyle,d.fillColor=D.fillStyle,d.strokeColor=D.strokeStyle;break;case b.UNCOLORED:const y=p.Util.makeHexColor(x[0],x[1],x[2]);o.fillStyle=y,o.strokeStyle=y,d.fillColor=y,d.strokeColor=y;break;default:throw new p.FormatError(`Unsupported paint type: ${R}`)}}getPattern(F,R,x,o){let d=x;o!==t.SHADING&&(d=p.Util.transform(d,R.baseTransform),this.matrix&&(d=p.Util.transform(d,this.matrix)));const D=this.createPatternCanvas(R);let y=new DOMMatrix(d);y=y.translate(D.offsetX,D.offsetY),y=y.scale(1/D.scaleX,1/D.scaleY);const l=F.createPattern(D.canvas,"repeat");return l.setTransform(y),l}};Je(v,"MAX_PATTERN_SIZE",3e3);let w=v;m.TilingPattern=w},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.convertBlackAndWhiteToRGBA=t,m.convertToRGBA=E,m.grayToRGBA=Ct;var p=mt(1);function E(G){switch(G.kind){case p.ImageKind.GRAYSCALE_1BPP:return t(G);case p.ImageKind.RGB_24BPP:return Z(G)}return null}function t({src:G,srcPos:L=0,dest:u,width:H,height:B,nonBlackColor:P=4294967295,inverseDecode:b=!1}){const w=p.FeatureTest.isLittleEndian?4278190080:255,[v,C]=b?[P,w]:[w,P],F=H>>3,R=H&7,x=G.length;u=new Uint32Array(u.buffer);let o=0;for(let d=0;d<B;d++){for(const y=L+F;L<y;L++){const l=L<x?G[L]:255;u[o++]=l&128?C:v,u[o++]=l&64?C:v,u[o++]=l&32?C:v,u[o++]=l&16?C:v,u[o++]=l&8?C:v,u[o++]=l&4?C:v,u[o++]=l&2?C:v,u[o++]=l&1?C:v}if(R===0)continue;const D=L<x?G[L++]:255;for(let y=0;y<R;y++)u[o++]=D&1<<7-y?C:v}return{srcPos:L,destPos:o}}function Z({src:G,srcPos:L=0,dest:u,destPos:H=0,width:B,height:P}){let b=0;const w=G.length>>2,v=new Uint32Array(G.buffer,L,w);if(p.FeatureTest.isLittleEndian){for(;b<w-2;b+=3,H+=4){const C=v[b],F=v[b+1],R=v[b+2];u[H]=C|4278190080,u[H+1]=C>>>24|F<<8|4278190080,u[H+2]=F>>>16|R<<16|4278190080,u[H+3]=R>>>8|4278190080}for(let C=b*4,F=G.length;C<F;C+=3)u[H++]=G[C]|G[C+1]<<8|G[C+2]<<16|4278190080}else{for(;b<w-2;b+=3,H+=4){const C=v[b],F=v[b+1],R=v[b+2];u[H]=C|255,u[H+1]=C<<24|F>>>8|255,u[H+2]=F<<16|R>>>16|255,u[H+3]=R<<8|255}for(let C=b*4,F=G.length;C<F;C+=3)u[H++]=G[C]<<24|G[C+1]<<16|G[C+2]<<8|255}return{srcPos:L,destPos:H}}function Ct(G,L){if(p.FeatureTest.isLittleEndian)for(let u=0,H=G.length;u<H;u++)L[u]=G[u]*65793|4278190080;else for(let u=0,H=G.length;u<H;u++)L[u]=G[u]*16843008|255}},(f,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GlobalWorkerOptions=void 0;const mt=Object.create(null);m.GlobalWorkerOptions=mt,mt.workerPort=null,mt.workerSrc=""},(f,m,mt)=>{var G,Ur,u,Wr,B,di;Object.defineProperty(m,"__esModule",{value:!0}),m.MessageHandler=void 0;var p=mt(1);const E={UNKNOWN:0,DATA:1,ERROR:2},t={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Z(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new p.AbortException(b.message);case"MissingPDFException":return new p.MissingPDFException(b.message);case"PasswordException":return new p.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new p.UnknownErrorException(b.message,b.details);default:return new p.UnknownErrorException(b.message,b.toString())}}class Ct{constructor(w,v,C){U(this,G);U(this,u);U(this,B);this.sourceName=w,this.targetName=v,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=F=>{const R=F.data;if(R.targetName!==this.sourceName)return;if(R.stream){tt(this,u,Wr).call(this,R);return}if(R.callback){const o=R.callbackId,d=this.callbackCapabilities[o];if(!d)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],R.callback===E.DATA)d.resolve(R.data);else if(R.callback===E.ERROR)d.reject(Z(R.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[R.action];if(!x)throw new Error(`Unknown action from worker: ${R.action}`);if(R.callbackId){const o=this.sourceName,d=R.sourceName;new Promise(function(D){D(x(R.data))}).then(function(D){C.postMessage({sourceName:o,targetName:d,callback:E.DATA,callbackId:R.callbackId,data:D})},function(D){C.postMessage({sourceName:o,targetName:d,callback:E.ERROR,callbackId:R.callbackId,reason:Z(D)})});return}if(R.streamId){tt(this,G,Ur).call(this,R);return}x(R.data)},C.addEventListener("message",this._onComObjOnMessage)}on(w,v){const C=this.actionHandler;if(C[w])throw new Error(`There is already an actionName called "${w}"`);C[w]=v}send(w,v,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,data:v},C)}sendWithPromise(w,v,C){const F=this.callbackId++,R=new p.PromiseCapability;this.callbackCapabilities[F]=R;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,callbackId:F,data:v},C)}catch(x){R.reject(x)}return R.promise}sendWithStream(w,v,C,F){const R=this.streamId++,x=this.sourceName,o=this.targetName,d=this.comObj;return new ReadableStream({start:D=>{const y=new p.PromiseCapability;return this.streamControllers[R]={controller:D,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:x,targetName:o,action:w,streamId:R,data:v,desiredSize:D.desiredSize},F),y.promise},pull:D=>{const y=new p.PromiseCapability;return this.streamControllers[R].pullCall=y,d.postMessage({sourceName:x,targetName:o,stream:t.PULL,streamId:R,desiredSize:D.desiredSize}),y.promise},cancel:D=>{(0,p.assert)(D instanceof Error,"cancel must have a valid reason");const y=new p.PromiseCapability;return this.streamControllers[R].cancelCall=y,this.streamControllers[R].isClosed=!0,d.postMessage({sourceName:x,targetName:o,stream:t.CANCEL,streamId:R,reason:Z(D)}),y.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}G=new WeakSet,Ur=function(w){const v=w.streamId,C=this.sourceName,F=w.sourceName,R=this.comObj,x=this,o=this.actionHandler[w.action],d={enqueue(D,y=1,l){if(this.isCancelled)return;const M=this.desiredSize;this.desiredSize-=y,M>0&&this.desiredSize<=0&&(this.sinkCapability=new p.PromiseCapability,this.ready=this.sinkCapability.promise),R.postMessage({sourceName:C,targetName:F,stream:t.ENQUEUE,streamId:v,chunk:D},l)},close(){this.isCancelled||(this.isCancelled=!0,R.postMessage({sourceName:C,targetName:F,stream:t.CLOSE,streamId:v}),delete x.streamSinks[v])},error(D){(0,p.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,R.postMessage({sourceName:C,targetName:F,stream:t.ERROR,streamId:v,reason:Z(D)}))},sinkCapability:new p.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:w.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[v]=d,new Promise(function(D){D(o(w.data,d))}).then(function(){R.postMessage({sourceName:C,targetName:F,stream:t.START_COMPLETE,streamId:v,success:!0})},function(D){R.postMessage({sourceName:C,targetName:F,stream:t.START_COMPLETE,streamId:v,reason:Z(D)})})},u=new WeakSet,Wr=function(w){const v=w.streamId,C=this.sourceName,F=w.sourceName,R=this.comObj,x=this.streamControllers[v],o=this.streamSinks[v];switch(w.stream){case t.START_COMPLETE:w.success?x.startCall.resolve():x.startCall.reject(Z(w.reason));break;case t.PULL_COMPLETE:w.success?x.pullCall.resolve():x.pullCall.reject(Z(w.reason));break;case t.PULL:if(!o){R.postMessage({sourceName:C,targetName:F,stream:t.PULL_COMPLETE,streamId:v,success:!0});break}o.desiredSize<=0&&w.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=w.desiredSize,new Promise(function(d){var D;d((D=o.onPull)==null?void 0:D.call(o))}).then(function(){R.postMessage({sourceName:C,targetName:F,stream:t.PULL_COMPLETE,streamId:v,success:!0})},function(d){R.postMessage({sourceName:C,targetName:F,stream:t.PULL_COMPLETE,streamId:v,reason:Z(d)})});break;case t.ENQUEUE:if((0,p.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(w.chunk);break;case t.CLOSE:if((0,p.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),tt(this,B,di).call(this,x,v);break;case t.ERROR:(0,p.assert)(x,"error should have stream controller"),x.controller.error(Z(w.reason)),tt(this,B,di).call(this,x,v);break;case t.CANCEL_COMPLETE:w.success?x.cancelCall.resolve():x.cancelCall.reject(Z(w.reason)),tt(this,B,di).call(this,x,v);break;case t.CANCEL:if(!o)break;new Promise(function(d){var D;d((D=o.onCancel)==null?void 0:D.call(o,Z(w.reason)))}).then(function(){R.postMessage({sourceName:C,targetName:F,stream:t.CANCEL_COMPLETE,streamId:v,success:!0})},function(d){R.postMessage({sourceName:C,targetName:F,stream:t.CANCEL_COMPLETE,streamId:v,reason:Z(d)})}),o.sinkCapability.reject(Z(w.reason)),o.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}},B=new WeakSet,di=async function(w,v){var C,F,R;await Promise.allSettled([(C=w.startCall)==null?void 0:C.promise,(F=w.pullCall)==null?void 0:F.promise,(R=w.cancelCall)==null?void 0:R.promise]),delete this.streamControllers[v]},m.MessageHandler=Ct},(f,m,mt)=>{var t,Z;Object.defineProperty(m,"__esModule",{value:!0}),m.Metadata=void 0;var p=mt(1);class E{constructor({parsedData:G,rawData:L}){U(this,t,void 0);U(this,Z,void 0);ft(this,t,G),ft(this,Z,L)}getRaw(){return e(this,Z)}get(G){return e(this,t).get(G)??null}getAll(){return(0,p.objectFromMap)(e(this,t))}has(G){return e(this,t).has(G)}}t=new WeakMap,Z=new WeakMap,m.Metadata=E},(f,m,mt)=>{var G,L,u,H,B,P,Ki;Object.defineProperty(m,"__esModule",{value:!0}),m.OptionalContentConfig=void 0;var p=mt(1),E=mt(8);const t=Symbol("INTERNAL");class Z{constructor(v,C){U(this,G,!0);this.name=v,this.intent=C}get visible(){return e(this,G)}_setVisible(v,C){v!==t&&(0,p.unreachable)("Internal method `_setVisible` called."),ft(this,G,C)}}G=new WeakMap;class Ct{constructor(v){U(this,P);U(this,L,null);U(this,u,new Map);U(this,H,null);U(this,B,null);if(this.name=null,this.creator=null,v!==null){this.name=v.name,this.creator=v.creator,ft(this,B,v.order);for(const C of v.groups)e(this,u).set(C.id,new Z(C.name,C.intent));if(v.baseState==="OFF")for(const C of e(this,u).values())C._setVisible(t,!1);for(const C of v.on)e(this,u).get(C)._setVisible(t,!0);for(const C of v.off)e(this,u).get(C)._setVisible(t,!1);ft(this,H,this.getHash())}}isVisible(v){if(e(this,u).size===0)return!0;if(!v)return(0,p.warn)("Optional content group not defined."),!0;if(v.type==="OCG")return e(this,u).has(v.id)?e(this,u).get(v.id).visible:((0,p.warn)(`Optional content group not found: ${v.id}`),!0);if(v.type==="OCMD"){if(v.expression)return tt(this,P,Ki).call(this,v.expression);if(!v.policy||v.policy==="AnyOn"){for(const C of v.ids){if(!e(this,u).has(C))return(0,p.warn)(`Optional content group not found: ${C}`),!0;if(e(this,u).get(C).visible)return!0}return!1}else if(v.policy==="AllOn"){for(const C of v.ids){if(!e(this,u).has(C))return(0,p.warn)(`Optional content group not found: ${C}`),!0;if(!e(this,u).get(C).visible)return!1}return!0}else if(v.policy==="AnyOff"){for(const C of v.ids){if(!e(this,u).has(C))return(0,p.warn)(`Optional content group not found: ${C}`),!0;if(!e(this,u).get(C).visible)return!0}return!1}else if(v.policy==="AllOff"){for(const C of v.ids){if(!e(this,u).has(C))return(0,p.warn)(`Optional content group not found: ${C}`),!0;if(e(this,u).get(C).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${v.policy}.`),!0}return(0,p.warn)(`Unknown group type ${v.type}.`),!0}setVisibility(v,C=!0){if(!e(this,u).has(v)){(0,p.warn)(`Optional content group not found: ${v}`);return}e(this,u).get(v)._setVisible(t,!!C),ft(this,L,null)}get hasInitialVisibility(){return e(this,H)===null||this.getHash()===e(this,H)}getOrder(){return e(this,u).size?e(this,B)?e(this,B).slice():[...e(this,u).keys()]:null}getGroups(){return e(this,u).size>0?(0,p.objectFromMap)(e(this,u)):null}getGroup(v){return e(this,u).get(v)||null}getHash(){if(e(this,L)!==null)return e(this,L);const v=new E.MurmurHash3_64;for(const[C,F]of e(this,u))v.update(`${C}:${F.visible}`);return ft(this,L,v.hexdigest())}}L=new WeakMap,u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakSet,Ki=function(v){const C=v.length;if(C<2)return!0;const F=v[0];for(let R=1;R<C;R++){const x=v[R];let o;if(Array.isArray(x))o=tt(this,P,Ki).call(this,x);else if(e(this,u).has(x))o=e(this,u).get(x).visible;else return(0,p.warn)(`Optional content group not found: ${x}`),!0;switch(F){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return F==="And"},m.OptionalContentConfig=Ct},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFDataTransportStream=void 0;var p=mt(1),E=mt(6);class t{constructor({length:L,initialData:u,progressiveDone:H=!1,contentDispositionFilename:B=null,disableRange:P=!1,disableStream:b=!1},w){if((0,p.assert)(w,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=H,this._contentDispositionFilename=B,(u==null?void 0:u.length)>0){const v=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=w,this._isStreamingSupported=!b,this._isRangeSupported=!P,this._contentLength=L,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,C)=>{this._onReceiveData({begin:v,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((v,C)=>{this._onProgress({loaded:v,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:L,chunk:u}){const H=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;if(L===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(H):this._queuedChunks.push(H);else{const B=this._rangeReaders.some(function(P){return P._begin!==L?!1:(P._enqueue(H),!0)});(0,p.assert)(B,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var L;return((L=this._fullRequestReader)==null?void 0:L._loaded)??0}_onProgress(L){var u,H,B,P;L.total===void 0?(H=(u=this._rangeReaders[0])==null?void 0:u.onProgress)==null||H.call(u,{loaded:L.loaded}):(P=(B=this._fullRequestReader)==null?void 0:B.onProgress)==null||P.call(B,{loaded:L.loaded,total:L.total})}_onProgressiveDone(){var L;(L=this._fullRequestReader)==null||L.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(L){const u=this._rangeReaders.indexOf(L);u>=0&&this._rangeReaders.splice(u,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const L=this._queuedChunks;return this._queuedChunks=null,new Z(this,L,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(L,u){if(u<=this._progressiveDataLength)return null;const H=new Ct(this,L,u);return this._pdfDataRangeTransport.requestDataRange(L,u),this._rangeReaders.push(H),H}cancelAllRequests(L){var u;(u=this._fullRequestReader)==null||u.cancel(L);for(const H of this._rangeReaders.slice(0))H.cancel(L);this._pdfDataRangeTransport.abort()}}m.PDFDataTransportStream=t;class Z{constructor(L,u,H=!1,B=null){this._stream=L,this._done=H||!1,this._filename=(0,E.isPdfFile)(B)?B:null,this._queuedChunks=u||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),L._fullRequestReader=this,this.onProgress=null}_enqueue(L){this._done||(this._requests.length>0?this._requests.shift().resolve({value:L,done:!1}):this._queuedChunks.push(L),this._loaded+=L.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const L=new p.PromiseCapability;return this._requests.push(L),L.promise}cancel(L){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ct{constructor(L,u,H){this._stream=L,this._begin=u,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(L){if(!this._done){if(this._requests.length===0)this._queuedChunk=L;else{this._requests.shift().resolve({value:L,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const L=new p.PromiseCapability;return this._requests.push(L),L.promise}cancel(L){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFFetchStream=void 0;var p=mt(1),E=mt(20);function t(H,B,P){return{method:"GET",headers:H,signal:P.signal,mode:"cors",credentials:B?"include":"same-origin",redirect:"follow"}}function Z(H){const B=new Headers;for(const P in H){const b=H[P];b!==void 0&&B.append(P,b)}return B}function Ct(H){return H instanceof Uint8Array?H.buffer:H instanceof ArrayBuffer?H:((0,p.warn)(`getArrayBuffer - unexpected data format: ${H}`),new Uint8Array(H).buffer)}class G{constructor(B){this.source=B,this.isHttp=/^https?:/i.test(B.url),this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new L(this),this._fullRequestReader}getRangeReader(B,P){if(P<=this._progressiveDataLength)return null;const b=new u(this,B,P);return this._rangeRequestReaders.push(b),b}cancelAllRequests(B){var P;(P=this._fullRequestReader)==null||P.cancel(B);for(const b of this._rangeRequestReaders.slice(0))b.cancel(B)}}m.PDFFetchStream=G;class L{constructor(B){this._stream=B,this._reader=null,this._loaded=0,this._filename=null;const P=B.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=new p.PromiseCapability,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=Z(this._stream.httpHeaders);const b=P.url;fetch(b,t(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,E.validateResponseStatus)(w.status))throw(0,E.createResponseStatusError)(w.status,b);this._reader=w.body.getReader(),this._headersCapability.resolve();const v=R=>w.headers.get(R),{allowRangeRequests:C,suggestedLength:F}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=F||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._headersCapability.promise;const{value:B,done:P}=await this._reader.read();return P?{value:B,done:P}:(this._loaded+=B.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Ct(B),done:!1})}cancel(B){var P;(P=this._reader)==null||P.cancel(B),this._abortController.abort()}}class u{constructor(B,P,b){this._stream=B,this._reader=null,this._loaded=0;const w=B.source;this._withCredentials=w.withCredentials||!1,this._readCapability=new p.PromiseCapability,this._isStreamingSupported=!w.disableStream,this._abortController=new AbortController,this._headers=Z(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${b-1}`);const v=w.url;fetch(v,t(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,E.validateResponseStatus)(C.status))throw(0,E.createResponseStatusError)(C.status,v);this._readCapability.resolve(),this._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;await this._readCapability.promise;const{value:B,done:P}=await this._reader.read();return P?{value:B,done:P}:(this._loaded+=B.byteLength,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:Ct(B),done:!1})}cancel(B){var P;(P=this._reader)==null||P.cancel(B),this._abortController.abort()}}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.createResponseStatusError=G,m.extractFilenameFromHeader=Ct,m.validateRangeRequestCapabilities=Z,m.validateResponseStatus=L;var p=mt(1),E=mt(21),t=mt(6);function Z({getResponseHeader:u,isHttp:H,rangeChunkSize:B,disableRange:P}){const b={allowRangeRequests:!1,suggestedLength:void 0},w=parseInt(u("Content-Length"),10);return!Number.isInteger(w)||(b.suggestedLength=w,w<=2*B)||P||!H||u("Accept-Ranges")!=="bytes"||(u("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function Ct(u){const H=u("Content-Disposition");if(H){let B=(0,E.getFilenameFromContentDispositionHeader)(H);if(B.includes("%"))try{B=decodeURIComponent(B)}catch{}if((0,t.isPdfFile)(B))return B}return null}function G(u,H){return u===404||u===0&&H.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+H+'".'):new p.UnexpectedResponseException(`Unexpected server response (${u}) while retrieving PDF "${H}".`,u)}function L(u){return u===200||u===206}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.getFilenameFromContentDispositionHeader=E;var p=mt(1);function E(t){let Z=!0,Ct=G("filename\\*","i").exec(t);if(Ct){Ct=Ct[1];let w=B(Ct);return w=unescape(w),w=P(w),w=b(w),u(w)}if(Ct=H(t),Ct){const w=b(Ct);return u(w)}if(Ct=G("filename","i").exec(t),Ct){Ct=Ct[1];let w=B(Ct);return w=b(w),u(w)}function G(w,v){return new RegExp("(?:^|;)\\s*"+w+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function L(w,v){if(w){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const C=new TextDecoder(w,{fatal:!0}),F=(0,p.stringToBytes)(v);v=C.decode(F),Z=!1}catch{}}return v}function u(w){return Z&&/[\x80-\xff]/.test(w)&&(w=L("utf-8",w),Z&&(w=L("iso-8859-1",w))),w}function H(w){const v=[];let C;const F=G("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=F.exec(w))!==null;){let[,x,o,d]=C;if(x=parseInt(x,10),x in v){if(x===0)break;continue}v[x]=[o,d]}const R=[];for(let x=0;x<v.length&&x in v;++x){let[o,d]=v[x];d=B(d),o&&(d=unescape(d),x===0&&(d=P(d))),R.push(d)}return R.join("")}function B(w){if(w.startsWith('"')){const v=w.slice(1).split('\\"');for(let C=0;C<v.length;++C){const F=v[C].indexOf('"');F!==-1&&(v[C]=v[C].slice(0,F),v.length=C+1),v[C]=v[C].replaceAll(/\\(.)/g,"$1")}w=v.join('"')}return w}function P(w){const v=w.indexOf("'");if(v===-1)return w;const C=w.slice(0,v),R=w.slice(v+1).replace(/^[^']*'/,"");return L(C,R)}function b(w){return!w.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(w)?w:w.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,C,F,R){if(F==="q"||F==="Q")return R=R.replaceAll("_"," "),R=R.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,o){return String.fromCharCode(parseInt(o,16))}),L(C,R);try{R=atob(R)}catch{}return L(C,R)})}return""}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNetworkStream=void 0;var p=mt(1),E=mt(20);const t=200,Z=206;function Ct(B){const P=B.response;return typeof P!="string"?P:(0,p.stringToBytes)(P).buffer}class G{constructor(P,b={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,b,w){const v={begin:P,end:b};for(const C in w)v[C]=w[C];return this.request(v)}requestFull(P){return this.request(P)}request(P){const b=new XMLHttpRequest,w=this.currXhrId++,v=this.pendingRequests[w]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const F=this.httpHeaders[C];F!==void 0&&b.setRequestHeader(C,F)}return this.isHttp&&"begin"in P&&"end"in P?(b.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),v.expectedStatus=Z):v.expectedStatus=t,b.responseType="arraybuffer",P.onError&&(b.onerror=function(C){P.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,w),b.onprogress=this.onProgress.bind(this,w),v.onHeadersReceived=P.onHeadersReceived,v.onDone=P.onDone,v.onError=P.onError,v.onProgress=P.onProgress,b.send(null),w}onProgress(P,b){var v;const w=this.pendingRequests[P];w&&((v=w.onProgress)==null||v.call(w,b))}onStateChange(P,b){var x,o,d;const w=this.pendingRequests[P];if(!w)return;const v=w.xhr;if(v.readyState>=2&&w.onHeadersReceived&&(w.onHeadersReceived(),delete w.onHeadersReceived),v.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],v.status===0&&this.isHttp){(x=w.onError)==null||x.call(w,v.status);return}const C=v.status||t;if(!(C===t&&w.expectedStatus===Z)&&C!==w.expectedStatus){(o=w.onError)==null||o.call(w,v.status);return}const R=Ct(v);if(C===Z){const D=v.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);w.onDone({begin:parseInt(y[1],10),chunk:R})}else R?w.onDone({begin:0,chunk:R}):(d=w.onError)==null||d.call(w,v.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const b=this.pendingRequests[P].xhr;delete this.pendingRequests[P],b.abort()}}class L{constructor(P){this._source=P,this._manager=new G(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const b=this._rangeRequestReaders.indexOf(P);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u(this._manager,this._source),this._fullRequestReader}getRangeReader(P,b){const w=new H(this._manager,P,b);return w.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(w),w}cancelAllRequests(P){var b;(b=this._fullRequestReader)==null||b.cancel(P);for(const w of this._rangeRequestReaders.slice(0))w.cancel(P)}}m.PDFNetworkStream=L;class u{constructor(P,b){this._manager=P;const w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=P.requestFull(w),this._headersReceivedCapability=new p.PromiseCapability,this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,b=this._manager.getRequestXhr(P),w=F=>b.getResponseHeader(F),{allowRangeRequests:v,suggestedLength:C}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(w),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,E.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var b;(b=this.onProgress)==null||b.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new p.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(P,b,w){this._manager=P;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(b,w,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const b=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,E.createResponseStatusError)(P,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var b;this.isStreamingSupported||(b=this.onProgress)==null||b.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new p.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNodeStream=void 0;var p=mt(1),E=mt(20);const t=/^file:\/\/\/[a-zA-Z]:\//;function Z(w){const v=require$$5,C=v.parse(w);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(w)?v.parse(`file:///${w}`):(C.host||(C.protocol="file:"),C)}class Ct{constructor(v){this.source=v,this.url=Z(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new H(this),this._fullRequestReader}getRangeReader(v,C){if(C<=this._progressiveDataLength)return null;const F=this.isFsUrl?new b(this,v,C):new B(this,v,C);return this._rangeRequestReaders.push(F),F}cancelAllRequests(v){var C;(C=this._fullRequestReader)==null||C.cancel(v);for(const F of this._rangeRequestReaders.slice(0))F.cancel(v)}}m.PDFNodeStream=Ct;class G{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const C=v.source;this._contentLength=C.length,this._loaded=0,this._filename=null,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._readableStream=null,this._readCapability=new p.PromiseCapability,this._headersCapability=new p.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new p.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",C=>{this._error(C)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class L{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new p.PromiseCapability;const C=v.source;this._isStreamingSupported=!C.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new p.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",C=>{this._error(C)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function u(w,v){return{protocol:w.protocol,auth:w.auth,host:w.hostname,port:w.port,path:w.path,method:"GET",headers:v}}class H extends G{constructor(v){super(v);const C=F=>{if(F.statusCode===404){const d=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(F);const R=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:x,suggestedLength:o}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=o||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(R)};if(this._request=null,this._url.protocol==="http:"){const F=require$$5;this._request=F.request(u(this._url,v.httpHeaders),C)}else{const F=require$$5;this._request=F.request(u(this._url,v.httpHeaders),C)}this._request.on("error",F=>{this._storedError=F,this._headersCapability.reject(F)}),this._request.end()}}class B extends L{constructor(v,C,F){super(v),this._httpHeaders={};for(const x in v.httpHeaders){const o=v.httpHeaders[x];o!==void 0&&(this._httpHeaders[x]=o)}this._httpHeaders.Range=`bytes=${C}-${F-1}`;const R=x=>{if(x.statusCode===404){const o=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(u(this._url,this._httpHeaders),R)}else{const x=require$$5;this._request=x.request(u(this._url,this._httpHeaders),R)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class P extends G{constructor(v){super(v);let C=decodeURIComponent(this._url.path);t.test(this._url.href)&&(C=C.replace(/^\//,""));const F=require$$5;F.lstat(C,(R,x)=>{if(R){R.code==="ENOENT"&&(R=new p.MissingPDFException(`Missing PDF "${C}".`)),this._storedError=R,this._headersCapability.reject(R);return}this._contentLength=x.size,this._setReadableStream(F.createReadStream(C)),this._headersCapability.resolve()})}}class b extends L{constructor(v,C,F){super(v);let R=decodeURIComponent(this._url.path);t.test(this._url.href)&&(R=R.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(R,{start:C,end:F-1}))}}},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SVGGraphics=void 0;var p=mt(6),E=mt(1);const t={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Z="http://www.w3.org/XML/1998/namespace",Ct="http://www.w3.org/1999/xlink",G=["butt","round","square"],L=["miter","round","bevel"],u=function(x,o="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([x],{type:o}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${o};base64,`;for(let l=0,M=x.length;l<M;l+=3){const A=x[l]&255,q=x[l+1]&255,Q=x[l+2]&255,k=A>>2,et=(A&3)<<4|q>>4,pt=l+1<M?(q&15)<<2|Q>>6:64,vt=l+2<M?Q&63:64;y+=D[k]+D[et]+D[pt]+D[vt]}return y},H=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,d=new Int32Array(256);for(let Q=0;Q<256;Q++){let k=Q;for(let et=0;et<8;et++)k=k&1?3988292384^k>>1&2147483647:k>>1&2147483647;d[Q]=k}function D(Q,k,et){let pt=-1;for(let vt=k;vt<et;vt++){const $=(pt^Q[vt])&255,yt=d[$];pt=pt>>>8^yt}return pt^-1}function y(Q,k,et,pt){let vt=pt;const $=k.length;et[vt]=$>>24&255,et[vt+1]=$>>16&255,et[vt+2]=$>>8&255,et[vt+3]=$&255,vt+=4,et[vt]=Q.charCodeAt(0)&255,et[vt+1]=Q.charCodeAt(1)&255,et[vt+2]=Q.charCodeAt(2)&255,et[vt+3]=Q.charCodeAt(3)&255,vt+=4,et.set(k,vt),vt+=k.length;const yt=D(et,pt+4,vt);et[vt]=yt>>24&255,et[vt+1]=yt>>16&255,et[vt+2]=yt>>8&255,et[vt+3]=yt&255}function l(Q,k,et){let pt=1,vt=0;for(let $=k;$<et;++$)pt=(pt+(Q[$]&255))%65521,vt=(vt+pt)%65521;return vt<<16|pt}function M(Q){if(!E.isNodeJS)return A(Q);try{const k=parseInt(process.versions.node)>=8?Q:Buffer.from(Q),et=require$$5.deflateSync(k,{level:9});return et instanceof Uint8Array?et:new Uint8Array(et)}catch(k){(0,E.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+k)}return A(Q)}function A(Q){let k=Q.length;const et=65535,pt=Math.ceil(k/et),vt=new Uint8Array(2+k+pt*5+4);let $=0;vt[$++]=120,vt[$++]=156;let yt=0;for(;k>et;)vt[$++]=0,vt[$++]=255,vt[$++]=255,vt[$++]=0,vt[$++]=0,vt.set(Q.subarray(yt,yt+et),$),$+=et,yt+=et,k-=et;vt[$++]=1,vt[$++]=k&255,vt[$++]=k>>8&255,vt[$++]=~k&65535&255,vt[$++]=(~k&65535)>>8&255,vt.set(Q.subarray(yt),$),$+=Q.length-yt;const Tt=l(Q,0,Q.length);return vt[$++]=Tt>>24&255,vt[$++]=Tt>>16&255,vt[$++]=Tt>>8&255,vt[$++]=Tt&255,vt}function q(Q,k,et,pt){const vt=Q.width,$=Q.height;let yt,Tt,Nt;const Ut=Q.data;switch(k){case E.ImageKind.GRAYSCALE_1BPP:Tt=0,yt=1,Nt=vt+7>>3;break;case E.ImageKind.RGB_24BPP:Tt=2,yt=8,Nt=vt*3;break;case E.ImageKind.RGBA_32BPP:Tt=6,yt=8,Nt=vt*4;break;default:throw new Error("invalid format")}const T=new Uint8Array((1+Nt)*$);let i=0,a=0;for(let z=0;z<$;++z)T[i++]=0,T.set(Ut.subarray(a,a+Nt),i),a+=Nt,i+=Nt;if(k===E.ImageKind.GRAYSCALE_1BPP&&pt){i=0;for(let z=0;z<$;z++){i++;for(let dt=0;dt<Nt;dt++)T[i++]^=255}}const s=new Uint8Array([vt>>24&255,vt>>16&255,vt>>8&255,vt&255,$>>24&255,$>>16&255,$>>8&255,$&255,yt,Tt,0,0,0]),c=M(T),h=x.length+o*3+s.length+c.length,S=new Uint8Array(h);let I=0;return S.set(x,I),I+=x.length,y("IHDR",s,S,I),I+=o+s.length,y("IDATA",c,S,I),I+=o+c.length,y("IEND",new Uint8Array(0),S,I),u(S,"image/png",et)}return function(k,et,pt){const vt=k.kind===void 0?E.ImageKind.GRAYSCALE_1BPP:k.kind;return q(k,vt,et,pt)}}();class B{constructor(){this.fontSizeScale=1,this.fontWeight=t.fontWeight,this.fontSize=0,this.textMatrix=E.IDENTITY_MATRIX,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=E.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=t.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,d){this.x=o,this.y=d}}function P(x){let o=[];const d=[];for(const D of x){if(D.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),d.push(o),o=o.at(-1).items;continue}D.fn==="restore"?o=d.pop():o.push(D)}return o}function b(x){if(Number.isInteger(x))return x.toString();const o=x.toFixed(10);let d=o.length-1;if(o[d]!=="0")return o;do d--;while(o[d]==="0");return o.substring(0,o[d]==="."?d:d+1)}function w(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${b(x[0])} ${b(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const o=Math.acos(x[0])*180/Math.PI;return`rotate(${b(o)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${b(x[4])} ${b(x[5])})`;return`matrix(${b(x[0])} ${b(x[1])} ${b(x[2])} ${b(x[3])} ${b(x[4])} ${b(x[5])})`}let v=0,C=0,F=0;class R{constructor(o,d,D=!1){(0,p.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new p.DOMSVGFactory,this.current=new B,this.transformMatrix=E.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const y in E.OPS)this._operatorIdMapping[E.OPS[y]]=y}getObject(o,d=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):d}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const d=o.fnArray,D=o.argsArray;for(let y=0,l=d.length;y<l;y++)if(d[y]===E.OPS.dependency)for(const M of D[y]){const A=M.startsWith("g_")?this.commonObjs:this.objs,q=new Promise(Q=>{A.get(M,Q)});this.current.dependencies.push(q)}return Promise.all(this.current.dependencies)}transform(o,d,D,y,l,M){const A=[o,d,D,y,l,M];this.transformMatrix=E.Util.transform(this.transformMatrix,A),this.tgrp=null}getSVG(o,d){this.viewport=d;const D=this._initialize(d);return this.loadDependencies(o).then(()=>(this.transformMatrix=E.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),D))}convertOpList(o){const d=this._operatorIdMapping,D=o.argsArray,y=o.fnArray,l=[];for(let M=0,A=y.length;M<A;M++){const q=y[M];l.push({fnId:q,fn:d[q],args:D[M]})}return P(l)}executeOpTree(o){for(const d of o){const D=d.fn,y=d.fnId,l=d.args;switch(y|0){case E.OPS.beginText:this.beginText();break;case E.OPS.dependency:break;case E.OPS.setLeading:this.setLeading(l);break;case E.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case E.OPS.setFont:this.setFont(l);break;case E.OPS.showText:this.showText(l[0]);break;case E.OPS.showSpacedText:this.showText(l[0]);break;case E.OPS.endText:this.endText();break;case E.OPS.moveText:this.moveText(l[0],l[1]);break;case E.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case E.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case E.OPS.setHScale:this.setHScale(l[0]);break;case E.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case E.OPS.setTextRise:this.setTextRise(l[0]);break;case E.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case E.OPS.setLineWidth:this.setLineWidth(l[0]);break;case E.OPS.setLineJoin:this.setLineJoin(l[0]);break;case E.OPS.setLineCap:this.setLineCap(l[0]);break;case E.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case E.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case E.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case E.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case E.OPS.setFillColorN:this.setFillColorN(l);break;case E.OPS.shadingFill:this.shadingFill(l[0]);break;case E.OPS.setDash:this.setDash(l[0],l[1]);break;case E.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case E.OPS.setFlatness:this.setFlatness(l[0]);break;case E.OPS.setGState:this.setGState(l[0]);break;case E.OPS.fill:this.fill();break;case E.OPS.eoFill:this.eoFill();break;case E.OPS.stroke:this.stroke();break;case E.OPS.fillStroke:this.fillStroke();break;case E.OPS.eoFillStroke:this.eoFillStroke();break;case E.OPS.clip:this.clip("nonzero");break;case E.OPS.eoClip:this.clip("evenodd");break;case E.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case E.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case E.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case E.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case E.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.OPS.closePath:this.closePath();break;case E.OPS.closeStroke:this.closeStroke();break;case E.OPS.closeFillStroke:this.closeFillStroke();break;case E.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case E.OPS.nextLine:this.nextLine();break;case E.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case E.OPS.constructPath:this.constructPath(l[0],l[1]);break;case E.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,E.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,d,D,y,l,M){const A=this.current;A.textMatrix=A.lineMatrix=[o,d,D,y,l,M],A.textMatrixScale=Math.hypot(o,d),A.x=A.lineX=0,A.y=A.lineY=0,A.xcoords=[],A.ycoords=[],A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${b(A.fontSize)}px`),A.tspan.setAttributeNS(null,"y",b(-A.y)),A.txtElement=this.svgFactory.createElement("svg:text"),A.txtElement.append(A.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=E.IDENTITY_MATRIX,o.lineMatrix=E.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,d){const D=this.current;D.x=D.lineX+=o,D.y=D.lineY+=d,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${b(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",b(-D.y))}showText(o){const d=this.current,D=d.font,y=d.fontSize;if(y===0)return;const l=d.fontSizeScale,M=d.charSpacing,A=d.wordSpacing,q=d.fontDirection,Q=d.textHScale*q,k=D.vertical,et=k?1:-1,pt=D.defaultVMetrics,vt=y*d.fontMatrix[0];let $=0;for(const Nt of o){if(Nt===null){$+=q*A;continue}else if(typeof Nt=="number"){$+=et*Nt*y/1e3;continue}const Ut=(Nt.isSpace?A:0)+M,T=Nt.fontChar;let i,a,s=Nt.width;if(k){let h;const S=Nt.vmetric||pt;h=Nt.vmetric?S[1]:s*.5,h=-h*vt;const I=S[2]*vt;s=S?-S[0]:s,i=h/l,a=($+I)/l}else i=$/l,a=0;(Nt.isInFont||D.missingFile)&&(d.xcoords.push(d.x+i),k&&d.ycoords.push(-d.y+a),d.tspan.textContent+=T);const c=k?s*vt-Ut*q:s*vt+Ut*q;$+=c}d.tspan.setAttributeNS(null,"x",d.xcoords.map(b).join(" ")),k?d.tspan.setAttributeNS(null,"y",d.ycoords.map(b).join(" ")):d.tspan.setAttributeNS(null,"y",b(-d.y)),k?d.y-=$:d.x+=$*Q,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${b(d.fontSize)}px`),d.fontStyle!==t.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==t.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const yt=d.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;if(yt===E.TextRenderingMode.FILL||yt===E.TextRenderingMode.FILL_STROKE?(d.fillColor!==t.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===E.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),yt===E.TextRenderingMode.STROKE||yt===E.TextRenderingMode.FILL_STROKE){const Nt=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,Nt)}let Tt=d.textMatrix;d.textRise!==0&&(Tt=Tt.slice(),Tt[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${w(Tt)} scale(${b(Q)}, -1)`),d.txtElement.setAttributeNS(Z,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(o,d){this.setLeading(-d),this.moveText(o,d)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=u(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${d}); }
`}setFont(o){const d=this.current,D=this.commonObjs.get(o[0]);let y=o[1];d.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),d.fontMatrix=D.fontMatrix||E.FONT_IDENTITY_MATRIX;let l="normal";D.black?l="900":D.bold&&(l="bold");const M=D.italic?"italic":"normal";y<0?(y=-y,d.fontDirection=-1):d.fontDirection=1,d.fontSize=y,d.fontFamily=D.loadedName,d.fontWeight=l,d.fontStyle=M,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",b(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const o=this.current;o.textRenderingMode&E.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=o.txtElement)!=null&&d.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=G[o]}setLineJoin(o){this.current.lineJoin=L[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,d,D){this.current.strokeColor=E.Util.makeHexColor(o,d,D)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,d,D){this.current.fillColor=E.Util.makeHexColor(o,d,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:d,height:D}=this.viewport,y=E.Util.inverseTransform(this.transformMatrix),[l,M,A,q]=E.Util.getAxialAlignedBoundingBox([0,0,d,D],y),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",l),Q.setAttributeNS(null,"y",M),Q.setAttributeNS(null,"width",A-l),Q.setAttributeNS(null,"height",q-M),Q.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Q)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const d=o[1],D=o[2],y=o[3]||E.IDENTITY_MATRIX,[l,M,A,q]=o[4],Q=o[5],k=o[6],et=o[7],pt=`shading${F++}`,[vt,$,yt,Tt]=E.Util.normalizeRect([...E.Util.applyTransform([l,M],y),...E.Util.applyTransform([A,q],y)]),[Nt,Ut]=E.Util.singularValueDecompose2dScale(y),T=Q*Nt,i=k*Ut,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",pt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",T),a.setAttributeNS(null,"height",i),a.setAttributeNS(null,"x",`${vt}`),a.setAttributeNS(null,"y",`${$}`);const s=this.svg,c=this.transformMatrix,h=this.current.fillColor,S=this.current.strokeColor,I=this.svgFactory.create(yt-vt,Tt-$);if(this.svg=I,this.transformMatrix=y,et===2){const z=E.Util.makeHexColor(...d);this.current.fillColor=z,this.current.strokeColor=z}return this.executeOpTree(this.convertOpList(D)),this.svg=s,this.transformMatrix=c,this.current.fillColor=h,this.current.strokeColor=S,a.append(I.childNodes[0]),this.defs.append(a),`url(#${pt})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const d=`shading${F++}`,D=o[3];let y;switch(o[1]){case"axial":const l=o[4],M=o[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",d),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",l[0]),y.setAttributeNS(null,"y1",l[1]),y.setAttributeNS(null,"x2",M[0]),y.setAttributeNS(null,"y2",M[1]);break;case"radial":const A=o[4],q=o[5],Q=o[6],k=o[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",d),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",q[0]),y.setAttributeNS(null,"cy",q[1]),y.setAttributeNS(null,"r",k),y.setAttributeNS(null,"fx",A[0]),y.setAttributeNS(null,"fy",A[1]),y.setAttributeNS(null,"fr",Q);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const l of D){const M=this.svgFactory.createElement("svg:stop");M.setAttributeNS(null,"offset",l[0]),M.setAttributeNS(null,"stop-color",l[1]),y.append(M)}return this.defs.append(y),`url(#${d})`;case"Mesh":return(0,E.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,d){this.current.dashArray=o,this.current.dashPhase=d}constructPath(o,d){const D=this.current;let y=D.x,l=D.y,M=[],A=0;for(const q of o)switch(q|0){case E.OPS.rectangle:y=d[A++],l=d[A++];const Q=d[A++],k=d[A++],et=y+Q,pt=l+k;M.push("M",b(y),b(l),"L",b(et),b(l),"L",b(et),b(pt),"L",b(y),b(pt),"Z");break;case E.OPS.moveTo:y=d[A++],l=d[A++],M.push("M",b(y),b(l));break;case E.OPS.lineTo:y=d[A++],l=d[A++],M.push("L",b(y),b(l));break;case E.OPS.curveTo:y=d[A+4],l=d[A+5],M.push("C",b(d[A]),b(d[A+1]),b(d[A+2]),b(d[A+3]),b(y),b(l)),A+=6;break;case E.OPS.curveTo2:M.push("C",b(y),b(l),b(d[A]),b(d[A+1]),b(d[A+2]),b(d[A+3])),y=d[A+2],l=d[A+3],A+=4;break;case E.OPS.curveTo3:y=d[A+2],l=d[A+3],M.push("C",b(d[A]),b(d[A+1]),b(y),b(l),b(y),b(l)),A+=4;break;case E.OPS.closePath:M.push("Z");break}M=M.join(" "),D.path&&o.length>0&&o[0]!==E.OPS.rectangle&&o[0]!==E.OPS.moveTo?M=D.path.getAttributeNS(null,"d")+M:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",M),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(y,l)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const d=`clippath${v++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",d),D.setAttributeNS(null,"transform",w(this.transformMatrix));const y=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(y),this.defs.append(D),o.activeClipUrl){o.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;D.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const d=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",d)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[d,D]of o)switch(d){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,E.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,d=1){const D=this.current;let y=D.dashArray;d!==1&&y.length>0&&(y=y.map(function(l){return d*l})),o.setAttributeNS(null,"stroke",D.strokeColor),o.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",b(D.miterLimit)),o.setAttributeNS(null,"stroke-linecap",D.lineCap),o.setAttributeNS(null,"stroke-linejoin",D.lineJoin),o.setAttributeNS(null,"stroke-width",b(d*D.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",y.map(b).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",b(d*D.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const d=this.getObject(o);if(!d){(0,E.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(o,d){const D=o.width,y=o.height,l=H(o,this.forceDataSchema,!!d),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",b(D)),M.setAttributeNS(null,"height",b(y)),this.current.element=M,this.clip("nonzero");const A=this.svgFactory.createElement("svg:image");A.setAttributeNS(Ct,"xlink:href",l),A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y",b(-y)),A.setAttributeNS(null,"width",b(D)+"px"),A.setAttributeNS(null,"height",b(y)+"px"),A.setAttributeNS(null,"transform",`scale(${b(1/D)} ${b(-1/y)})`),d?d.append(A):this._ensureTransformGroup().append(A)}paintImageMaskXObject(o){const d=this.getObject(o.data,o);if(d.bitmap){(0,E.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,y=d.width,l=d.height,M=D.fillColor;D.maskId=`mask${C++}`;const A=this.svgFactory.createElement("svg:mask");A.setAttributeNS(null,"id",D.maskId);const q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",b(y)),q.setAttributeNS(null,"height",b(l)),q.setAttributeNS(null,"fill",M),q.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(A),this._ensureTransformGroup().append(q),this.paintInlineImageXObject(d,A)}paintFormXObjectBegin(o,d){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),d){const D=d[2]-d[0],y=d[3]-d[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",d[0]),l.setAttributeNS(null,"y",d[1]),l.setAttributeNS(null,"width",b(D)),l.setAttributeNS(null,"height",b(y)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const d=this.svgFactory.create(o.width,o.height),D=this.svgFactory.createElement("svg:defs");d.append(D),this.defs=D;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",w(o.transform)),d.append(y),this.svg=y,d}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",w(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}m.SVGGraphics=R},(f,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaText=void 0;class mt{static textContent(E){const t=[],Z={items:t,styles:Object.create(null)};function Ct(G){var H;if(!G)return;let L=null;const u=G.name;if(u==="#text")L=G.value;else if(mt.shouldBuildText(u))(H=G==null?void 0:G.attributes)!=null&&H.textContent?L=G.attributes.textContent:G.value&&(L=G.value);else return;if(L!==null&&t.push({str:L}),!!G.children)for(const B of G.children)Ct(B)}return Ct(E),Z}static shouldBuildText(E){return!(E==="textarea"||E==="input"||E==="option"||E==="select")}}m.XfaText=mt},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextLayerRenderTask=void 0,m.renderTextLayer=w,m.updateTextLayer=v;var p=mt(1),E=mt(6);const t=1e5,Z=30,Ct=.8,G=new Map;function L(C,F){let R;if(F&&p.FeatureTest.isOffscreenCanvasSupported)R=new OffscreenCanvas(C,C).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=C,R=x.getContext("2d",{alpha:!1})}return R}function u(C,F){const R=G.get(C);if(R)return R;const x=L(Z,F);x.font=`${Z}px ${C}`;const o=x.measureText("");let d=o.fontBoundingBoxAscent,D=Math.abs(o.fontBoundingBoxDescent);if(d){const l=d/(d+D);return G.set(C,l),x.canvas.width=x.canvas.height=0,l}x.strokeStyle="red",x.clearRect(0,0,Z,Z),x.strokeText("g",0,0);let y=x.getImageData(0,0,Z,Z).data;D=0;for(let l=y.length-1-3;l>=0;l-=4)if(y[l]>0){D=Math.ceil(l/4/Z);break}x.clearRect(0,0,Z,Z),x.strokeText("A",0,Z),y=x.getImageData(0,0,Z,Z).data,d=0;for(let l=0,M=y.length;l<M;l+=4)if(y[l]>0){d=Z-Math.floor(l/4/Z);break}if(x.canvas.width=x.canvas.height=0,d){const l=d/(d+D);return G.set(C,l),l}return G.set(C,Ct),Ct}function H(C,F,R){const x=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL,fontSize:0};C._textDivs.push(x);const d=p.Util.transform(C._transform,F.transform);let D=Math.atan2(d[1],d[0]);const y=R[F.fontName];y.vertical&&(D+=Math.PI/2);const l=Math.hypot(d[2],d[3]),M=l*u(y.fontFamily,C._isOffscreenCanvasSupported);let A,q;D===0?(A=d[4],q=d[5]-M):(A=d[4]+M*Math.sin(D),q=d[5]-M*Math.cos(D));const Q="calc(var(--scale-factor)*",k=x.style;C._container===C._rootContainer?(k.left=`${(100*A/C._pageWidth).toFixed(2)}%`,k.top=`${(100*q/C._pageHeight).toFixed(2)}%`):(k.left=`${Q}${A.toFixed(2)}px)`,k.top=`${Q}${q.toFixed(2)}px)`),k.fontSize=`${Q}${l.toFixed(2)}px)`,k.fontFamily=y.fontFamily,o.fontSize=l,x.setAttribute("role","presentation"),x.textContent=F.str,x.dir=F.dir,C._fontInspectorEnabled&&(x.dataset.fontName=F.fontName),D!==0&&(o.angle=D*(180/Math.PI));let et=!1;if(F.str.length>1)et=!0;else if(F.str!==" "&&F.transform[0]!==F.transform[3]){const pt=Math.abs(F.transform[0]),vt=Math.abs(F.transform[3]);pt!==vt&&Math.max(pt,vt)/Math.min(pt,vt)>1.5&&(et=!0)}et&&(o.canvasWidth=y.vertical?F.height:F.width),C._textDivProperties.set(x,o),C._isReadableStream&&C._layoutText(x)}function B(C){const{div:F,scale:R,properties:x,ctx:o,prevFontSize:d,prevFontFamily:D}=C,{style:y}=F;let l="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:M}=y,{canvasWidth:A,fontSize:q}=x;(d!==q||D!==M)&&(o.font=`${q*R}px ${M}`,C.prevFontSize=q,C.prevFontFamily=M);const{width:Q}=o.measureText(F.textContent);Q>0&&(l=`scaleX(${A*R/Q})`)}x.angle!==0&&(l=`rotate(${x.angle}deg) ${l}`),l.length>0&&(y.transform=l)}function P(C){if(C._canceled)return;const F=C._textDivs,R=C._capability;if(F.length>t){R.resolve();return}if(!C._isReadableStream)for(const o of F)C._layoutText(o);R.resolve()}class b{constructor({textContentSource:F,container:R,viewport:x,textDivs:o,textDivProperties:d,textContentItemsStr:D,isOffscreenCanvasSupported:y}){var Q;this._textContentSource=F,this._isReadableStream=F instanceof ReadableStream,this._container=this._rootContainer=R,this._textDivs=o||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!((Q=globalThis.FontInspector)!=null&&Q.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new p.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:L(0,y)};const{pageWidth:l,pageHeight:M,pageX:A,pageY:q}=x.rawDims;this._transform=[1,0,0,-1,-A,q+M],this._pageWidth=l,this._pageHeight=M,(0,E.setLayerDimensions)(R,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new p.AbortException("TextLayer task cancelled."))}_processItems(F,R){for(const x of F){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),o.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),H(this,x,R)}}_layoutText(F){const R=this._layoutTextParams.properties=this._textDivProperties.get(F);if(this._layoutTextParams.div=F,B(this._layoutTextParams),R.hasText&&this._container.append(F),R.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const F=new p.PromiseCapability;let R=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:o,done:d})=>{if(d){F.resolve();return}Object.assign(R,o.styles),this._processItems(o.items,R),x()},F.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:o}=this._textContentSource;this._processItems(x,o),F.resolve()}else throw new Error('No "textContentSource" parameter specified.');F.promise.then(()=>{R=null,P(this)},this._capability.reject)}}m.TextLayerRenderTask=b;function w(C){!C.textContentSource&&(C.textContent||C.textContentStream)&&((0,E.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),C.textContentSource=C.textContent||C.textContentStream);const{container:F,viewport:R}=C,x=getComputedStyle(F),o=x.getPropertyValue("visibility"),d=parseFloat(x.getPropertyValue("--scale-factor"));o==="visible"&&(!d||Math.abs(d-R.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new b(C);return D._render(),D}function v({container:C,viewport:F,textDivs:R,textDivProperties:x,isOffscreenCanvasSupported:o,mustRotate:d=!0,mustRescale:D=!0}){if(d&&(0,E.setLayerDimensions)(C,{rotation:F.rotation}),D){const y=L(0,o),M={prevFontSize:null,prevFontFamily:null,div:null,scale:F.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const A of R)M.properties=x.get(A),M.div=A,B(M)}}},(f,m,mt)=>{var u,H,B,P,b,w,v,C,F,R,x,Ji,d,fi,y,Zi,M,Qi;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditorLayer=void 0;var p=mt(1),E=mt(4),t=mt(28),Z=mt(33),Ct=mt(6),G=mt(34);const q=class q{constructor({uiManager:k,pageIndex:et,div:pt,accessibilityManager:vt,annotationLayer:$,viewport:yt,l10n:Tt}){U(this,x);U(this,d);U(this,y);U(this,M);U(this,u,void 0);U(this,H,!1);U(this,B,null);U(this,P,this.pointerup.bind(this));U(this,b,this.pointerdown.bind(this));U(this,w,new Map);U(this,v,!1);U(this,C,!1);U(this,F,!1);U(this,R,void 0);const Nt=[t.FreeTextEditor,Z.InkEditor,G.StampEditor];if(!q._initialized){q._initialized=!0;for(const Ut of Nt)Ut.initialize(Tt)}k.registerEditorTypes(Nt),ft(this,R,k),this.pageIndex=et,this.div=pt,ft(this,u,vt),ft(this,B,$),this.viewport=yt,e(this,R).addLayer(this)}get isEmpty(){return e(this,w).size===0}updateToolbar(k){e(this,R).updateToolbar(k)}updateMode(k=e(this,R).getMode()){tt(this,M,Qi).call(this),k===p.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),k!==p.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",k===p.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",k===p.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",k===p.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(k){if(!k&&e(this,R).getMode()!==p.AnnotationEditorType.INK)return;if(!k){for(const pt of e(this,w).values())if(pt.isEmpty()){pt.setInBackground();return}}tt(this,d,fi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(k){e(this,R).setEditingState(k)}addCommands(k){e(this,R).addCommands(k)}enable(){this.div.style.pointerEvents="auto";const k=new Set;for(const pt of e(this,w).values())pt.enableEditing(),pt.annotationElementId&&k.add(pt.annotationElementId);if(!e(this,B))return;const et=e(this,B).getEditableAnnotations();for(const pt of et){if(pt.hide(),e(this,R).isDeletedAnnotationElement(pt.data.id)||k.has(pt.data.id))continue;const vt=this.deserialize(pt);vt&&(this.addOrRebuild(vt),vt.enableEditing())}}disable(){var et;ft(this,F,!0),this.div.style.pointerEvents="none";const k=new Set;for(const pt of e(this,w).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){k.add(pt.annotationElementId);continue}(et=this.getEditableAnnotation(pt.annotationElementId))==null||et.show(),pt.remove()}if(e(this,B)){const pt=e(this,B).getEditableAnnotations();for(const vt of pt){const{id:$}=vt.data;k.has($)||e(this,R).isDeletedAnnotationElement($)||vt.show()}}tt(this,M,Qi).call(this),this.isEmpty&&(this.div.hidden=!0),ft(this,F,!1)}getEditableAnnotation(k){var et;return((et=e(this,B))==null?void 0:et.getEditableAnnotation(k))||null}setActiveEditor(k){e(this,R).getActive()!==k&&e(this,R).setActiveEditor(k)}enableClick(){this.div.addEventListener("pointerdown",e(this,b)),this.div.addEventListener("pointerup",e(this,P))}disableClick(){this.div.removeEventListener("pointerdown",e(this,b)),this.div.removeEventListener("pointerup",e(this,P))}attach(k){e(this,w).set(k.id,k);const{annotationElementId:et}=k;et&&e(this,R).isDeletedAnnotationElement(et)&&e(this,R).removeDeletedAnnotationElement(k)}detach(k){var et;e(this,w).delete(k.id),(et=e(this,u))==null||et.removePointerInTextLayer(k.contentDiv),!e(this,F)&&k.annotationElementId&&e(this,R).addDeletedAnnotationElement(k)}remove(k){this.detach(k),e(this,R).removeEditor(k),k.div.contains(document.activeElement)&&setTimeout(()=>{e(this,R).focusMainContainer()},0),k.div.remove(),k.isAttachedToDOM=!1,e(this,C)||this.addInkEditorIfNeeded(!1)}changeParent(k){var et;k.parent!==this&&(k.annotationElementId&&(e(this,R).addDeletedAnnotationElement(k.annotationElementId),E.AnnotationEditor.deleteAnnotationElement(k),k.annotationElementId=null),this.attach(k),(et=k.parent)==null||et.detach(k),k.setParent(this),k.div&&k.isAttachedToDOM&&(k.div.remove(),this.div.append(k.div)))}add(k){if(this.changeParent(k),e(this,R).addEditor(k),this.attach(k),!k.isAttachedToDOM){const et=k.render();this.div.append(et),k.isAttachedToDOM=!0}k.fixAndSetPosition(),k.onceAdded(),e(this,R).addToAnnotationStorage(k)}moveEditorInDOM(k){var pt;if(!k.isAttachedToDOM)return;const{activeElement:et}=document;k.div.contains(et)&&(k._focusEventsAllowed=!1,setTimeout(()=>{k.div.contains(document.activeElement)?k._focusEventsAllowed=!0:(k.div.addEventListener("focusin",()=>{k._focusEventsAllowed=!0},{once:!0}),et.focus())},0)),k._structTreeParentId=(pt=e(this,u))==null?void 0:pt.moveElementInDOM(this.div,k.div,k.contentDiv,!0)}addOrRebuild(k){k.needsToBeRebuilt()?k.rebuild():this.add(k)}addUndoableEditor(k){const et=()=>k._uiManager.rebuild(k),pt=()=>{k.remove()};this.addCommands({cmd:et,undo:pt,mustExec:!1})}getNextId(){return e(this,R).getId()}pasteEditor(k,et){e(this,R).updateToolbar(k),e(this,R).updateMode(k);const{offsetX:pt,offsetY:vt}=tt(this,y,Zi).call(this),$=this.getNextId(),yt=tt(this,x,Ji).call(this,{parent:this,id:$,x:pt,y:vt,uiManager:e(this,R),isCentered:!0,...et});yt&&this.add(yt)}deserialize(k){switch(k.annotationType??k.annotationEditorType){case p.AnnotationEditorType.FREETEXT:return t.FreeTextEditor.deserialize(k,this,e(this,R));case p.AnnotationEditorType.INK:return Z.InkEditor.deserialize(k,this,e(this,R));case p.AnnotationEditorType.STAMP:return G.StampEditor.deserialize(k,this,e(this,R))}return null}addNewEditor(){tt(this,d,fi).call(this,tt(this,y,Zi).call(this),!0)}setSelected(k){e(this,R).setSelected(k)}toggleSelected(k){e(this,R).toggleSelected(k)}isSelected(k){return e(this,R).isSelected(k)}unselect(k){e(this,R).unselect(k)}pointerup(k){const{isMac:et}=p.FeatureTest.platform;if(!(k.button!==0||k.ctrlKey&&et)&&k.target===this.div&&e(this,v)){if(ft(this,v,!1),!e(this,H)){ft(this,H,!0);return}if(e(this,R).getMode()===p.AnnotationEditorType.STAMP){e(this,R).unselectAll();return}tt(this,d,fi).call(this,k,!1)}}pointerdown(k){if(e(this,v)){ft(this,v,!1);return}const{isMac:et}=p.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&et||k.target!==this.div)return;ft(this,v,!0);const pt=e(this,R).getActive();ft(this,H,!pt||pt.isEmpty())}findNewParent(k,et,pt){const vt=e(this,R).findParent(et,pt);return vt===null||vt===this?!1:(vt.changeParent(k),!0)}destroy(){var k,et;((k=e(this,R).getActive())==null?void 0:k.parent)===this&&(e(this,R).commitOrRemove(),e(this,R).setActiveEditor(null));for(const pt of e(this,w).values())(et=e(this,u))==null||et.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,e(this,w).clear(),e(this,R).removeLayer(this)}render({viewport:k}){this.viewport=k,(0,Ct.setLayerDimensions)(this.div,k);for(const et of e(this,R).getEditors(this.pageIndex))this.add(et);this.updateMode()}update({viewport:k}){e(this,R).commitOrRemove(),this.viewport=k,(0,Ct.setLayerDimensions)(this.div,{rotation:k.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:k,pageHeight:et}=this.viewport.rawDims;return[k,et]}};u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakMap,F=new WeakMap,R=new WeakMap,x=new WeakSet,Ji=function(k){switch(e(this,R).getMode()){case p.AnnotationEditorType.FREETEXT:return new t.FreeTextEditor(k);case p.AnnotationEditorType.INK:return new Z.InkEditor(k);case p.AnnotationEditorType.STAMP:return new G.StampEditor(k)}return null},d=new WeakSet,fi=function(k,et){const pt=this.getNextId(),vt=tt(this,x,Ji).call(this,{parent:this,id:pt,x:k.offsetX,y:k.offsetY,uiManager:e(this,R),isCentered:et});return vt&&this.add(vt),vt},y=new WeakSet,Zi=function(){const{x:k,y:et,width:pt,height:vt}=this.div.getBoundingClientRect(),$=Math.max(0,k),yt=Math.max(0,et),Tt=Math.min(window.innerWidth,k+pt),Nt=Math.min(window.innerHeight,et+vt),Ut=($+Tt)/2-k,T=(yt+Nt)/2-et,[i,a]=this.viewport.rotation%180===0?[Ut,T]:[T,Ut];return{offsetX:i,offsetY:a}},M=new WeakSet,Qi=function(){ft(this,C,!0);for(const k of e(this,w).values())k.isEmpty()&&k.remove();ft(this,C,!1)},Je(q,"_initialized",!1);let L=q;m.AnnotationEditorLayer=L},(f,m,mt)=>{var G,L,u,H,B,P,b,w,v,C,zr,R,Vr,o,Gr,D,Jn,l,tr,A,qr,Q,er;Object.defineProperty(m,"__esModule",{value:!0}),m.FreeTextEditor=void 0;var p=mt(1),E=mt(5),t=mt(4),Z=mt(29);const et=class et extends t.AnnotationEditor{constructor($){super({...$,name:"freeTextEditor"});U(this,C);U(this,R);U(this,o);U(this,D);U(this,l);U(this,A);U(this,Q);U(this,G,this.editorDivBlur.bind(this));U(this,L,this.editorDivFocus.bind(this));U(this,u,this.editorDivInput.bind(this));U(this,H,this.editorDivKeydown.bind(this));U(this,B,void 0);U(this,P,"");U(this,b,`${this.id}-editor`);U(this,w,void 0);U(this,v,null);ft(this,B,$.color||et._defaultColor||t.AnnotationEditor._defaultLineColor),ft(this,w,$.fontSize||et._defaultFontSize)}static get _keyboardManager(){const $=et.prototype,yt=Ut=>Ut.isEmpty(),Tt=E.AnnotationEditorUIManager.TRANSLATE_SMALL,Nt=E.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,p.shadow)(this,"_keyboardManager",new E.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],$.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],$.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],$._translateEmpty,{args:[-Tt,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$._translateEmpty,{args:[-Nt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],$._translateEmpty,{args:[Tt,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$._translateEmpty,{args:[Nt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],$._translateEmpty,{args:[0,-Tt],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$._translateEmpty,{args:[0,-Nt],checker:yt}],[["ArrowDown","mac+ArrowDown"],$._translateEmpty,{args:[0,Tt],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$._translateEmpty,{args:[0,Nt],checker:yt}]]))}static initialize($){t.AnnotationEditor.initialize($,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams($,yt){switch($){case p.AnnotationEditorParamsType.FREETEXT_SIZE:et._defaultFontSize=yt;break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:et._defaultColor=yt;break}}updateParams($,yt){switch($){case p.AnnotationEditorParamsType.FREETEXT_SIZE:tt(this,C,zr).call(this,yt);break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:tt(this,R,Vr).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,et._defaultFontSize],[p.AnnotationEditorParamsType.FREETEXT_COLOR,et._defaultColor||t.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,w)],[p.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,B)]]}_translateEmpty($,yt){this._uiManager.translateSelectedEditors($,yt,!0)}getInitialTranslation(){const $=this.parentScale;return[-et._internalPadding*$,-(et._internalPadding+e(this,w))*$]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(p.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,H)),this.editorDiv.addEventListener("focus",e(this,L)),this.editorDiv.addEventListener("blur",e(this,G)),this.editorDiv.addEventListener("input",e(this,u)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,b)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,H)),this.editorDiv.removeEventListener("focus",e(this,L)),this.editorDiv.removeEventListener("blur",e(this,G)),this.editorDiv.removeEventListener("input",e(this,u)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin($){this._focusEventsAllowed&&(super.focusin($),$.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var $;if(this.width){tt(this,Q,er).call(this);return}this.enableEditMode(),this.editorDiv.focus(),($=this._initialOptions)!=null&&$.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const $=e(this,P),yt=ft(this,P,tt(this,o,Gr).call(this).trimEnd());if($===yt)return;const Tt=Nt=>{if(ft(this,P,Nt),!Nt){this.remove();return}tt(this,l,tr).call(this),this._uiManager.rebuild(this),tt(this,D,Jn).call(this)};this.addCommands({cmd:()=>{Tt(yt)},undo:()=>{Tt($)},mustExec:!1}),tt(this,D,Jn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick($){this.enterInEditMode()}keydown($){$.target===this.div&&$.key==="Enter"&&(this.enterInEditMode(),$.preventDefault())}editorDivKeydown($){et._keyboardManager.exec(this,$)}editorDivFocus($){this.isEditing=!0}editorDivBlur($){this.isEditing=!1}editorDivInput($){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let $,yt;this.width&&($=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,b)),this.enableEditing(),t.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Nt=>{var Ut;return(Ut=this.editorDiv)==null?void 0:Ut.setAttribute("aria-label",Nt)}),t.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Nt=>{var Ut;return(Ut=this.editorDiv)==null?void 0:Ut.setAttribute("default-content",Nt)}),this.editorDiv.contentEditable=!0;const{style:Tt}=this.editorDiv;if(Tt.fontSize=`calc(${e(this,w)}px * var(--scale-factor))`,Tt.color=e(this,B),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Nt,Ut]=this.parentDimensions;if(this.annotationElementId){const{position:T}=e(this,v);let[i,a]=this.getInitialTranslation();[i,a]=this.pageTranslationToScreen(i,a);const[s,c]=this.pageDimensions,[h,S]=this.pageTranslation;let I,z;switch(this.rotation){case 0:I=$+(T[0]-h)/s,z=yt+this.height-(T[1]-S)/c;break;case 90:I=$+(T[0]-h)/s,z=yt-(T[1]-S)/c,[i,a]=[a,-i];break;case 180:I=$-this.width+(T[0]-h)/s,z=yt-(T[1]-S)/c,[i,a]=[-i,-a];break;case 270:I=$+(T[0]-h-this.height*c)/s,z=yt+(T[1]-S-this.width*s)/c,[i,a]=[-a,i];break}this.setAt(I*Nt,z*Ut,i,a)}else this.setAt($*Nt,yt*Ut,this.width*Nt,this.height*Ut);tt(this,l,tr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize($,yt,Tt){let Nt=null;if($ instanceof Z.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:T,fontColor:i},rect:a,rotation:s,id:c},textContent:h,textPosition:S,parent:{page:{pageNumber:I}}}=$;if(!h||h.length===0)return null;Nt=$={annotationType:p.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:T,value:h.join(`
`),position:S,pageIndex:I-1,rect:a,rotation:s,id:c,deleted:!1}}const Ut=super.deserialize($,yt,Tt);return ft(Ut,w,$.fontSize),ft(Ut,B,p.Util.makeHexColor(...$.color)),ft(Ut,P,$.value),Ut.annotationElementId=$.id||null,ft(Ut,v,Nt),Ut}serialize($=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=et._internalPadding*this.parentScale,Tt=this.getRect(yt,yt),Nt=t.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,B)),Ut={annotationType:p.AnnotationEditorType.FREETEXT,color:Nt,fontSize:e(this,w),value:e(this,P),pageIndex:this.pageIndex,rect:Tt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return $?Ut:this.annotationElementId&&!tt(this,A,qr).call(this,Ut)?null:(Ut.id=this.annotationElementId,Ut)}};G=new WeakMap,L=new WeakMap,u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakSet,zr=function($){const yt=Nt=>{this.editorDiv.style.fontSize=`calc(${Nt}px * var(--scale-factor))`,this.translate(0,-(Nt-e(this,w))*this.parentScale),ft(this,w,Nt),tt(this,D,Jn).call(this)},Tt=e(this,w);this.addCommands({cmd:()=>{yt($)},undo:()=>{yt(Tt)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,Vr=function($){const yt=e(this,B);this.addCommands({cmd:()=>{ft(this,B,this.editorDiv.style.color=$)},undo:()=>{ft(this,B,this.editorDiv.style.color=yt)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Gr=function(){const $=this.editorDiv.getElementsByTagName("div");if($.length===0)return this.editorDiv.innerText;const yt=[];for(const Tt of $)yt.push(Tt.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},D=new WeakSet,Jn=function(){const[$,yt]=this.parentDimensions;let Tt;if(this.isAttachedToDOM)Tt=this.div.getBoundingClientRect();else{const{currentLayer:Nt,div:Ut}=this,T=Ut.style.display;Ut.style.display="hidden",Nt.div.append(this.div),Tt=Ut.getBoundingClientRect(),Ut.remove(),Ut.style.display=T}this.rotation%180===this.parentRotation%180?(this.width=Tt.width/$,this.height=Tt.height/yt):(this.width=Tt.height/$,this.height=Tt.width/yt),this.fixAndSetPosition()},l=new WeakSet,tr=function(){if(this.editorDiv.replaceChildren(),!!e(this,P))for(const $ of e(this,P).split(`
`)){const yt=document.createElement("div");yt.append($?document.createTextNode($):document.createElement("br")),this.editorDiv.append(yt)}},A=new WeakSet,qr=function($){const{value:yt,fontSize:Tt,color:Nt,rect:Ut,pageIndex:T}=e(this,v);return $.value!==yt||$.fontSize!==Tt||$.rect.some((i,a)=>Math.abs(i-Ut[a])>=1)||$.color.some((i,a)=>i!==Nt[a])||$.pageIndex!==T},Q=new WeakSet,er=function($=!1){if(!this.annotationElementId)return;if(tt(this,D,Jn).call(this),!$&&(this.width===0||this.height===0)){setTimeout(()=>tt(this,Q,er).call(this,!0),0);return}const yt=et._internalPadding*this.parentScale;e(this,v).rect=this.getRect(yt,yt)},Je(et,"_freeTextDefaultContent",""),Je(et,"_internalPadding",0),Je(et,"_defaultColor",null),Je(et,"_defaultFontSize",10),Je(et,"_type","freetext");let Ct=et;m.FreeTextEditor=Ct},(f,m,mt)=>{var a,c,In,S,Xr,z,dt,ct,bt,Et,Dt,wt,$t,ie,It,Jt,Pt,ht,at,St,Wt,jt,le,$r,ce,pi,_e,nr,we,ir,nt,Y,Ft,At,Re,Ue,st,rr,Qt,zt,te,ne,Yr,Lt,sr;Object.defineProperty(m,"__esModule",{value:!0}),m.StampAnnotationElement=m.InkAnnotationElement=m.FreeTextAnnotationElement=m.AnnotationLayer=void 0;var p=mt(1),E=mt(6),t=mt(3),Z=mt(30),Ct=mt(31),G=mt(32);const L=1e3,u=9,H=new WeakSet;function B(Zt){return{width:Zt[2]-Zt[0],height:Zt[3]-Zt[1]}}class P{static create(N){switch(N.data.annotationType){case p.AnnotationType.LINK:return new w(N);case p.AnnotationType.TEXT:return new v(N);case p.AnnotationType.WIDGET:switch(N.data.fieldType){case"Tx":return new F(N);case"Btn":return N.data.radioButton?new o(N):N.data.checkBox?new x(N):new d(N);case"Ch":return new D(N);case"Sig":return new R(N)}return new C(N);case p.AnnotationType.POPUP:return new y(N);case p.AnnotationType.FREETEXT:return new M(N);case p.AnnotationType.LINE:return new A(N);case p.AnnotationType.SQUARE:return new q(N);case p.AnnotationType.CIRCLE:return new Q(N);case p.AnnotationType.POLYLINE:return new k(N);case p.AnnotationType.CARET:return new pt(N);case p.AnnotationType.INK:return new vt(N);case p.AnnotationType.POLYGON:return new et(N);case p.AnnotationType.HIGHLIGHT:return new $(N);case p.AnnotationType.UNDERLINE:return new yt(N);case p.AnnotationType.SQUIGGLY:return new Tt(N);case p.AnnotationType.STRIKEOUT:return new Nt(N);case p.AnnotationType.STAMP:return new Ut(N);case p.AnnotationType.FILEATTACHMENT:return new T(N);default:return new b(N)}}}const s=class s{constructor(N,{isRenderable:n=!1,ignoreBorder:_=!1,createQuadrilaterals:j=!1}={}){U(this,a,!1);this.isRenderable=n,this.data=N.data,this.layer=N.layer,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderForms=N.renderForms,this.svgFactory=N.svgFactory,this.annotationStorage=N.annotationStorage,this.enableScripting=N.enableScripting,this.hasJSActions=N.hasJSActions,this._fieldObjects=N.fieldObjects,this.parent=N.parent,n&&(this.container=this._createContainer(_)),j&&this._createQuadrilaterals()}static _hasPopupData({titleObj:N,contentsObj:n,richText:_}){return!!(N!=null&&N.str||n!=null&&n.str||_!=null&&_.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(N){const{data:n,parent:{page:_,viewport:j}}=this,K=document.createElement("section");K.setAttribute("data-annotation-id",n.id),this instanceof C||(K.tabIndex=L),K.style.zIndex=this.parent.zIndex++,this.data.popupRef&&K.setAttribute("aria-haspopup","dialog"),n.noRotate&&K.classList.add("norotate");const{pageWidth:it,pageHeight:gt,pageX:Rt,pageY:qt}=j.rawDims;if(!n.rect||this instanceof y){const{rotation:he}=n;return!n.hasOwnCanvas&&he!==0&&this.setRotation(he,K),K}const{width:Vt,height:ve}=B(n.rect),Yt=p.Util.normalizeRect([n.rect[0],_.view[3]-n.rect[1]+_.view[1],n.rect[2],_.view[3]-n.rect[3]+_.view[1]]);if(!N&&n.borderStyle.width>0){K.style.borderWidth=`${n.borderStyle.width}px`;const he=n.borderStyle.horizontalCornerRadius,Ee=n.borderStyle.verticalCornerRadius;if(he>0||Ee>0){const je=`calc(${he}px * var(--scale-factor)) / calc(${Ee}px * var(--scale-factor))`;K.style.borderRadius=je}else if(this instanceof o){const je=`calc(${Vt}px * var(--scale-factor)) / calc(${ve}px * var(--scale-factor))`;K.style.borderRadius=je}switch(n.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:K.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:K.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:K.style.borderBottomStyle="solid";break}const De=n.borderColor||null;De?(ft(this,a,!0),K.style.borderColor=p.Util.makeHexColor(De[0]|0,De[1]|0,De[2]|0)):K.style.borderWidth=0}K.style.left=`${100*(Yt[0]-Rt)/it}%`,K.style.top=`${100*(Yt[1]-qt)/gt}%`;const{rotation:Kt}=n;return n.hasOwnCanvas||Kt===0?(K.style.width=`${100*Vt/it}%`,K.style.height=`${100*ve/gt}%`):this.setRotation(Kt,K),K}setRotation(N,n=this.container){if(!this.data.rect)return;const{pageWidth:_,pageHeight:j}=this.parent.viewport.rawDims,{width:K,height:it}=B(this.data.rect);let gt,Rt;N%180===0?(gt=100*K/_,Rt=100*it/j):(gt=100*it/_,Rt=100*K/j),n.style.width=`${gt}%`,n.style.height=`${Rt}%`,n.setAttribute("data-main-rotation",(360-N)%360)}get _commonActions(){const N=(n,_,j)=>{const K=j.detail[n],it=K[0],gt=K.slice(1);j.target.style[_]=Z.ColorConverters[`${it}_HTML`](gt),this.annotationStorage.setValue(this.data.id,{[_]:Z.ColorConverters[`${it}_rgb`](gt)})};return(0,p.shadow)(this,"_commonActions",{display:n=>{const{display:_}=n.detail,j=_%2===1;this.container.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:j,noPrint:_===1||_===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:_}=n.detail;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_,noView:_})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{N("bgColor","backgroundColor",n)},fillColor:n=>{N("fillColor","backgroundColor",n)},fgColor:n=>{N("fgColor","color",n)},textColor:n=>{N("textColor","color",n)},borderColor:n=>{N("borderColor","borderColor",n)},strokeColor:n=>{N("strokeColor","borderColor",n)},rotation:n=>{const _=n.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(N,n){const _=this._commonActions;for(const j of Object.keys(n.detail)){const K=N[j]||_[j];K==null||K(n)}}_setDefaultPropertiesFromJS(N){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const _=this._commonActions;for(const[j,K]of Object.entries(n)){const it=_[j];if(it){const gt={detail:{[j]:K},target:N};it(gt),delete n[j]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:N}=this.data;if(!N)return;const[n,_,j,K]=this.data.rect;if(N.length===1){const[,{x:Ee,y:De},{x:je,y:ln}]=N[0];if(j===Ee&&K===De&&n===je&&_===ln)return}const{style:it}=this.container;let gt;if(e(this,a)){const{borderColor:Ee,borderWidth:De}=it;it.borderWidth=0,gt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ee}" stroke-width="${De}">`],this.container.classList.add("hasBorder")}const Rt=j-n,qt=K-_,{svgFactory:Vt}=this,ve=Vt.createElement("svg");ve.classList.add("quadrilateralsContainer"),ve.setAttribute("width",0),ve.setAttribute("height",0);const Yt=Vt.createElement("defs");ve.append(Yt);const Kt=Vt.createElement("clipPath"),he=`clippath_${this.data.id}`;Kt.setAttribute("id",he),Kt.setAttribute("clipPathUnits","objectBoundingBox"),Yt.append(Kt);for(const[,{x:Ee,y:De},{x:je,y:ln}]of N){const Ze=Vt.createElement("rect"),vn=(je-n)/Rt,_n=(K-De)/qt,wn=(Ee-je)/Rt,ti=(De-ln)/qt;Ze.setAttribute("x",vn),Ze.setAttribute("y",_n),Ze.setAttribute("width",wn),Ze.setAttribute("height",ti),Kt.append(Ze),gt==null||gt.push(`<rect vector-effect="non-scaling-stroke" x="${vn}" y="${_n}" width="${wn}" height="${ti}"/>`)}e(this,a)&&(gt.push("</g></svg>')"),it.backgroundImage=gt.join("")),this.container.append(ve),this.container.style.clipPath=`url(#${he})`}_createPopup(){const{container:N,data:n}=this;N.setAttribute("aria-haspopup","dialog");const _=new y({data:{color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation},parent:this.parent,elements:[this]});this.parent.div.append(_.render())}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(N,n=null){const _=[];if(this._fieldObjects){const j=this._fieldObjects[N];if(j)for(const{page:K,id:it,exportValues:gt}of j){if(K===-1||it===n)continue;const Rt=typeof gt=="string"?gt:null,qt=document.querySelector(`[data-element-id="${it}"]`);if(qt&&!H.has(qt)){(0,p.warn)(`_getElementsByName - element not allowed: ${it}`);continue}_.push({id:it,exportValue:Rt,domElement:qt})}return _}for(const j of document.getElementsByName(N)){const{exportValue:K}=j,it=j.getAttribute("data-element-id");it!==n&&H.has(j)&&_.push({id:it,exportValue:K,domElement:j})}return _}show(){var N;this.container&&(this.container.hidden=!1),(N=this.popup)==null||N.maybeShow()}hide(){var N;this.container&&(this.container.hidden=!0),(N=this.popup)==null||N.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const N=this.getElementsToTriggerPopup();if(Array.isArray(N))for(const n of N)n.classList.add("highlightArea");else N.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:N,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var _;(_=this.linkService.eventBus)==null||_.dispatch("switchannotationeditormode",{source:this,mode:N,editId:n})})}};a=new WeakMap;let b=s;class w extends b{constructor(n,_=null){super(n,{isRenderable:!0,ignoreBorder:!!(_!=null&&_.ignoreBorder),createQuadrilaterals:!0});U(this,c);U(this,S);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:_}=this,j=document.createElement("a");j.setAttribute("data-element-id",n.id);let K=!1;return n.url?(_.addLinkAttributes(j,n.url,n.newWindow),K=!0):n.action?(this._bindNamedAction(j,n.action),K=!0):n.attachment?(this._bindAttachment(j,n.attachment),K=!0):n.setOCGState?(tt(this,S,Xr).call(this,j,n.setOCGState),K=!0):n.dest?(this._bindLink(j,n.dest),K=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,n),K=!0),n.resetForm?(this._bindResetFormAction(j,n.resetForm),K=!0):this.isTooltipOnly&&!K&&(this._bindLink(j,""),K=!0)),this.container.classList.add("linkAnnotation"),K&&this.container.append(j),this.container}_bindLink(n,_){n.href=this.linkService.getDestinationHash(_),n.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&tt(this,c,In).call(this)}_bindNamedAction(n,_){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(_),!1),tt(this,c,In).call(this)}_bindAttachment(n,_){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,_.content,_.filename),!1},tt(this,c,In).call(this)}_bindJSAction(n,_){n.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(_.actions)){const it=j.get(K);it&&(n[it]=()=>{var gt;return(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:K}}),!1})}n.onclick||(n.onclick=()=>!1),tt(this,c,In).call(this)}_bindResetFormAction(n,_){const j=n.onclick;if(j||(n.href=this.linkService.getAnchorUrl("")),tt(this,c,In).call(this),!this._fieldObjects){(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(n.onclick=()=>!1);return}n.onclick=()=>{var ve;j==null||j();const{fields:K,refs:it,include:gt}=_,Rt=[];if(K.length!==0||it.length!==0){const Yt=new Set(it);for(const Kt of K){const he=this._fieldObjects[Kt]||[];for(const{id:Ee}of he)Yt.add(Ee)}for(const Kt of Object.values(this._fieldObjects))for(const he of Kt)Yt.has(he.id)===gt&&Rt.push(he)}else for(const Yt of Object.values(this._fieldObjects))Rt.push(...Yt);const qt=this.annotationStorage,Vt=[];for(const Yt of Rt){const{id:Kt}=Yt;switch(Vt.push(Kt),Yt.type){case"text":{const Ee=Yt.defaultValue||"";qt.setValue(Kt,{value:Ee});break}case"checkbox":case"radiobutton":{const Ee=Yt.defaultValue===Yt.exportValues;qt.setValue(Kt,{value:Ee});break}case"combobox":case"listbox":{const Ee=Yt.defaultValue||"";qt.setValue(Kt,{value:Ee});break}default:continue}const he=document.querySelector(`[data-element-id="${Kt}"]`);if(he){if(!H.has(he)){(0,p.warn)(`_bindResetFormAction - element not allowed: ${Kt}`);continue}}else continue;he.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Vt,name:"ResetForm"}})),!1}}}c=new WeakSet,In=function(){this.container.setAttribute("data-internal-link","")},S=new WeakSet,Xr=function(n,_){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(_),!1),tt(this,c,In).call(this)};class v extends b{constructor(N){super(N,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const N=document.createElement("img");return N.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",N.alt="[{{type}} Annotation]",N.dataset.l10nId="text_annotation_type",N.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(N),this.container}}class C extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(N){var n;this.data.hasOwnCanvas&&(((n=N.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(N.previousSibling.hidden=!0),N.hidden=!1)}_getKeyModifier(N){const{isWin:n,isMac:_}=p.FeatureTest.platform;return n&&N.ctrlKey||_&&N.metaKey}_setEventListener(N,n,_,j,K){_.includes("mouse")?N.addEventListener(_,it=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:K(it),shift:it.shiftKey,modifier:this._getKeyModifier(it)}})}):N.addEventListener(_,it=>{var gt;if(_==="blur"){if(!n.focused||!it.relatedTarget)return;n.focused=!1}else if(_==="focus"){if(n.focused)return;n.focused=!0}K&&((gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:K(it)}}))})}_setEventListeners(N,n,_,j){var K,it,gt;for(const[Rt,qt]of _)(qt==="Action"||(K=this.data.actions)!=null&&K[qt])&&((qt==="Focus"||qt==="Blur")&&(n||(n={focused:!1})),this._setEventListener(N,n,Rt,qt,j),qt==="Focus"&&!((it=this.data.actions)!=null&&it.Blur)?this._setEventListener(N,n,"blur","Blur",null):qt==="Blur"&&!((gt=this.data.actions)!=null&&gt.Focus)&&this._setEventListener(N,n,"focus","Focus",null))}_setBackgroundColor(N){const n=this.data.backgroundColor||null;N.style.backgroundColor=n===null?"transparent":p.Util.makeHexColor(n[0],n[1],n[2])}_setTextStyle(N){const n=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||u,K=N.style;let it;const gt=2,Rt=qt=>Math.round(10*qt)/10;if(this.data.multiLine){const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-gt),Vt=Math.round(qt/(p.LINE_FACTOR*j))||1,ve=qt/Vt;it=Math.min(j,Rt(ve/p.LINE_FACTOR))}else{const qt=Math.abs(this.data.rect[3]-this.data.rect[1]-gt);it=Math.min(j,Rt(qt/p.LINE_FACTOR))}K.fontSize=`calc(${it}px * var(--scale-factor))`,K.color=p.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(K.textAlign=n[this.data.textAlignment])}_setRequired(N,n){n?N.setAttribute("required",!0):N.removeAttribute("required"),N.setAttribute("aria-required",n)}}class F extends C{constructor(N){const n=N.renderForms||!N.data.hasAppearance&&!!N.data.fieldValue;super(N,{isRenderable:n})}setPropertyOnSiblings(N,n,_,j){const K=this.annotationStorage;for(const it of this._getElementsByName(N.name,N.id))it.domElement&&(it.domElement[n]=_),K.setValue(it.id,{[j]:_})}render(){var j,K;const N=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let _=null;if(this.renderForms){const it=N.getValue(n,{value:this.data.fieldValue});let gt=it.value||"";const Rt=N.getValue(n,{charLimit:this.data.maxLen}).charLimit;Rt&&gt.length>Rt&&(gt=gt.slice(0,Rt));let qt=it.formattedValue||((j=this.data.textContent)==null?void 0:j.join(`
`))||null;qt&&this.data.comb&&(qt=qt.replaceAll(/\s+/g,""));const Vt={userValue:gt,formattedValue:qt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=qt??gt,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",qt??gt),this.data.doNotScroll&&(_.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_.hidden=!0),H.add(_),_.setAttribute("data-element-id",n),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=L,this._setRequired(_,this.data.required),Rt&&(_.maxLength=Rt),_.addEventListener("input",Yt=>{N.setValue(n,{value:Yt.target.value}),this.setPropertyOnSiblings(_,"value",Yt.target.value,"value"),Vt.formattedValue=null}),_.addEventListener("resetform",Yt=>{const Kt=this.data.defaultFieldValue??"";_.value=Vt.userValue=Kt,Vt.formattedValue=null});let ve=Yt=>{const{formattedValue:Kt}=Vt;Kt!=null&&(Yt.target.value=Kt),Yt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",Kt=>{if(Vt.focused)return;const{target:he}=Kt;Vt.userValue&&(he.value=Vt.userValue),Vt.lastCommittedValue=he.value,Vt.commitKey=1,Vt.focused=!0}),_.addEventListener("updatefromsandbox",Kt=>{this.showElementAndHideCanvas(Kt.target);const he={value(Ee){Vt.userValue=Ee.detail.value??"",N.setValue(n,{value:Vt.userValue.toString()}),Ee.target.value=Vt.userValue},formattedValue(Ee){const{formattedValue:De}=Ee.detail;Vt.formattedValue=De,De!=null&&Ee.target!==document.activeElement&&(Ee.target.value=De),N.setValue(n,{formattedValue:De})},selRange(Ee){Ee.target.setSelectionRange(...Ee.detail.selRange)},charLimit:Ee=>{var Ze;const{charLimit:De}=Ee.detail,{target:je}=Ee;if(De===0){je.removeAttribute("maxLength");return}je.setAttribute("maxLength",De);let ln=Vt.userValue;!ln||ln.length<=De||(ln=ln.slice(0,De),je.value=Vt.userValue=ln,N.setValue(n,{value:ln}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:ln,willCommit:!0,commitKey:1,selStart:je.selectionStart,selEnd:je.selectionEnd}}))}};this._dispatchEventFromSandbox(he,Kt)}),_.addEventListener("keydown",Kt=>{var De;Vt.commitKey=1;let he=-1;if(Kt.key==="Escape"?he=0:Kt.key==="Enter"&&!this.data.multiLine?he=2:Kt.key==="Tab"&&(Vt.commitKey=3),he===-1)return;const{value:Ee}=Kt.target;Vt.lastCommittedValue!==Ee&&(Vt.lastCommittedValue=Ee,Vt.userValue=Ee,(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Ee,willCommit:!0,commitKey:he,selStart:Kt.target.selectionStart,selEnd:Kt.target.selectionEnd}}))});const Yt=ve;ve=null,_.addEventListener("blur",Kt=>{var Ee;if(!Vt.focused||!Kt.relatedTarget)return;Vt.focused=!1;const{value:he}=Kt.target;Vt.userValue=he,Vt.lastCommittedValue!==he&&((Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:he,willCommit:!0,commitKey:Vt.commitKey,selStart:Kt.target.selectionStart,selEnd:Kt.target.selectionEnd}})),Yt(Kt)}),(K=this.data.actions)!=null&&K.Keystroke&&_.addEventListener("beforeinput",Kt=>{var _n;Vt.lastCommittedValue=null;const{data:he,target:Ee}=Kt,{value:De,selectionStart:je,selectionEnd:ln}=Ee;let Ze=je,vn=ln;switch(Kt.inputType){case"deleteWordBackward":{const wn=De.substring(0,je).match(/\w*[^\w]*$/);wn&&(Ze-=wn[0].length);break}case"deleteWordForward":{const wn=De.substring(je).match(/^[^\w]*\w*/);wn&&(vn+=wn[0].length);break}case"deleteContentBackward":je===ln&&(Ze-=1);break;case"deleteContentForward":je===ln&&(vn+=1);break}Kt.preventDefault(),(_n=this.linkService.eventBus)==null||_n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:De,change:he||"",willCommit:!1,selStart:Ze,selEnd:vn}})}),this._setEventListeners(_,Vt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Kt=>Kt.target.value)}if(ve&&_.addEventListener("blur",ve),this.data.comb){const Kt=(this.data.rect[2]-this.data.rect[0])/Rt;_.classList.add("comb"),_.style.letterSpacing=`calc(${Kt}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class R extends C{constructor(N){super(N,{isRenderable:!!N.data.hasOwnCanvas})}}class x extends C{constructor(N){super(N,{isRenderable:N.renderForms})}render(){const N=this.annotationStorage,n=this.data,_=n.id;let j=N.getValue(_,{value:n.exportValue===n.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",N.setValue(_,{value:j})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const K=document.createElement("input");return H.add(K),K.setAttribute("data-element-id",_),K.disabled=n.readOnly,this._setRequired(K,this.data.required),K.type="checkbox",K.name=n.fieldName,j&&K.setAttribute("checked",!0),K.setAttribute("exportValue",n.exportValue),K.tabIndex=L,K.addEventListener("change",it=>{const{name:gt,checked:Rt}=it.target;for(const qt of this._getElementsByName(gt,_)){const Vt=Rt&&qt.exportValue===n.exportValue;qt.domElement&&(qt.domElement.checked=Vt),N.setValue(qt.id,{value:Vt})}N.setValue(_,{value:Rt})}),K.addEventListener("resetform",it=>{const gt=n.defaultFieldValue||"Off";it.target.checked=gt===n.exportValue}),this.enableScripting&&this.hasJSActions&&(K.addEventListener("updatefromsandbox",it=>{const gt={value(Rt){Rt.target.checked=Rt.detail.value!=="Off",N.setValue(_,{value:Rt.target.checked})}};this._dispatchEventFromSandbox(gt,it)}),this._setEventListeners(K,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class o extends C{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const N=this.annotationStorage,n=this.data,_=n.id;let j=N.getValue(_,{value:n.fieldValue===n.buttonValue}).value;typeof j=="string"&&(j=j!==n.buttonValue,N.setValue(_,{value:j}));const K=document.createElement("input");if(H.add(K),K.setAttribute("data-element-id",_),K.disabled=n.readOnly,this._setRequired(K,this.data.required),K.type="radio",K.name=n.fieldName,j&&K.setAttribute("checked",!0),K.tabIndex=L,K.addEventListener("change",it=>{const{name:gt,checked:Rt}=it.target;for(const qt of this._getElementsByName(gt,_))N.setValue(qt.id,{value:!1});N.setValue(_,{value:Rt})}),K.addEventListener("resetform",it=>{const gt=n.defaultFieldValue;it.target.checked=gt!=null&&gt===n.buttonValue}),this.enableScripting&&this.hasJSActions){const it=n.buttonValue;K.addEventListener("updatefromsandbox",gt=>{const Rt={value:qt=>{const Vt=it===qt.detail.value;for(const ve of this._getElementsByName(qt.target.name)){const Yt=Vt&&ve.id===_;ve.domElement&&(ve.domElement.checked=Yt),N.setValue(ve.id,{value:Yt})}}};this._dispatchEventFromSandbox(Rt,gt)}),this._setEventListeners(K,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gt=>gt.target.checked)}return this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class d extends w{constructor(N){super(N,{ignoreBorder:N.data.hasAppearance})}render(){const N=super.render();N.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(N.title=this.data.alternativeText);const n=N.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),N}}class D extends C{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const N=this.annotationStorage,n=this.data.id,_=N.getValue(n,{value:this.data.fieldValue}),j=document.createElement("select");H.add(j),j.setAttribute("data-element-id",n),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=L;let K=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",Vt=>{const ve=this.data.defaultFieldValue;for(const Yt of j.options)Yt.selected=Yt.value===ve});for(const Vt of this.data.options){const ve=document.createElement("option");ve.textContent=Vt.displayValue,ve.value=Vt.exportValue,_.value.includes(Vt.exportValue)&&(ve.setAttribute("selected",!0),K=!1),j.append(ve)}let it=null;if(K){const Vt=document.createElement("option");Vt.value=" ",Vt.setAttribute("hidden",!0),Vt.setAttribute("selected",!0),j.prepend(Vt),it=()=>{Vt.remove(),j.removeEventListener("input",it),it=null},j.addEventListener("input",it)}const gt=Vt=>{const ve=Vt?"value":"textContent",{options:Yt,multiple:Kt}=j;return Kt?Array.prototype.filter.call(Yt,he=>he.selected).map(he=>he[ve]):Yt.selectedIndex===-1?null:Yt[Yt.selectedIndex][ve]};let Rt=gt(!1);const qt=Vt=>{const ve=Vt.target.options;return Array.prototype.map.call(ve,Yt=>({displayValue:Yt.textContent,exportValue:Yt.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",Vt=>{const ve={value(Yt){it==null||it();const Kt=Yt.detail.value,he=new Set(Array.isArray(Kt)?Kt:[Kt]);for(const Ee of j.options)Ee.selected=he.has(Ee.value);N.setValue(n,{value:gt(!0)}),Rt=gt(!1)},multipleSelection(Yt){j.multiple=!0},remove(Yt){const Kt=j.options,he=Yt.detail.remove;Kt[he].selected=!1,j.remove(he),Kt.length>0&&Array.prototype.findIndex.call(Kt,De=>De.selected)===-1&&(Kt[0].selected=!0),N.setValue(n,{value:gt(!0),items:qt(Yt)}),Rt=gt(!1)},clear(Yt){for(;j.length!==0;)j.remove(0);N.setValue(n,{value:null,items:[]}),Rt=gt(!1)},insert(Yt){const{index:Kt,displayValue:he,exportValue:Ee}=Yt.detail.insert,De=j.children[Kt],je=document.createElement("option");je.textContent=he,je.value=Ee,De?De.before(je):j.append(je),N.setValue(n,{value:gt(!0),items:qt(Yt)}),Rt=gt(!1)},items(Yt){const{items:Kt}=Yt.detail;for(;j.length!==0;)j.remove(0);for(const he of Kt){const{displayValue:Ee,exportValue:De}=he,je=document.createElement("option");je.textContent=Ee,je.value=De,j.append(je)}j.options.length>0&&(j.options[0].selected=!0),N.setValue(n,{value:gt(!0),items:qt(Yt)}),Rt=gt(!1)},indices(Yt){const Kt=new Set(Yt.detail.indices);for(const he of Yt.target.options)he.selected=Kt.has(he.index);N.setValue(n,{value:gt(!0)}),Rt=gt(!1)},editable(Yt){Yt.target.disabled=!Yt.detail.editable}};this._dispatchEventFromSandbox(ve,Vt)}),j.addEventListener("input",Vt=>{var Yt;const ve=gt(!0);N.setValue(n,{value:ve}),Vt.preventDefault(),(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Rt,changeEx:ve,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Vt=>Vt.target.value)):j.addEventListener("input",function(Vt){N.setValue(n,{value:gt(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class y extends b{constructor(N){const{data:n,elements:_}=N;super(N,{isRenderable:b._hasPopupData(n)}),this.elements=_}render(){this.container.classList.add("popupAnnotation");const N=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const _ of this.elements)_.popup=N,n.push(_.data.id),_.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(_=>`${p.AnnotationPrefix}${_}`).join(",")),this.container}}class l{constructor({container:N,color:n,elements:_,titleObj:j,modificationDate:K,contentsObj:it,richText:gt,parent:Rt,rect:qt,parentRect:Vt,open:ve}){U(this,le);U(this,ce);U(this,_e);U(this,we);U(this,z,null);U(this,dt,tt(this,le,$r).bind(this));U(this,ct,tt(this,we,ir).bind(this));U(this,bt,tt(this,_e,nr).bind(this));U(this,Et,tt(this,ce,pi).bind(this));U(this,Dt,null);U(this,wt,null);U(this,$t,null);U(this,ie,null);U(this,It,null);U(this,Jt,null);U(this,Pt,!1);U(this,ht,null);U(this,at,null);U(this,St,null);U(this,Wt,null);U(this,jt,!1);var Kt;ft(this,wt,N),ft(this,Wt,j),ft(this,$t,it),ft(this,St,gt),ft(this,It,Rt),ft(this,Dt,n),ft(this,at,qt),ft(this,Jt,Vt),ft(this,ie,_);const Yt=E.PDFDateString.toDateObject(K);Yt&&ft(this,z,Rt.l10n.get("annotation_date_string",{date:Yt.toLocaleDateString(),time:Yt.toLocaleTimeString()})),this.trigger=_.flatMap(he=>he.getElementsToTriggerPopup());for(const he of this.trigger)he.addEventListener("click",e(this,Et)),he.addEventListener("mouseenter",e(this,bt)),he.addEventListener("mouseleave",e(this,ct)),he.classList.add("popupTriggerArea");for(const he of _)(Kt=he.container)==null||Kt.addEventListener("keydown",e(this,dt));e(this,wt).hidden=!0,ve&&tt(this,ce,pi).call(this)}render(){if(e(this,ht))return;const{page:{view:N},viewport:{rawDims:{pageWidth:n,pageHeight:_,pageX:j,pageY:K}}}=e(this,It),it=ft(this,ht,document.createElement("div"));if(it.className="popup",e(this,Dt)){const Ze=it.style.outlineColor=p.Util.makeHexColor(...e(this,Dt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?it.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:it.style.backgroundColor=p.Util.makeHexColor(...e(this,Dt).map(_n=>Math.floor(.7*(255-_n)+_n)))}const gt=document.createElement("span");gt.className="header";const Rt=document.createElement("h1");if(gt.append(Rt),{dir:Rt.dir,str:Rt.textContent}=e(this,Wt),it.append(gt),e(this,z)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),e(this,z).then(vn=>{Ze.textContent=vn}),gt.append(Ze)}const qt=e(this,$t),Vt=e(this,St);if(Vt!=null&&Vt.str&&(!(qt!=null&&qt.str)||qt.str===Vt.str))G.XfaLayer.render({xfaHtml:Vt.html,intent:"richText",div:it}),it.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(qt);it.append(Ze)}let ve=!!e(this,Jt),Yt=ve?e(this,Jt):e(this,at);for(const Ze of e(this,ie))if(!Yt||p.Util.intersect(Ze.data.rect,Yt)!==null){Yt=Ze.data.rect,ve=!0;break}const Kt=p.Util.normalizeRect([Yt[0],N[3]-Yt[1]+N[1],Yt[2],N[3]-Yt[3]+N[1]]),Ee=ve?Yt[2]-Yt[0]+5:0,De=Kt[0]+Ee,je=Kt[1],{style:ln}=e(this,wt);ln.left=`${100*(De-j)/n}%`,ln.top=`${100*(je-K)/_}%`,e(this,wt).append(it)}_formatContents({str:N,dir:n}){const _=document.createElement("p");_.classList.add("popupContent"),_.dir=n;const j=N.split(/(?:\r\n?|\n)/);for(let K=0,it=j.length;K<it;++K){const gt=j[K];_.append(document.createTextNode(gt)),K<it-1&&_.append(document.createElement("br"))}return _}forceHide(){ft(this,jt,this.isVisible),e(this,jt)&&(e(this,wt).hidden=!0)}maybeShow(){e(this,jt)&&(ft(this,jt,!1),e(this,wt).hidden=!1)}get isVisible(){return e(this,wt).hidden===!1}}z=new WeakMap,dt=new WeakMap,ct=new WeakMap,bt=new WeakMap,Et=new WeakMap,Dt=new WeakMap,wt=new WeakMap,$t=new WeakMap,ie=new WeakMap,It=new WeakMap,Jt=new WeakMap,Pt=new WeakMap,ht=new WeakMap,at=new WeakMap,St=new WeakMap,Wt=new WeakMap,jt=new WeakMap,le=new WeakSet,$r=function(N){N.altKey||N.shiftKey||N.ctrlKey||N.metaKey||(N.key==="Enter"||N.key==="Escape"&&e(this,Pt))&&tt(this,ce,pi).call(this)},ce=new WeakSet,pi=function(){ft(this,Pt,!e(this,Pt)),e(this,Pt)?(tt(this,_e,nr).call(this),e(this,wt).addEventListener("click",e(this,Et)),e(this,wt).addEventListener("keydown",e(this,dt))):(tt(this,we,ir).call(this),e(this,wt).removeEventListener("click",e(this,Et)),e(this,wt).removeEventListener("keydown",e(this,dt)))},_e=new WeakSet,nr=function(){e(this,ht)||this.render(),this.isVisible?e(this,Pt)&&e(this,wt).classList.add("focused"):(e(this,wt).hidden=!1,e(this,wt).style.zIndex=parseInt(e(this,wt).style.zIndex)+1e3)},we=new WeakSet,ir=function(){e(this,wt).classList.remove("focused"),!(e(this,Pt)||!this.isVisible)&&(e(this,wt).hidden=!0,e(this,wt).style.zIndex=parseInt(e(this,wt).style.zIndex)-1e3)};class M extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0}),this.textContent=N.data.textContent,this.textPosition=N.data.textPosition,this.annotationEditorType=p.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const N=document.createElement("div");N.classList.add("annotationTextContent"),N.setAttribute("role","comment");for(const n of this.textContent){const _=document.createElement("span");_.textContent=n,N.append(_)}this.container.append(N)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}m.FreeTextAnnotationElement=M;class A extends b{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});U(this,nt,null)}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:_,height:j}=B(n.rect),K=this.svgFactory.create(_,j,!0),it=ft(this,nt,this.svgFactory.createElement("svg:line"));return it.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),it.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),it.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),it.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),it.setAttribute("stroke-width",n.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),K.append(it),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}nt=new WeakMap;class q extends b{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});U(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:_,height:j}=B(n.rect),K=this.svgFactory.create(_,j,!0),it=n.borderStyle.width,gt=ft(this,Y,this.svgFactory.createElement("svg:rect"));return gt.setAttribute("x",it/2),gt.setAttribute("y",it/2),gt.setAttribute("width",_-it),gt.setAttribute("height",j-it),gt.setAttribute("stroke-width",it||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class Q extends b{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});U(this,Ft,null)}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:_,height:j}=B(n.rect),K=this.svgFactory.create(_,j,!0),it=n.borderStyle.width,gt=ft(this,Ft,this.svgFactory.createElement("svg:ellipse"));return gt.setAttribute("cx",_/2),gt.setAttribute("cy",j/2),gt.setAttribute("rx",_/2-it/2),gt.setAttribute("ry",j/2-it/2),gt.setAttribute("stroke-width",it||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ft=new WeakMap;class k extends b{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});U(this,At,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:_,height:j}=B(n.rect),K=this.svgFactory.create(_,j,!0);let it=[];for(const Rt of n.vertices){const qt=Rt.x-n.rect[0],Vt=n.rect[3]-Rt.y;it.push(qt+","+Vt)}it=it.join(" ");const gt=ft(this,At,this.svgFactory.createElement(this.svgElementName));return gt.setAttribute("points",it),gt.setAttribute("stroke-width",n.borderStyle.width||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),K.append(gt),this.container.append(K),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class et extends k{constructor(N){super(N),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class vt extends b{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});U(this,Re,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=p.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:_,height:j}=B(n.rect),K=this.svgFactory.create(_,j,!0);for(const it of n.inkLists){let gt=[];for(const qt of it){const Vt=qt.x-n.rect[0],ve=n.rect[3]-qt.y;gt.push(`${Vt},${ve}`)}gt=gt.join(" ");const Rt=this.svgFactory.createElement(this.svgElementName);e(this,Re).push(Rt),Rt.setAttribute("points",gt),Rt.setAttribute("stroke-width",n.borderStyle.width||1),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),!n.popupRef&&this.hasPopupData&&this._createPopup(),K.append(Rt)}return this.container.append(K),this.container}getElementsToTriggerPopup(){return e(this,Re)}addHighlightArea(){this.container.classList.add("highlightArea")}}Re=new WeakMap,m.InkAnnotationElement=vt;class $ extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Tt extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Nt extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ut extends b{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}m.StampAnnotationElement=Ut;class T extends b{constructor(n){var K;super(n,{isRenderable:!0});U(this,st);U(this,Ue,null);const{filename:_,content:j}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(_,!0),this.content=j,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:_,content:j})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:_}=this;let j;_.hasAppearance||_.fillAlpha===0?j=document.createElement("div"):(j=document.createElement("img"),j.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(j.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),j.addEventListener("dblclick",tt(this,st,rr).bind(this)),ft(this,Ue,j);const{isMac:K}=p.FeatureTest.platform;return n.addEventListener("keydown",it=>{it.key==="Enter"&&(K?it.metaKey:it.ctrlKey)&&tt(this,st,rr).call(this)}),!_.popupRef&&this.hasPopupData?this._createPopup():j.classList.add("popupTriggerArea"),n.append(j),n}getElementsToTriggerPopup(){return e(this,Ue)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ue=new WeakMap,st=new WeakSet,rr=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:N,accessibilityManager:n,annotationCanvasMap:_,l10n:j,page:K,viewport:it}){U(this,ne);U(this,Lt);U(this,Qt,null);U(this,zt,null);U(this,te,new Map);this.div=N,ft(this,Qt,n),ft(this,zt,_),this.l10n=j,this.page=K,this.viewport=it,this.zIndex=0,this.l10n||(this.l10n=Ct.NullL10n)}async render(N){const{annotations:n}=N,_=this.div;(0,E.setLayerDimensions)(_,this.viewport);const j=new Map,K={data:null,layer:_,linkService:N.linkService,downloadManager:N.downloadManager,imageResourcesPath:N.imageResourcesPath||"",renderForms:N.renderForms!==!1,svgFactory:new E.DOMSVGFactory,annotationStorage:N.annotationStorage||new t.AnnotationStorage,enableScripting:N.enableScripting===!0,hasJSActions:N.hasJSActions,fieldObjects:N.fieldObjects,parent:this,elements:null};for(const it of n){if(it.noHTML)continue;const gt=it.annotationType===p.AnnotationType.POPUP;if(gt){const Vt=j.get(it.id);if(!Vt)continue;K.elements=Vt}else{const{width:Vt,height:ve}=B(it.rect);if(Vt<=0||ve<=0)continue}K.data=it;const Rt=P.create(K);if(!Rt.isRenderable)continue;if(!gt&&it.popupRef){const Vt=j.get(it.popupRef);Vt?Vt.push(Rt):j.set(it.popupRef,[Rt])}Rt.annotationEditorType>0&&e(this,te).set(Rt.data.id,Rt);const qt=Rt.render();it.hidden&&(qt.style.visibility="hidden"),tt(this,ne,Yr).call(this,qt,it.id)}tt(this,Lt,sr).call(this),await this.l10n.translate(_)}update({viewport:N}){const n=this.div;this.viewport=N,(0,E.setLayerDimensions)(n,{rotation:N.rotation}),tt(this,Lt,sr).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(e(this,te).values())}getEditableAnnotation(N){return e(this,te).get(N)}}Qt=new WeakMap,zt=new WeakMap,te=new WeakMap,ne=new WeakSet,Yr=function(N,n){var j;const _=N.firstChild||N;_.id=`${p.AnnotationPrefix}${n}`,this.div.append(N),(j=e(this,Qt))==null||j.moveElementInDOM(this.div,N,_,!1)},Lt=new WeakSet,sr=function(){if(!e(this,zt))return;const N=this.div;for(const[n,_]of e(this,zt)){const j=N.querySelector(`[data-annotation-id="${n}"]`);if(!j)continue;const{firstChild:K}=j;K?K.nodeName==="CANVAS"?K.replaceWith(_):K.before(_):j.append(_)}e(this,zt).clear()},m.AnnotationLayer=i},(f,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.ColorConverters=void 0;function mt(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function p(t){return Math.max(0,Math.min(255,255*t))}class E{static CMYK_G([Z,Ct,G,L]){return["G",1-Math.min(1,.3*Z+.59*G+.11*Ct+L)]}static G_CMYK([Z]){return["CMYK",0,0,0,1-Z]}static G_RGB([Z]){return["RGB",Z,Z,Z]}static G_rgb([Z]){return Z=p(Z),[Z,Z,Z]}static G_HTML([Z]){const Ct=mt(Z);return`#${Ct}${Ct}${Ct}`}static RGB_G([Z,Ct,G]){return["G",.3*Z+.59*Ct+.11*G]}static RGB_rgb(Z){return Z.map(p)}static RGB_HTML(Z){return`#${Z.map(mt).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Z,Ct,G,L]){return["RGB",1-Math.min(1,Z+L),1-Math.min(1,G+L),1-Math.min(1,Ct+L)]}static CMYK_rgb([Z,Ct,G,L]){return[p(1-Math.min(1,Z+L)),p(1-Math.min(1,G+L)),p(1-Math.min(1,Ct+L))]}static CMYK_HTML(Z){const Ct=this.CMYK_RGB(Z).slice(1);return this.RGB_HTML(Ct)}static RGB_CMYK([Z,Ct,G]){const L=1-Z,u=1-Ct,H=1-G,B=Math.min(L,u,H);return["CMYK",L,u,H,B]}}m.ColorConverters=E},(f,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NullL10n=void 0,m.getL10nFallback=p;const mt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};mt.print_progress_percent="{{progress}}%";function p(Z,Ct){switch(Z){case"find_match_count":Z=`find_match_count[${Ct.total===1?"one":"other"}]`;break;case"find_match_count_limit":Z=`find_match_count_limit[${Ct.limit===1?"one":"other"}]`;break}return mt[Z]||""}function E(Z,Ct){return Ct?Z.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(G,L)=>L in Ct?Ct[L]:"{{"+L+"}}"):Z}const t={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Z,Ct=null,G=p(Z,Ct)){return E(G,Ct)},async translate(Z){}};m.NullL10n=t},(f,m,mt)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaLayer=void 0;var p=mt(25);class E{static setupStorage(Z,Ct,G,L,u){const H=L.getValue(Ct,{value:null});switch(G.name){case"textarea":if(H.value!==null&&(Z.textContent=H.value),u==="print")break;Z.addEventListener("input",B=>{L.setValue(Ct,{value:B.target.value})});break;case"input":if(G.attributes.type==="radio"||G.attributes.type==="checkbox"){if(H.value===G.attributes.xfaOn?Z.setAttribute("checked",!0):H.value===G.attributes.xfaOff&&Z.removeAttribute("checked"),u==="print")break;Z.addEventListener("change",B=>{L.setValue(Ct,{value:B.target.checked?B.target.getAttribute("xfaOn"):B.target.getAttribute("xfaOff")})})}else{if(H.value!==null&&Z.setAttribute("value",H.value),u==="print")break;Z.addEventListener("input",B=>{L.setValue(Ct,{value:B.target.value})})}break;case"select":if(H.value!==null){Z.setAttribute("value",H.value);for(const B of G.children)B.attributes.value===H.value?B.attributes.selected=!0:B.attributes.hasOwnProperty("selected")&&delete B.attributes.selected}Z.addEventListener("input",B=>{const P=B.target.options,b=P.selectedIndex===-1?"":P[P.selectedIndex].value;L.setValue(Ct,{value:b})});break}}static setAttributes({html:Z,element:Ct,storage:G=null,intent:L,linkService:u}){const{attributes:H}=Ct,B=Z instanceof HTMLAnchorElement;H.type==="radio"&&(H.name=`${H.name}-${L}`);for(const[P,b]of Object.entries(H))if(b!=null)switch(P){case"class":b.length&&Z.setAttribute(P,b.join(" "));break;case"dataId":break;case"id":Z.setAttribute("data-element-id",b);break;case"style":Object.assign(Z.style,b);break;case"textContent":Z.textContent=b;break;default:(!B||P!=="href"&&P!=="newWindow")&&Z.setAttribute(P,b)}B&&u.addLinkAttributes(Z,H.href,H.newWindow),G&&H.dataId&&this.setupStorage(Z,H.dataId,Ct,G)}static render(Z){var w;const Ct=Z.annotationStorage,G=Z.linkService,L=Z.xfaHtml,u=Z.intent||"display",H=document.createElement(L.name);L.attributes&&this.setAttributes({html:H,element:L,intent:u,linkService:G});const B=[[L,-1,H]],P=Z.div;if(P.append(H),Z.viewport){const v=`matrix(${Z.viewport.transform.join(",")})`;P.style.transform=v}u!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const b=[];for(;B.length>0;){const[v,C,F]=B.at(-1);if(C+1===v.children.length){B.pop();continue}const R=v.children[++B.at(-1)[1]];if(R===null)continue;const{name:x}=R;if(x==="#text"){const d=document.createTextNode(R.value);b.push(d),F.append(d);continue}const o=(w=R==null?void 0:R.attributes)!=null&&w.xmlns?document.createElementNS(R.attributes.xmlns,x):document.createElement(x);if(F.append(o),R.attributes&&this.setAttributes({html:o,element:R,storage:Ct,intent:u,linkService:G}),R.children&&R.children.length>0)B.push([R,-1,o]);else if(R.value){const d=document.createTextNode(R.value);p.XfaText.shouldBuildText(x)&&b.push(d),o.append(d)}}for(const v of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:b}}static update(Z){const Ct=`matrix(${Z.viewport.transform.join(",")})`;Z.div.style.transform=Ct,Z.div.hidden=!1}}m.XfaLayer=E},(f,m,mt)=>{var L,u,H,B,P,b,w,v,C,F,R,x,o,d,D,Kr,l,Jr,A,Zr,Q,Qr,et,ar,vt,ts,yt,or,Nt,es,T,ns,a,is,c,rs,S,ss,z,xn,ct,lr,Et,gi,wt,mi,ie,Wn,Jt,cr,ht,vi,St,as,jt,hr,fe,os,ge,ls,re,ur,_t,bi,Y,zn;Object.defineProperty(m,"__esModule",{value:!0}),m.InkEditor=void 0;var p=mt(1),E=mt(4),t=mt(29),Z=mt(6),Ct=mt(5);const At=class At extends E.AnnotationEditor{constructor(st){super({...st,name:"inkEditor"});U(this,D);U(this,l);U(this,A);U(this,Q);U(this,et);U(this,vt);U(this,yt);U(this,Nt);U(this,T);U(this,a);U(this,c);U(this,S);U(this,z);U(this,ct);U(this,Et);U(this,wt);U(this,ie);U(this,Jt);U(this,ht);U(this,ge);U(this,re);U(this,_t);U(this,Y);U(this,L,0);U(this,u,0);U(this,H,this.canvasPointermove.bind(this));U(this,B,this.canvasPointerleave.bind(this));U(this,P,this.canvasPointerup.bind(this));U(this,b,this.canvasPointerdown.bind(this));U(this,w,new Path2D);U(this,v,!1);U(this,C,!1);U(this,F,!1);U(this,R,null);U(this,x,0);U(this,o,0);U(this,d,null);this.color=st.color||null,this.thickness=st.thickness||null,this.opacity=st.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(st){E.AnnotationEditor.initialize(st,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(st,Ot){switch(st){case p.AnnotationEditorParamsType.INK_THICKNESS:At._defaultThickness=Ot;break;case p.AnnotationEditorParamsType.INK_COLOR:At._defaultColor=Ot;break;case p.AnnotationEditorParamsType.INK_OPACITY:At._defaultOpacity=Ot/100;break}}updateParams(st,Ot){switch(st){case p.AnnotationEditorParamsType.INK_THICKNESS:tt(this,D,Kr).call(this,Ot);break;case p.AnnotationEditorParamsType.INK_COLOR:tt(this,l,Jr).call(this,Ot);break;case p.AnnotationEditorParamsType.INK_OPACITY:tt(this,A,Zr).call(this,Ot);break}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,At._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,At._defaultColor||E.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(At._defaultOpacity*100)]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||At._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,this.color||At._defaultColor||E.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??At._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(tt(this,Et,gi).call(this),tt(this,wt,mi).call(this)),this.isAttachedToDOM||(this.parent.add(this),tt(this,ie,Wn).call(this)),tt(this,Y,zn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,R).disconnect(),ft(this,R,null),super.remove())}setParent(st){!this.parent&&st?this._uiManager.removeShouldRescale(this):this.parent&&st===null&&this._uiManager.addShouldRescale(this),super.setParent(st)}onScaleChanging(){const[st,Ot]=this.parentDimensions,Qt=this.width*st,zt=this.height*Ot;this.setDimensions(Qt,zt)}enableEditMode(){e(this,v)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,b)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,v)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ft(this,v,!0),this.div.classList.add("disabled"),tt(this,Y,zn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(st){this._focusEventsAllowed&&(super.focusin(st),this.enableEditMode())}canvasPointerdown(st){st.button!==0||!this.isInEditMode()||e(this,v)||(this.setInForeground(),st.preventDefault(),st.type!=="mouse"&&this.div.focus(),tt(this,vt,ts).call(this,st.offsetX,st.offsetY))}canvasPointermove(st){st.preventDefault(),tt(this,yt,or).call(this,st.offsetX,st.offsetY)}canvasPointerup(st){st.preventDefault(),tt(this,ct,lr).call(this,st)}canvasPointerleave(st){tt(this,ct,lr).call(this,st)}get isResizable(){return!this.isEmpty()&&e(this,v)}render(){if(this.div)return this.div;let st,Ot;this.width&&(st=this.x,Ot=this.y),super.render(),E.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Ie=>{var Lt;return(Lt=this.div)==null?void 0:Lt.setAttribute("aria-label",Ie)});const[Qt,zt,te,ne]=tt(this,Q,Qr).call(this);if(this.setAt(Qt,zt,0,0),this.setDims(te,ne),tt(this,Et,gi).call(this),this.width){const[Ie,Lt]=this.parentDimensions;this.setAspectRatio(this.width*Ie,this.height*Lt),this.setAt(st*Ie,Ot*Lt,this.width*Ie,this.height*Lt),ft(this,F,!0),tt(this,ie,Wn).call(this),this.setDims(this.width*Ie,this.height*Lt),tt(this,z,xn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return tt(this,wt,mi).call(this),this.div}setDimensions(st,Ot){const Qt=Math.round(st),zt=Math.round(Ot);if(e(this,x)===Qt&&e(this,o)===zt)return;ft(this,x,Qt),ft(this,o,zt),this.canvas.style.visibility="hidden";const[te,ne]=this.parentDimensions;this.width=st/te,this.height=Ot/ne,this.fixAndSetPosition(),e(this,v)&&tt(this,Jt,cr).call(this,st,Ot),tt(this,ie,Wn).call(this),tt(this,z,xn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(st,Ot,Qt){var K,it,gt;if(st instanceof t.InkAnnotationElement)return null;const zt=super.deserialize(st,Ot,Qt);zt.thickness=st.thickness,zt.color=p.Util.makeHexColor(...st.color),zt.opacity=st.opacity;const[te,ne]=zt.pageDimensions,Ie=zt.width*te,Lt=zt.height*ne,Te=zt.parentScale,Zt=st.thickness/2;ft(zt,v,!0),ft(zt,x,Math.round(Ie)),ft(zt,o,Math.round(Lt));const{paths:N,rect:n,rotation:_}=st;for(let{bezier:Rt}of N){Rt=tt(K=At,fe,os).call(K,Rt,n,_);const qt=[];zt.paths.push(qt);let Vt=Te*(Rt[0]-Zt),ve=Te*(Rt[1]-Zt);for(let Kt=2,he=Rt.length;Kt<he;Kt+=6){const Ee=Te*(Rt[Kt]-Zt),De=Te*(Rt[Kt+1]-Zt),je=Te*(Rt[Kt+2]-Zt),ln=Te*(Rt[Kt+3]-Zt),Ze=Te*(Rt[Kt+4]-Zt),vn=Te*(Rt[Kt+5]-Zt);qt.push([[Vt,ve],[Ee,De],[je,ln],[Ze,vn]]),Vt=Ze,ve=vn}const Yt=tt(this,St,as).call(this,qt);zt.bezierPath2D.push(Yt)}const j=tt(it=zt,re,ur).call(it);return ft(zt,u,Math.max(E.AnnotationEditor.MIN_SIZE,j[2]-j[0])),ft(zt,L,Math.max(E.AnnotationEditor.MIN_SIZE,j[3]-j[1])),tt(gt=zt,Jt,cr).call(gt,Ie,Lt),zt}serialize(){if(this.isEmpty())return null;const st=this.getRect(0,0),Ot=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:p.AnnotationEditorType.INK,color:Ot,thickness:this.thickness,opacity:this.opacity,paths:tt(this,ge,ls).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,st),pageIndex:this.pageIndex,rect:st,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};L=new WeakMap,u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakMap,F=new WeakMap,R=new WeakMap,x=new WeakMap,o=new WeakMap,d=new WeakMap,D=new WeakSet,Kr=function(st){const Ot=this.thickness;this.addCommands({cmd:()=>{this.thickness=st,tt(this,Y,zn).call(this)},undo:()=>{this.thickness=Ot,tt(this,Y,zn).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Jr=function(st){const Ot=this.color;this.addCommands({cmd:()=>{this.color=st,tt(this,z,xn).call(this)},undo:()=>{this.color=Ot,tt(this,z,xn).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A=new WeakSet,Zr=function(st){st/=100;const Ot=this.opacity;this.addCommands({cmd:()=>{this.opacity=st,tt(this,z,xn).call(this)},undo:()=>{this.opacity=Ot,tt(this,z,xn).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Q=new WeakSet,Qr=function(){const{parentRotation:st,parentDimensions:[Ot,Qt]}=this;switch(st){case 90:return[0,Qt,Qt,Ot];case 180:return[Ot,Qt,Ot,Qt];case 270:return[Ot,0,Qt,Ot];default:return[0,0,Ot,Qt]}},et=new WeakSet,ar=function(){const{ctx:st,color:Ot,opacity:Qt,thickness:zt,parentScale:te,scaleFactor:ne}=this;st.lineWidth=zt*te/ne,st.lineCap="round",st.lineJoin="round",st.miterLimit=10,st.strokeStyle=`${Ot}${(0,Ct.opacityToHex)(Qt)}`},vt=new WeakSet,ts=function(st,Ot){this.canvas.addEventListener("contextmenu",Z.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,B)),this.canvas.addEventListener("pointermove",e(this,H)),this.canvas.addEventListener("pointerup",e(this,P)),this.canvas.removeEventListener("pointerdown",e(this,b)),this.isEditing=!0,e(this,F)||(ft(this,F,!0),tt(this,ie,Wn).call(this),this.thickness||(this.thickness=At._defaultThickness),this.color||(this.color=At._defaultColor||E.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=At._defaultOpacity)),this.currentPath.push([st,Ot]),ft(this,C,!1),tt(this,et,ar).call(this),ft(this,d,()=>{tt(this,a,is).call(this),e(this,d)&&window.requestAnimationFrame(e(this,d))}),window.requestAnimationFrame(e(this,d))},yt=new WeakSet,or=function(st,Ot){const[Qt,zt]=this.currentPath.at(-1);if(this.currentPath.length>1&&st===Qt&&Ot===zt)return;const te=this.currentPath;let ne=e(this,w);if(te.push([st,Ot]),ft(this,C,!0),te.length<=2){ne.moveTo(...te[0]),ne.lineTo(st,Ot);return}te.length===3&&(ft(this,w,ne=new Path2D),ne.moveTo(...te[0])),tt(this,c,rs).call(this,ne,...te.at(-3),...te.at(-2),st,Ot)},Nt=new WeakSet,es=function(){if(this.currentPath.length===0)return;const st=this.currentPath.at(-1);e(this,w).lineTo(...st)},T=new WeakSet,ns=function(st,Ot){ft(this,d,null),st=Math.min(Math.max(st,0),this.canvas.width),Ot=Math.min(Math.max(Ot,0),this.canvas.height),tt(this,yt,or).call(this,st,Ot),tt(this,Nt,es).call(this);let Qt;if(this.currentPath.length!==1)Qt=tt(this,S,ss).call(this);else{const Lt=[st,Ot];Qt=[[Lt,Lt.slice(),Lt.slice(),Lt]]}const zt=e(this,w),te=this.currentPath;this.currentPath=[],ft(this,w,new Path2D);const ne=()=>{this.allRawPaths.push(te),this.paths.push(Qt),this.bezierPath2D.push(zt),this.rebuild()},Ie=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(tt(this,Et,gi).call(this),tt(this,wt,mi).call(this)),tt(this,Y,zn).call(this))};this.addCommands({cmd:ne,undo:Ie,mustExec:!0})},a=new WeakSet,is=function(){if(!e(this,C))return;ft(this,C,!1);const st=Math.ceil(this.thickness*this.parentScale),Ot=this.currentPath.slice(-3),Qt=Ot.map(ne=>ne[0]),zt=Ot.map(ne=>ne[1]);Math.min(...Qt)-st,Math.max(...Qt)+st,Math.min(...zt)-st,Math.max(...zt)+st;const{ctx:te}=this;te.save(),te.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ne of this.bezierPath2D)te.stroke(ne);te.stroke(e(this,w)),te.restore()},c=new WeakSet,rs=function(st,Ot,Qt,zt,te,ne,Ie){const Lt=(Ot+zt)/2,Te=(Qt+te)/2,Zt=(zt+ne)/2,N=(te+Ie)/2;st.bezierCurveTo(Lt+2*(zt-Lt)/3,Te+2*(te-Te)/3,Zt+2*(zt-Zt)/3,N+2*(te-N)/3,Zt,N)},S=new WeakSet,ss=function(){const st=this.currentPath;if(st.length<=2)return[[st[0],st[0],st.at(-1),st.at(-1)]];const Ot=[];let Qt,[zt,te]=st[0];for(Qt=1;Qt<st.length-2;Qt++){const[n,_]=st[Qt],[j,K]=st[Qt+1],it=(n+j)/2,gt=(_+K)/2,Rt=[zt+2*(n-zt)/3,te+2*(_-te)/3],qt=[it+2*(n-it)/3,gt+2*(_-gt)/3];Ot.push([[zt,te],Rt,qt,[it,gt]]),[zt,te]=[it,gt]}const[ne,Ie]=st[Qt],[Lt,Te]=st[Qt+1],Zt=[zt+2*(ne-zt)/3,te+2*(Ie-te)/3],N=[Lt+2*(ne-Lt)/3,Te+2*(Ie-Te)/3];return Ot.push([[zt,te],Zt,N,[Lt,Te]]),Ot},z=new WeakSet,xn=function(){if(this.isEmpty()){tt(this,ht,vi).call(this);return}tt(this,et,ar).call(this);const{canvas:st,ctx:Ot}=this;Ot.setTransform(1,0,0,1,0,0),Ot.clearRect(0,0,st.width,st.height),tt(this,ht,vi).call(this);for(const Qt of this.bezierPath2D)Ot.stroke(Qt)},ct=new WeakSet,lr=function(st){this.canvas.removeEventListener("pointerleave",e(this,B)),this.canvas.removeEventListener("pointermove",e(this,H)),this.canvas.removeEventListener("pointerup",e(this,P)),this.canvas.addEventListener("pointerdown",e(this,b)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Z.noContextMenu)},10),tt(this,T,ns).call(this,st.offsetX,st.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Et=new WeakSet,gi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",E.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(st=>{var Ot;return(Ot=this.canvas)==null?void 0:Ot.setAttribute("aria-label",st)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},wt=new WeakSet,mi=function(){ft(this,R,new ResizeObserver(st=>{const Ot=st[0].contentRect;Ot.width&&Ot.height&&this.setDimensions(Ot.width,Ot.height)})),e(this,R).observe(this.div)},ie=new WeakSet,Wn=function(){if(!e(this,F))return;const[st,Ot]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*st),this.canvas.height=Math.ceil(this.height*Ot),tt(this,ht,vi).call(this)},Jt=new WeakSet,cr=function(st,Ot){const Qt=tt(this,_t,bi).call(this),zt=(st-Qt)/e(this,u),te=(Ot-Qt)/e(this,L);this.scaleFactor=Math.min(zt,te)},ht=new WeakSet,vi=function(){const st=tt(this,_t,bi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+st,this.translationY*this.scaleFactor+st)},St=new WeakSet,as=function(st){const Ot=new Path2D;for(let Qt=0,zt=st.length;Qt<zt;Qt++){const[te,ne,Ie,Lt]=st[Qt];Qt===0&&Ot.moveTo(...te),Ot.bezierCurveTo(ne[0],ne[1],Ie[0],Ie[1],Lt[0],Lt[1])}return Ot},jt=new WeakSet,hr=function(st,Ot,Qt){const[zt,te,ne,Ie]=Ot;switch(Qt){case 0:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2)st[Lt]+=zt,st[Lt+1]=Ie-st[Lt+1];break;case 90:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2){const Zt=st[Lt];st[Lt]=st[Lt+1]+zt,st[Lt+1]=Zt+te}break;case 180:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2)st[Lt]=ne-st[Lt],st[Lt+1]+=te;break;case 270:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2){const Zt=st[Lt];st[Lt]=ne-st[Lt+1],st[Lt+1]=Ie-Zt}break;default:throw new Error("Invalid rotation")}return st},fe=new WeakSet,os=function(st,Ot,Qt){const[zt,te,ne,Ie]=Ot;switch(Qt){case 0:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2)st[Lt]-=zt,st[Lt+1]=Ie-st[Lt+1];break;case 90:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2){const Zt=st[Lt];st[Lt]=st[Lt+1]-te,st[Lt+1]=Zt-zt}break;case 180:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2)st[Lt]=ne-st[Lt],st[Lt+1]-=te;break;case 270:for(let Lt=0,Te=st.length;Lt<Te;Lt+=2){const Zt=st[Lt];st[Lt]=Ie-st[Lt+1],st[Lt+1]=ne-Zt}break;default:throw new Error("Invalid rotation")}return st},ge=new WeakSet,ls=function(st,Ot,Qt,zt){var Te,Zt;const te=[],ne=this.thickness/2,Ie=st*Ot+ne,Lt=st*Qt+ne;for(const N of this.paths){const n=[],_=[];for(let j=0,K=N.length;j<K;j++){const[it,gt,Rt,qt]=N[j],Vt=st*it[0]+Ie,ve=st*it[1]+Lt,Yt=st*gt[0]+Ie,Kt=st*gt[1]+Lt,he=st*Rt[0]+Ie,Ee=st*Rt[1]+Lt,De=st*qt[0]+Ie,je=st*qt[1]+Lt;j===0&&(n.push(Vt,ve),_.push(Vt,ve)),n.push(Yt,Kt,he,Ee,De,je),_.push(Yt,Kt),j===K-1&&_.push(De,je)}te.push({bezier:tt(Te=At,jt,hr).call(Te,n,zt,this.rotation),points:tt(Zt=At,jt,hr).call(Zt,_,zt,this.rotation)})}return te},re=new WeakSet,ur=function(){let st=1/0,Ot=-1/0,Qt=1/0,zt=-1/0;for(const te of this.paths)for(const[ne,Ie,Lt,Te]of te){const Zt=p.Util.bezierBoundingBox(...ne,...Ie,...Lt,...Te);st=Math.min(st,Zt[0]),Qt=Math.min(Qt,Zt[1]),Ot=Math.max(Ot,Zt[2]),zt=Math.max(zt,Zt[3])}return[st,Qt,Ot,zt]},_t=new WeakSet,bi=function(){return e(this,v)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,zn=function(st=!1){if(this.isEmpty())return;if(!e(this,v)){tt(this,z,xn).call(this);return}const Ot=tt(this,re,ur).call(this),Qt=tt(this,_t,bi).call(this);ft(this,u,Math.max(E.AnnotationEditor.MIN_SIZE,Ot[2]-Ot[0])),ft(this,L,Math.max(E.AnnotationEditor.MIN_SIZE,Ot[3]-Ot[1]));const zt=Math.ceil(Qt+e(this,u)*this.scaleFactor),te=Math.ceil(Qt+e(this,L)*this.scaleFactor),[ne,Ie]=this.parentDimensions;this.width=zt/ne,this.height=te/Ie,this.setAspectRatio(zt,te);const Lt=this.translationX,Te=this.translationY;this.translationX=-Ot[0],this.translationY=-Ot[1],tt(this,ie,Wn).call(this),tt(this,z,xn).call(this),ft(this,x,zt),ft(this,o,te),this.setDims(zt,te);const Zt=st?Qt/this.scaleFactor/2:0;this.translate(Lt-this.translationX-Zt,Te-this.translationY-Zt)},U(At,St),U(At,jt),U(At,fe),Je(At,"_defaultColor",null),Je(At,"_defaultOpacity",1),Je(At,"_defaultThickness",1),Je(At,"_type","ink");let G=At;m.InkEditor=G},(f,m,mt)=>{var G,L,u,H,B,P,b,w,v,C,F,Zn,x,Qn,d,_i,y,dr,M,cs,q,hs,k,fr,pt,yi,$,us;Object.defineProperty(m,"__esModule",{value:!0}),m.StampEditor=void 0;var p=mt(1),E=mt(4),t=mt(6),Z=mt(29);const Tt=class Tt extends E.AnnotationEditor{constructor(T){super({...T,name:"stampEditor"});U(this,F);U(this,x);U(this,d);U(this,y);U(this,M);U(this,q);U(this,k);U(this,pt);U(this,$);U(this,G,null);U(this,L,null);U(this,u,null);U(this,H,null);U(this,B,null);U(this,P,null);U(this,b,null);U(this,w,null);U(this,v,!1);U(this,C,!1);ft(this,H,T.bitmapUrl),ft(this,B,T.bitmapFile)}static initialize(T){E.AnnotationEditor.initialize(T)}static get supportedTypes(){const T=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,p.shadow)(this,"supportedTypes",T.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,p.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(T){return this.supportedTypes.includes(T)}static paste(T,i){i.pasteEditor(p.AnnotationEditorType.STAMP,{bitmapFile:T.getAsFile()})}remove(){var T,i;e(this,L)&&(ft(this,G,null),this._uiManager.imageManager.deleteId(e(this,L)),(T=e(this,P))==null||T.remove(),ft(this,P,null),(i=e(this,b))==null||i.disconnect(),ft(this,b,null)),super.remove()}rebuild(){if(!this.parent){e(this,L)&&tt(this,d,_i).call(this);return}super.rebuild(),this.div!==null&&(e(this,L)&&tt(this,d,_i).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,u)||e(this,G)||e(this,H)||e(this,B))}get isResizable(){return!0}render(){if(this.div)return this.div;let T,i;if(this.width&&(T=this.x,i=this.y),super.render(),this.div.hidden=!0,e(this,G)?tt(this,y,dr).call(this):tt(this,d,_i).call(this),this.width){const[a,s]=this.parentDimensions;this.setAt(T*a,i*s,this.width*a,this.height*s)}return this.div}static deserialize(T,i,a){if(T instanceof Z.StampAnnotationElement)return null;const s=super.deserialize(T,i,a),{rect:c,bitmapUrl:h,bitmapId:S,isSvg:I,accessibilityData:z}=T;S&&a.imageManager.isValidId(S)?ft(s,L,S):ft(s,H,h),ft(s,v,I);const[dt,ct]=s.pageDimensions;return s.width=(c[2]-c[0])/dt,s.height=(c[3]-c[1])/ct,z&&(s.altTextData=z),s}serialize(T=!1,i=null){if(this.isEmpty())return null;const a={annotationType:p.AnnotationEditorType.STAMP,bitmapId:e(this,L),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,v),structTreeParentId:this._structTreeParentId};if(T)return a.bitmapUrl=tt(this,pt,yi).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:s,altText:c}=this.altTextData;if(!s&&c&&(a.accessibilityData={type:"Figure",alt:c}),i===null)return a;i.stamps||(i.stamps=new Map);const h=e(this,v)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!i.stamps.has(e(this,L)))i.stamps.set(e(this,L),{area:h,serialized:a}),a.bitmap=tt(this,pt,yi).call(this,!1);else if(e(this,v)){const S=i.stamps.get(e(this,L));h>S.area&&(S.area=h,S.serialized.bitmap.close(),S.serialized.bitmap=tt(this,pt,yi).call(this,!1))}return a}};G=new WeakMap,L=new WeakMap,u=new WeakMap,H=new WeakMap,B=new WeakMap,P=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,C=new WeakMap,F=new WeakSet,Zn=function(T,i=!1){if(!T){this.remove();return}ft(this,G,T.bitmap),i||(ft(this,L,T.id),ft(this,v,T.isSvg)),tt(this,y,dr).call(this)},x=new WeakSet,Qn=function(){ft(this,u,null),this._uiManager.enableWaiting(!1),e(this,P)&&this.div.focus()},d=new WeakSet,_i=function(){if(e(this,L)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,L)).then(i=>tt(this,F,Zn).call(this,i,!0)).finally(()=>tt(this,x,Qn).call(this));return}if(e(this,H)){const i=e(this,H);ft(this,H,null),this._uiManager.enableWaiting(!0),ft(this,u,this._uiManager.imageManager.getFromUrl(i).then(a=>tt(this,F,Zn).call(this,a)).finally(()=>tt(this,x,Qn).call(this)));return}if(e(this,B)){const i=e(this,B);ft(this,B,null),this._uiManager.enableWaiting(!0),ft(this,u,this._uiManager.imageManager.getFromFile(i).then(a=>tt(this,F,Zn).call(this,a)).finally(()=>tt(this,x,Qn).call(this)));return}const T=document.createElement("input");T.type="file",T.accept=Tt.supportedTypesStr,ft(this,u,new Promise(i=>{T.addEventListener("change",async()=>{if(!T.files||T.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(T.files[0]);tt(this,F,Zn).call(this,a)}i()}),T.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>tt(this,x,Qn).call(this))),T.click()},y=new WeakSet,dr=function(){const{div:T}=this;let{width:i,height:a}=e(this,G);const[s,c]=this.pageDimensions,h=.75;if(this.width)i=this.width*s,a=this.height*c;else if(i>h*s||a>h*c){const dt=Math.min(h*s/i,h*c/a);i*=dt,a*=dt}const[S,I]=this.parentDimensions;this.setDims(i*S/s,a*I/c),this._uiManager.enableWaiting(!1);const z=ft(this,P,document.createElement("canvas"));T.append(z),T.hidden=!1,tt(this,k,fr).call(this,i,a),tt(this,$,us).call(this),e(this,C)||(this.parent.addUndoableEditor(this),ft(this,C,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},M=new WeakSet,cs=function(T,i){var h;const[a,s]=this.parentDimensions;this.width=T/a,this.height=i/s,this.setDims(T,i),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,w)!==null&&clearTimeout(e(this,w)),ft(this,w,setTimeout(()=>{ft(this,w,null),tt(this,k,fr).call(this,T,i)},200))},q=new WeakSet,hs=function(T,i){const{width:a,height:s}=e(this,G);let c=a,h=s,S=e(this,G);for(;c>2*T||h>2*i;){const I=c,z=h;c>2*T&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*i&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const dt=new OffscreenCanvas(c,h);dt.getContext("2d").drawImage(S,0,0,I,z,0,0,c,h),S=dt.transferToImageBitmap()}return S},k=new WeakSet,fr=function(T,i){T=Math.ceil(T),i=Math.ceil(i);const a=e(this,P);if(!a||a.width===T&&a.height===i)return;a.width=T,a.height=i;const s=e(this,v)?e(this,G):tt(this,q,hs).call(this,T,i),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(s,0,0,s.width,s.height,0,0,T,i)},pt=new WeakSet,yi=function(T){if(T){if(e(this,v)){const s=this._uiManager.imageManager.getSvgUrl(e(this,L));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=e(this,G),i.getContext("2d").drawImage(e(this,G),0,0),i.toDataURL()}if(e(this,v)){const[i,a]=this.pageDimensions,s=Math.round(this.width*i*t.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*t.PixelsPerInch.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(s,c);return h.getContext("2d").drawImage(e(this,G),0,0,e(this,G).width,e(this,G).height,0,0,s,c),h.transferToImageBitmap()}return structuredClone(e(this,G))},$=new WeakSet,us=function(){ft(this,b,new ResizeObserver(T=>{const i=T[0].contentRect;i.width&&i.height&&tt(this,M,cs).call(this,i.width,i.height)})),e(this,b).observe(this.div)},Je(Tt,"_type","stamp");let Ct=Tt;m.StampEditor=Ct}],__webpack_module_cache__={};function __w_pdfjs_require__(f){var m=__webpack_module_cache__[f];if(m!==void 0)return m.exports;var mt=__webpack_module_cache__[f]={exports:{}};return __webpack_modules__[f](mt,mt.exports,__w_pdfjs_require__),mt.exports}var __webpack_exports__={};return(()=>{var f=__webpack_exports__;Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"AbortException",{enumerable:!0,get:function(){return m.AbortException}}),Object.defineProperty(f,"AnnotationEditorLayer",{enumerable:!0,get:function(){return t.AnnotationEditorLayer}}),Object.defineProperty(f,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return m.AnnotationEditorParamsType}}),Object.defineProperty(f,"AnnotationEditorType",{enumerable:!0,get:function(){return m.AnnotationEditorType}}),Object.defineProperty(f,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Z.AnnotationEditorUIManager}}),Object.defineProperty(f,"AnnotationLayer",{enumerable:!0,get:function(){return Ct.AnnotationLayer}}),Object.defineProperty(f,"AnnotationMode",{enumerable:!0,get:function(){return m.AnnotationMode}}),Object.defineProperty(f,"CMapCompressionType",{enumerable:!0,get:function(){return m.CMapCompressionType}}),Object.defineProperty(f,"DOMSVGFactory",{enumerable:!0,get:function(){return p.DOMSVGFactory}}),Object.defineProperty(f,"FeatureTest",{enumerable:!0,get:function(){return m.FeatureTest}}),Object.defineProperty(f,"GlobalWorkerOptions",{enumerable:!0,get:function(){return G.GlobalWorkerOptions}}),Object.defineProperty(f,"ImageKind",{enumerable:!0,get:function(){return m.ImageKind}}),Object.defineProperty(f,"InvalidPDFException",{enumerable:!0,get:function(){return m.InvalidPDFException}}),Object.defineProperty(f,"MissingPDFException",{enumerable:!0,get:function(){return m.MissingPDFException}}),Object.defineProperty(f,"OPS",{enumerable:!0,get:function(){return m.OPS}}),Object.defineProperty(f,"PDFDataRangeTransport",{enumerable:!0,get:function(){return mt.PDFDataRangeTransport}}),Object.defineProperty(f,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(f,"PDFWorker",{enumerable:!0,get:function(){return mt.PDFWorker}}),Object.defineProperty(f,"PasswordResponses",{enumerable:!0,get:function(){return m.PasswordResponses}}),Object.defineProperty(f,"PermissionFlag",{enumerable:!0,get:function(){return m.PermissionFlag}}),Object.defineProperty(f,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(f,"PromiseCapability",{enumerable:!0,get:function(){return m.PromiseCapability}}),Object.defineProperty(f,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(f,"SVGGraphics",{enumerable:!0,get:function(){return mt.SVGGraphics}}),Object.defineProperty(f,"UnexpectedResponseException",{enumerable:!0,get:function(){return m.UnexpectedResponseException}}),Object.defineProperty(f,"Util",{enumerable:!0,get:function(){return m.Util}}),Object.defineProperty(f,"VerbosityLevel",{enumerable:!0,get:function(){return m.VerbosityLevel}}),Object.defineProperty(f,"XfaLayer",{enumerable:!0,get:function(){return L.XfaLayer}}),Object.defineProperty(f,"build",{enumerable:!0,get:function(){return mt.build}}),Object.defineProperty(f,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return m.createValidAbsoluteUrl}}),Object.defineProperty(f,"getDocument",{enumerable:!0,get:function(){return mt.getDocument}}),Object.defineProperty(f,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(f,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(f,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(f,"isDataScheme",{enumerable:!0,get:function(){return p.isDataScheme}}),Object.defineProperty(f,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(f,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(f,"noContextMenu",{enumerable:!0,get:function(){return p.noContextMenu}}),Object.defineProperty(f,"normalizeUnicode",{enumerable:!0,get:function(){return m.normalizeUnicode}}),Object.defineProperty(f,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(f,"setLayerDimensions",{enumerable:!0,get:function(){return p.setLayerDimensions}}),Object.defineProperty(f,"shadow",{enumerable:!0,get:function(){return m.shadow}}),Object.defineProperty(f,"updateTextLayer",{enumerable:!0,get:function(){return E.updateTextLayer}}),Object.defineProperty(f,"version",{enumerable:!0,get:function(){return mt.version}});var m=__w_pdfjs_require__(1),mt=__w_pdfjs_require__(2),p=__w_pdfjs_require__(6),E=__w_pdfjs_require__(26),t=__w_pdfjs_require__(27),Z=__w_pdfjs_require__(5),Ct=__w_pdfjs_require__(29),G=__w_pdfjs_require__(14),L=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(f){var m=reactExports,mt=pdfExports;function p(r){var g=Object.create(null);return r&&Object.keys(r).forEach(function(O){if(O!=="default"){var W=Object.getOwnPropertyDescriptor(r,O);Object.defineProperty(g,O,W.get?W:{enumerable:!0,get:function(){return r[O]}})}}),g.default=r,Object.freeze(g)}var E,t=p(m),Z=p(mt);f.AnnotationType=void 0,(E=f.AnnotationType||(f.AnnotationType={}))[E.Text=1]="Text",E[E.Link=2]="Link",E[E.FreeText=3]="FreeText",E[E.Line=4]="Line",E[E.Square=5]="Square",E[E.Circle=6]="Circle",E[E.Polygon=7]="Polygon",E[E.Polyline=8]="Polyline",E[E.Highlight=9]="Highlight",E[E.Underline=10]="Underline",E[E.Squiggly=11]="Squiggly",E[E.StrikeOut=12]="StrikeOut",E[E.Stamp=13]="Stamp",E[E.Caret=14]="Caret",E[E.Ink=15]="Ink",E[E.Popup=16]="Popup",E[E.FileAttachment=17]="FileAttachment";var Ct=function(r,g){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,W){O.__proto__=W}||function(O,W){for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(O[X]=W[X])},Ct(r,g)};function G(r,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function O(){this.constructor=r}Ct(r,g),r.prototype=g===null?Object.create(g):(O.prototype=g.prototype,new O)}var L,u=function(){return u=Object.assign||function(r){for(var g,O=1,W=arguments.length;O<W;O++)for(var X in g=arguments[O])Object.prototype.hasOwnProperty.call(g,X)&&(r[X]=g[X]);return r},u.apply(this,arguments)};f.TextDirection=void 0,(L=f.TextDirection||(f.TextDirection={})).RightToLeft="RTL",L.LeftToRight="LTR";var H,B=t.createContext({currentTheme:"light",direction:f.TextDirection.LeftToRight,setCurrentTheme:function(){}}),P=function(r){var g=[];return Object.keys(r).forEach(function(O){O&&r[O]&&g.push(O)}),g.join(" ")},b=typeof window<"u"?t.useLayoutEffect:t.useEffect,w=function(r){var g=t.useRef(null),O=r.once,W=r.threshold,X=r.onVisibilityChanged;return b(function(){var J=g.current;if(J){var ut=new IntersectionObserver(function(rt){rt.forEach(function(V){var lt=V.isIntersecting,ot=V.intersectionRatio;X({isVisible:lt,ratio:ot}),lt&&O&&(ut.unobserve(J),ut.disconnect())})},{threshold:W||0});return ut.observe(J),function(){ut.unobserve(J),ut.disconnect()}}},[]),g},v=function(r){var g=r.children,O=r.ignoreDirection,W=O!==void 0&&O,X=r.size,J=X===void 0?24:X,ut=t.useContext(B).direction,rt=!W&&ut===f.TextDirection.RightToLeft,V="".concat(J||24,"px");return t.createElement("svg",{"aria-hidden":"true",className:P({"rpv-core__icon":!0,"rpv-core__icon--rtl":rt}),focusable:"false",height:V,viewBox:"0 0 24 24",width:V},g)},C=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},F=function(r){var g=r.children,O=r.testId,W=r.onClick,X=t.useContext(B).direction===f.TextDirection.RightToLeft,J=O?{"data-testid":O}:{};return t.createElement("button",u({className:P({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":X}),type:"button",onClick:W},J),g)},R=function(r){var g=r.size,O=g===void 0?"4rem":g,W=r.testId,X=t.useState(!1),J=X[0],ut=X[1],rt=W?{"data-testid":W}:{},V=w({onVisibilityChanged:function(lt){ut(lt.isVisible)}});return t.createElement("div",u({},rt,{className:P({"rpv-core__spinner":!0,"rpv-core__spinner--animating":J}),ref:V,style:{height:O,width:O}}))},x=function(r){var g=r.ariaLabel,O=g===void 0?"":g,W=r.autoFocus,X=W!==void 0&&W,J=r.placeholder,ut=J===void 0?"":J,rt=r.testId,V=r.type,lt=V===void 0?"text":V,ot=r.value,Mt=ot===void 0?"":ot,kt=r.onChange,xt=r.onKeyDown,Xt=xt===void 0?function(){}:xt,Gt=t.useContext(B).direction,Ht=t.useRef(),Le=Gt===f.TextDirection.RightToLeft,pe={ref:Ht,"data-testid":"","aria-label":O,className:P({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Le}),placeholder:ut,value:Mt,onChange:function(me){return kt(me.target.value)},onKeyDown:Xt};return rt&&(pe["data-testid"]=rt),b(function(){if(X){var me=Ht.current;if(me){var Se=window.scrollX,se=window.scrollY;me.focus(),window.scrollTo(Se,se)}}},[]),lt==="text"?t.createElement("input",u({type:"text"},pe)):t.createElement("input",u({type:"password"},pe))};(function(r){r[r.ExitFullScreen=0]="ExitFullScreen",r[r.FullScreenChange=1]="FullScreenChange",r[r.FullScreenElement=2]="FullScreenElement",r[r.FullScreenEnabled=3]="FullScreenEnabled",r[r.RequestFullScreen=4]="RequestFullScreen"})(H||(H={}));var o,d={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},D={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},y={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},l=typeof window<"u",M=l&&(H.FullScreenEnabled in document&&d||D.FullScreenEnabled in document&&D||y.FullScreenEnabled in document&&y)||d,A=function(){return l&&M.FullScreenEnabled in document&&document[M.FullScreenEnabled]===!0},q=function(r){return l?r[M.ExitFullScreen]():Promise.resolve({})},Q=function(){return l?document[M.FullScreenElement]:null},k=function(r,g){var O=t.useRef(),W=function(){O.current&&clearTimeout(O.current)};return t.useEffect(function(){return function(){return W()}},[]),t.useCallback(function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];W(),O.current=setTimeout(function(){r.apply(void 0,X)},g)},[r,g])},et=function(){var r=t.useRef(!1);return t.useEffect(function(){return r.current=!0,function(){r.current=!1}},[]),r},pt=function(r){var g=t.useRef(r);return t.useEffect(function(){g.current=r},[r]),g.current};(function(r){r.NotRenderedYet="NotRenderedYet",r.Rendering="Rendering",r.Rendered="Rendered"})(o||(o={}));var vt,$=-9999,yt=function(r){var g=r.doc,O=g.numPages,W=g.loadingTask.docId,X=t.useMemo(function(){return Array(O).fill(null).map(function(rt,V){return{pageIndex:V,renderStatus:o.NotRenderedYet,visibility:$}})},[W]),J=t.useRef({currentRenderingPage:-1,startRange:0,endRange:O-1,visibilities:X}),ut=function(rt,V){J.current.visibilities[rt].visibility=V};return{getHighestPriorityPage:function(){var rt=J.current.visibilities.slice(J.current.startRange,J.current.endRange+1).filter(function(kt){return kt.visibility>$});if(!rt.length)return-1;for(var V=rt[0].pageIndex,lt=rt[rt.length-1].pageIndex,ot=rt.length,Mt=0;Mt<ot;Mt++){if(rt[Mt].renderStatus===o.Rendering)return-1;if(rt[Mt].renderStatus===o.NotRenderedYet)return rt[Mt].pageIndex}return lt+1<O&&J.current.visibilities[lt+1].renderStatus!==o.Rendered?lt+1:V-1>=0&&J.current.visibilities[V-1].renderStatus!==o.Rendered?V-1:-1},isInRange:function(rt){return rt>=J.current.startRange&&rt<=J.current.endRange},markNotRendered:function(){for(var rt=0;rt<O;rt++)J.current.visibilities[rt].renderStatus=o.NotRenderedYet},markRendered:function(rt){J.current.visibilities[rt].renderStatus=o.Rendered},markRendering:function(rt){J.current.currentRenderingPage!==-1&&J.current.currentRenderingPage!==rt&&J.current.visibilities[J.current.currentRenderingPage].renderStatus===o.Rendering&&(J.current.visibilities[J.current.currentRenderingPage].renderStatus=o.NotRenderedYet),J.current.visibilities[rt].renderStatus=o.Rendering,J.current.currentRenderingPage=rt},setOutOfRange:function(rt){ut(rt,$)},setRange:function(rt,V){J.current.startRange=rt,J.current.endRange=V;for(var lt=0;lt<O;lt++)(lt<rt||lt>V)&&(J.current.visibilities[lt].visibility=$,J.current.visibilities[lt].renderStatus=o.NotRenderedYet)},setVisibility:ut}},Tt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Nt=t.createContext({l10n:Tt,setL10n:function(){}}),Ut=0,T=function(){return Ut++},i=function(r,g,O){var W=function(X){var J=g.current;if(J){var ut=X.target;if(ut instanceof Element&&ut.shadowRoot){var rt=X.composedPath();rt.length>0&&!J.contains(rt[0])&&O()}else J.contains(ut)||O()}};t.useEffect(function(){if(r){var X={capture:!0};return document.addEventListener("click",W,X),function(){document.removeEventListener("click",W,X)}}},[])},a=function(r){var g=function(O){O.key==="Escape"&&r()};t.useEffect(function(){return document.addEventListener("keyup",g),function(){document.removeEventListener("keyup",g)}},[])},s=function(r){var g=r.ariaControlsSuffix,O=r.children,W=r.closeOnClickOutside,X=r.closeOnEscape,J=r.onToggle,ut=t.useRef(),rt=t.useContext(B).direction===f.TextDirection.RightToLeft;return t.useEffect(function(){var V=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=V}},[]),a(function(){ut.current&&X&&J()}),i(W,ut,J),b(function(){var V=ut.current;if(V){var lt=.75*document.body.clientHeight;V.getBoundingClientRect().height>=lt&&(V.style.overflow="auto",V.style.maxHeight="".concat(lt,"px"))}},[]),t.createElement("div",{"aria-modal":"true",className:P({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":rt}),id:"rpv-core__modal-body-".concat(g),ref:ut,role:"dialog",tabIndex:-1},O)},c=function(r){var g=r.children;return t.createElement("div",{className:"rpv-core__modal-overlay"},g)};f.ToggleStatus=void 0,(vt=f.ToggleStatus||(f.ToggleStatus={})).Close="Close",vt.Open="Open",vt.Toggle="Toggle";var h,S=function(r){var g=t.useState(r),O=g[0],W=g[1];return{opened:O,toggle:function(X){switch(X){case f.ToggleStatus.Close:W(!1);break;case f.ToggleStatus.Open:W(!0);break;case f.ToggleStatus.Toggle:default:W(function(J){return!J})}}}},I=function(r){var g=r.content,O=r.isOpened,W=O!==void 0&&O,X=r.target,J=S(W),ut=J.opened,rt=J.toggle;return t.createElement(t.Fragment,null,X&&X(rt,ut),ut&&g(rt))};f.Position=void 0,(h=f.Position||(f.Position={})).TopLeft="TOP_LEFT",h.TopCenter="TOP_CENTER",h.TopRight="TOP_RIGHT",h.RightTop="RIGHT_TOP",h.RightCenter="RIGHT_CENTER",h.RightBottom="RIGHT_BOTTOM",h.BottomLeft="BOTTOM_LEFT",h.BottomCenter="BOTTOM_CENTER",h.BottomRight="BOTTOM_RIGHT",h.LeftTop="LEFT_TOP",h.LeftCenter="LEFT_CENTER",h.LeftBottom="LEFT_BOTTOM";var z,dt,ct,bt,Et,Dt,wt,$t,ie=function(r,g,O,W,X){b(function(){var J=g.current,ut=r.current,rt=O.current;if(ut&&J&&rt){var V=rt.getBoundingClientRect(),lt=function(kt,xt,Xt,Gt){var Ht=xt.getBoundingClientRect(),Le=kt.getBoundingClientRect(),pe=Le.height,me=Le.width,Se=0,se=0;switch(Xt){case f.Position.TopLeft:Se=Ht.top-pe,se=Ht.left;break;case f.Position.TopCenter:Se=Ht.top-pe,se=Ht.left+Ht.width/2-me/2;break;case f.Position.TopRight:Se=Ht.top-pe,se=Ht.left+Ht.width-me;break;case f.Position.RightTop:Se=Ht.top,se=Ht.left+Ht.width;break;case f.Position.RightCenter:Se=Ht.top+Ht.height/2-pe/2,se=Ht.left+Ht.width;break;case f.Position.RightBottom:Se=Ht.top+Ht.height-pe,se=Ht.left+Ht.width;break;case f.Position.BottomLeft:Se=Ht.top+Ht.height,se=Ht.left;break;case f.Position.BottomCenter:Se=Ht.top+Ht.height,se=Ht.left+Ht.width/2-me/2;break;case f.Position.BottomRight:Se=Ht.top+Ht.height,se=Ht.left+Ht.width-me;break;case f.Position.LeftTop:Se=Ht.top,se=Ht.left-me;break;case f.Position.LeftCenter:Se=Ht.top+Ht.height/2-pe/2,se=Ht.left-me;break;case f.Position.LeftBottom:Se=Ht.top+Ht.height-pe,se=Ht.left-me}return{left:se+(Gt.left||0),top:Se+(Gt.top||0)}}(ut,J,W,X),ot=lt.top,Mt=lt.left;ut.style.top="".concat(ot-V.top,"px"),ut.style.left="".concat(Mt-V.left,"px")}},[])},It=function(r){var g,O=r.customClassName,W=r.position;return t.createElement("div",{className:P((g={"rpv-core__arrow":!0,"rpv-core__arrow--tl":W===f.Position.TopLeft,"rpv-core__arrow--tc":W===f.Position.TopCenter,"rpv-core__arrow--tr":W===f.Position.TopRight,"rpv-core__arrow--rt":W===f.Position.RightTop,"rpv-core__arrow--rc":W===f.Position.RightCenter,"rpv-core__arrow--rb":W===f.Position.RightBottom,"rpv-core__arrow--bl":W===f.Position.BottomLeft,"rpv-core__arrow--bc":W===f.Position.BottomCenter,"rpv-core__arrow--br":W===f.Position.BottomRight,"rpv-core__arrow--lt":W===f.Position.LeftTop,"rpv-core__arrow--lc":W===f.Position.LeftCenter,"rpv-core__arrow--lb":W===f.Position.LeftBottom},g["".concat(O)]=O!=="",g))})},Jt=function(r){var g=r.ariaControlsSuffix,O=r.children,W=r.closeOnClickOutside,X=r.offset,J=r.position,ut=r.targetRef,rt=r.onClose,V=t.useRef(),lt=t.useRef(),ot=t.useRef(),Mt=t.useContext(B).direction===f.TextDirection.RightToLeft;i(W,V,rt),ie(V,ut,ot,J,X),b(function(){var xt=lt.current;if(xt){var Xt=.75*document.body.clientHeight;xt.getBoundingClientRect().height>=Xt&&(xt.style.overflow="auto",xt.style.maxHeight="".concat(Xt,"px"))}},[]);var kt="rpv-core__popover-body-inner-".concat(g);return t.createElement(t.Fragment,null,t.createElement("div",{ref:ot,style:{left:0,position:"absolute",top:0}}),t.createElement("div",{"aria-describedby":kt,className:P({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Mt}),id:"rpv-core__popover-body-".concat(g),ref:V,role:"dialog",tabIndex:-1},t.createElement(It,{customClassName:"rpv-core__popover-body-arrow",position:J}),t.createElement("div",{id:kt,ref:lt},O)))},Pt=function(r){var g=r.closeOnEscape,O=r.onClose,W=t.useRef();return a(function(){W.current&&g&&O()}),t.createElement("div",{className:"rpv-core__popover-overlay",ref:W})},ht=function(r){var g=r.ariaControlsSuffix,O=r.children,W=r.contentRef,X=r.offset,J=r.position,ut=r.targetRef,rt=t.useRef(),V=t.useContext(B).direction===f.TextDirection.RightToLeft;return ie(W,ut,rt,J,X),t.createElement(t.Fragment,null,t.createElement("div",{ref:rt,style:{left:0,position:"absolute",top:0}}),t.createElement("div",{className:P({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":V}),id:"rpv-core__tooltip-body-".concat(g),ref:W,role:"tooltip"},t.createElement(It,{customClassName:"rpv-core__tooltip-body-arrow",position:J}),t.createElement("div",{className:"rpv-core__tooltip-body-content"},O)))};f.FullScreenMode=void 0,(z=f.FullScreenMode||(f.FullScreenMode={})).Normal="Normal",z.Entering="Entering",z.Entered="Entered",z.EnteredCompletely="EnteredCompletely",z.Exitting="Exitting",z.Exited="Exited",f.LayerRenderStatus=void 0,(dt=f.LayerRenderStatus||(f.LayerRenderStatus={}))[dt.PreRender=0]="PreRender",dt[dt.DidRender=1]="DidRender",f.PageMode=void 0,(ct=f.PageMode||(f.PageMode={})).Attachments="UseAttachments",ct.Bookmarks="UseOutlines",ct.ContentGroup="UseOC",ct.Default="UserNone",ct.FullScreen="FullScreen",ct.Thumbnails="UseThumbs",f.PasswordStatus=void 0,(bt=f.PasswordStatus||(f.PasswordStatus={})).RequiredPassword="RequiredPassword",bt.WrongPassword="WrongPassword",f.RotateDirection=void 0,(Et=f.RotateDirection||(f.RotateDirection={})).Backward="Backward",Et.Forward="Forward",f.ScrollMode=void 0,(Dt=f.ScrollMode||(f.ScrollMode={})).Page="Page",Dt.Horizontal="Horizontal",Dt.Vertical="Vertical",Dt.Wrapped="Wrapped",f.SpecialZoomLevel=void 0,(wt=f.SpecialZoomLevel||(f.SpecialZoomLevel={})).ActualSize="ActualSize",wt.PageFit="PageFit",wt.PageWidth="PageWidth",f.ViewMode=void 0,($t=f.ViewMode||(f.ViewMode={})).DualPage="DualPage",$t.DualPageWithCover="DualPageWithCover",$t.SinglePage="SinglePage";var at,St=function(r,g){return r.reduce(function(O,W,X){return X%g?O[O.length-1].push(W):O.push([W]),O},[])},Wt=function(r,g){switch(g[1].name){case"XYZ":return{bottomOffset:function(O,W){return g[3]===null?W:g[3]},leftOffset:function(O,W){return g[2]===null?0:g[2]},pageIndex:r,scaleTo:g[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:r,scaleTo:f.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:g[2],leftOffset:0,pageIndex:r,scaleTo:f.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:r,scaleTo:1}}},jt=new Map,le=new Map,fe=function(r,g){return"".concat(r.loadingTask.docId,"___").concat(g.num,"R").concat(g.gen===0?"":g.gen)},ce=function(r,g,O){jt.set(fe(r,g),O)},ge=function(r,g){if(!r)return Promise.reject("The document is not loaded yet");var O="".concat(r.loadingTask.docId,"___").concat(g),W=le.get(O);return W?Promise.resolve(W):new Promise(function(X,J){r.getPage(g+1).then(function(ut){le.set(O,ut),ut.ref&&ce(r,ut.ref,g),X(ut)})})},_e=function(r,g){return new Promise(function(O){new Promise(function(W){typeof g=="string"?r.getDestination(g).then(function(X){W(X)}):W(g)}).then(function(W){if(typeof W[0]=="object"&&W[0]!==null){var X=W[0],J=function(rt,V){var lt=fe(rt,V);return jt.has(lt)?jt.get(lt):null}(r,X);J===null?r.getPageIndex(X).then(function(rt){ce(r,X,rt),_e(r,g).then(function(V){return O(V)})}):O(Wt(J,W))}else{var ut=Wt(W[0],W);O(ut)}})})};(function(r){r[r.Solid=1]="Solid",r[r.Dashed=2]="Dashed",r[r.Beveled=3]="Beveled",r[r.Inset=4]="Inset",r[r.Underline=5]="Underline"})(at||(at={}));var re,we=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),_t=function(r,g,O,W){var X=parseInt(r,10);return X>=g&&X<=O?X:W},nt=function(r){return r.contentsObj?r.contentsObj.str:r.contents||""},Y=function(r){return r.titleObj?r.titleObj.str:r.title||""},Ft=function(r){var g=r.annotation,O=t.useContext(B).direction,W=Y(g),X=nt(g),J=O===f.TextDirection.RightToLeft,ut=t.useRef(),rt="";if(g.modificationDate){var V=function(lt){var ot=we.exec(lt);if(!ot)return null;var Mt=parseInt(ot[1],10),kt=_t(ot[2],1,12,1)-1,xt=_t(ot[3],1,31,1),Xt=_t(ot[4],0,23,0),Gt=_t(ot[5],0,59,0),Ht=_t(ot[6],0,59,0),Le=ot[7]||"Z",pe=_t(ot[8],0,23,0),me=_t(ot[9],0,59,0);switch(Le){case"-":Xt+=pe,Gt+=me;break;case"+":Xt-=pe,Gt-=me}return new Date(Date.UTC(Mt,kt,xt,Xt,Gt,Ht))}(g.modificationDate);rt=V?"".concat(V.toLocaleDateString(),", ").concat(V.toLocaleTimeString()):""}return t.useLayoutEffect(function(){if(ut.current){var lt=document.querySelector('[data-annotation-id="'.concat(g.id,'"]'));if(lt){var ot=lt;return ot.style.zIndex+=1,function(){ot.style.zIndex="".concat(parseInt(ot.style.zIndex,10)-1)}}}},[]),t.createElement("div",{ref:ut,className:P({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":J}),style:{top:g.annotationType===f.AnnotationType.Popup?"":"100%"}},W&&t.createElement(t.Fragment,null,t.createElement("div",{className:P({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!J,"rpv-core__annotation-popup-title--rtl":J})},W),t.createElement("div",{className:"rpv-core__annotation-popup-date"},rt)),X&&t.createElement("div",{className:"rpv-core__annotation-popup-content"},X.split(`
`).map(function(lt,ot){return t.createElement(t.Fragment,{key:ot},lt,t.createElement("br",null))})))};(function(r){r.Click="Click",r.Hover="Hover"})(re||(re={}));var At,Re=function(r){var g,O=r.annotation,W=r.children,X=r.ignoreBorder,J=r.hasPopup,ut=r.isRenderable,rt=r.page,V=r.viewport,lt=O.rect,ot=function(){var ye=S(!1),We=ye.opened,He=ye.toggle,ze=t.useState(re.Hover),Ve=ze[0],qe=ze[1];return{opened:We,closeOnHover:function(){Ve===re.Hover&&He(f.ToggleStatus.Close)},openOnHover:function(){Ve===re.Hover&&He(f.ToggleStatus.Open)},toggleOnClick:function(){switch(Ve){case re.Click:We&&qe(re.Hover),He(f.ToggleStatus.Toggle);break;case re.Hover:qe(re.Click),He(f.ToggleStatus.Open)}}}}(),Mt=ot.closeOnHover,kt=ot.opened,xt=ot.openOnHover,Xt=ot.toggleOnClick,Gt=(g=[lt[0],rt.view[3]+rt.view[1]-lt[1],lt[2],rt.view[3]+rt.view[1]-lt[3]],[Math.min(g[0],g[2]),Math.min(g[1],g[3]),Math.max(g[0],g[2]),Math.max(g[1],g[3])]),Ht=lt[2]-lt[0],Le=lt[3]-lt[1],pe={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!X&&O.borderStyle.width>0){switch(O.borderStyle.style){case at.Dashed:pe.borderStyle="dashed";break;case at.Solid:pe.borderStyle="solid";break;case at.Underline:pe=Object.assign({borderBottomStyle:"solid"},pe);case at.Beveled:case at.Inset:}var me=O.borderStyle.width;pe.borderWidth="".concat(me,"px"),O.borderStyle.style!==at.Underline&&(Ht-=2*me,Le-=2*me);var Se=O.borderStyle,se=Se.horizontalCornerRadius,Ce=Se.verticalCornerRadius;(se>0||Ce>0)&&(pe.borderRadius="".concat(se,"px / ").concat(Ce,"px")),O.color?pe.borderColor="rgb(".concat(0|O.color[0],", ").concat(0|O.color[1],", ").concat(0|O.color[2],")"):pe.borderWidth="0"}return t.createElement(t.Fragment,null,ut&&W({popup:{opened:kt,closeOnHover:Mt,openOnHover:xt,toggleOnClick:Xt},slot:{attrs:{style:Object.assign({height:"".concat(Le,"px"),left:"".concat(Gt[0],"px"),top:"".concat(Gt[1],"px"),transform:"matrix(".concat(V.transform.join(","),")"),transformOrigin:"-".concat(Gt[0],"px -").concat(Gt[1],"px"),width:"".concat(Ht,"px")},pe)},children:t.createElement(t.Fragment,null,J&&kt&&t.createElement(Ft,{annotation:O}))}}))},Ue=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},st=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},t.createElement("circle",{cy:ot/2,fill:"none",rx:lt/2-Mt/2,ry:ot/2-Mt/2,stroke:"transparent",strokeWidth:Mt||1})),kt.slot.children)})},Ot=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=Y(g),J=nt(g),ut=!(g.hasPopup!==!1||!X&&!J),rt=function(){var V,lt,ot,Mt,kt=g.file;kt&&(V=kt.filename,lt=kt.content,ot=typeof lt=="string"?"":URL.createObjectURL(new Blob([lt],{type:""})),(Mt=document.createElement("a")).style.display="none",Mt.href=ot||V,Mt.setAttribute("download",function(xt){var Xt=xt.split("/").pop();return Xt?Xt.split("#")[0].split("?")[0]:xt}(V)),document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),ot&&URL.revokeObjectURL(ot))};return t.createElement(Re,{annotation:g,hasPopup:ut,ignoreBorder:!0,isRenderable:!0,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onDoubleClick:rt,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Qt=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},zt=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=Y(g),J=nt(g),ut=!(!X&&!J),rt=!g.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(g.parentType)!==-1;return b(function(){if(g.parentId){var V=document.querySelector('[data-annotation-id="'.concat(g.parentId,'"]')),lt=document.querySelector('[data-annotation-id="'.concat(g.id,'"]'));if(V&&lt){var ot=parseFloat(V.style.left),Mt=parseFloat(V.style.top)+parseFloat(V.style.height);lt.style.left="".concat(ot,"px"),lt.style.top="".concat(Mt,"px"),lt.style.transformOrigin="-".concat(ot,"px -").concat(Mt,"px")}}},[]),t.createElement(Re,{annotation:g,hasPopup:rt,ignoreBorder:!1,isRenderable:ut,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":g.id}),t.createElement(Ft,{annotation:g}))})},te=function(r){var g=r.annotation,O=r.childAnnotation,W=r.page,X=r.viewport,J=g.hasPopup===!1,ut=Y(g),rt=nt(g),V=!!(g.hasPopup||ut||rt);if(g.quadPoints&&g.quadPoints.length>0){var lt=g.quadPoints.map(function(ot){return Object.assign({},g,{rect:[ot[2].x,ot[2].y,ot[1].x,ot[1].y],quadPoints:[]})});return t.createElement(t.Fragment,null,lt.map(function(ot,Mt){return t.createElement(te,{key:Mt,annotation:ot,childAnnotation:O,page:W,viewport:X})}))}return t.createElement(Re,{annotation:g,hasPopup:J,ignoreBorder:!0,isRenderable:V,page:W,viewport:X},function(ot){return t.createElement(t.Fragment,null,t.createElement("div",u({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":g.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),ot.slot.children),O&&O.annotationType===f.AnnotationType.Popup&&ot.popup.opened&&t.createElement(zt,{annotation:O,page:W,viewport:X}))})},ne=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),g.inkLists&&g.inkLists.length&&t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},g.inkLists.map(function(xt,Xt){return t.createElement("polyline",{key:Xt,fill:"none",stroke:"transparent",strokeWidth:Mt||1,points:xt.map(function(Gt){return"".concat(Gt.x-V[0],",").concat(V[3]-Gt.y)}).join(" ")})})),kt.slot.children)})},Ie=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},t.createElement("line",{stroke:"transparent",strokeWidth:Mt||1,x1:V[2]-g.lineCoordinates[0],x2:V[2]-g.lineCoordinates[2],y1:V[3]-g.lineCoordinates[1],y2:V[3]-g.lineCoordinates[3]})),kt.slot.children)})},Lt=/^([^\w]*)(javascript|data|vbscript)/im,Te=/&#(\w+)(^\w|;)?/g,Zt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,N=/^([^:]+):/gm,n=function(r,g){var O,W=(O=r||"",O.replace(Te,function(rt,V){return String.fromCharCode(V)})).replace(Zt,"").trim();if(!W)return g;var X=W[0];if(X==="."||X==="/")return W;var J=W.match(N);if(!J)return W;var ut=J[0];return Lt.test(ut)?g:W},_=function(r){var g,O=r.annotation,W=r.annotationContainerRef,X=r.doc,J=r.outlines,ut=r.page,rt=r.pageIndex,V=r.scale,lt=r.viewport,ot=r.onExecuteNamedAction,Mt=r.onJumpFromLinkAnnotation,kt=r.onJumpToDest,xt=t.useRef(),Xt=J&&J.length&&O.dest&&typeof O.dest=="string"?(g=J.find(function(pe){return pe.dest===O.dest}))===null||g===void 0?void 0:g.title:"",Gt=!!(O.url||O.dest||O.action||O.unsafeUrl),Ht={};if(O.url||O.unsafeUrl){var Le=n(O.url||O.unsafeUrl,"");Le?Ht={"data-target":"external",href:Le,rel:"noopener noreferrer nofollow",target:O.newWindow?"_blank":"",title:Le}:Gt=!1}else Ht={href:"","data-annotation-link":O.id,onClick:function(pe){pe.preventDefault(),O.action?ot(O.action):_e(X,O.dest).then(function(me){var Se=xt.current,se=W.current;if(Se&&se){var Ce=Se.getBoundingClientRect();se.style.setProperty("height","100%"),se.style.setProperty("width","100%");var ye=se.getBoundingClientRect();se.style.removeProperty("height"),se.style.removeProperty("width");var We=(Ce.left-ye.left)/V,He=(ye.bottom-Ce.bottom+Ce.height)/V;Mt({bottomOffset:He,label:Xt,leftOffset:We,pageIndex:rt})}kt(me)})}};return Xt&&(Ht=Object.assign({},Ht,{title:Xt,"aria-label":Xt})),t.createElement(Re,{annotation:O,hasPopup:!1,ignoreBorder:!1,isRenderable:Gt,page:ut,viewport:lt},function(pe){return t.createElement("div",u({},pe.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":O.id,"data-testid":"core__annotation--link-".concat(O.id)}),t.createElement("a",u({ref:xt},Ht)))})},j=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),g.vertices&&g.vertices.length&&t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},t.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Mt||1,points:g.vertices.map(function(xt){return"".concat(xt.x-V[0],",").concat(V[3]-xt.y)}).join(" ")})),kt.slot.children)})},K=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),g.vertices&&g.vertices.length&&t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},t.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Mt||1,points:g.vertices.map(function(xt){return"".concat(xt.x-V[0],",").concat(V[3]-xt.y)}).join(" ")})),kt.slot.children)})},it=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut),V=g.rect,lt=V[2]-V[0],ot=V[3]-V[1],Mt=g.borderStyle.width;return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(kt){return t.createElement("div",u({},kt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":g.id,onClick:kt.popup.toggleOnClick,onMouseEnter:kt.popup.openOnHover,onMouseLeave:kt.popup.closeOnHover}),t.createElement("svg",{height:"".concat(ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(lt," ").concat(ot),width:"".concat(lt,"px")},t.createElement("rect",{height:ot-Mt,fill:"none",stroke:"transparent",strokeWidth:Mt||1,x:Mt/2,y:Mt/2,width:lt-Mt})),kt.slot.children)})},gt=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Rt=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},qt=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},Vt=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),t.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),t.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),t.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ve=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),t.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),t.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),t.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),t.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),t.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),t.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),t.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),t.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),t.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Yt=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),t.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Kt=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),t.createElement("path",{d:"M6 4.5L6 0.5"}),t.createElement("path",{d:"M18 4.5L18 0.5"}),t.createElement("path",{d:"M10 4.5L10 0.5"}),t.createElement("path",{d:"M14 4.5L14 0.5"}))},he=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),t.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),t.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Ee=function(){return t.createElement(v,{size:16},t.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},De=function(r){var g=r.annotation,O=r.childAnnotation,W=r.page,X=r.viewport,J=g.hasPopup===!1,ut=Y(g),rt=nt(g),V=!!(g.hasPopup||ut||rt),lt=g.name?g.name.toLowerCase():"";return t.createElement(Re,{annotation:g,hasPopup:J,ignoreBorder:!1,isRenderable:V,page:W,viewport:X},function(ot){return t.createElement(t.Fragment,null,t.createElement("div",u({},ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":g.id,onClick:ot.popup.toggleOnClick,onMouseEnter:ot.popup.openOnHover,onMouseLeave:ot.popup.closeOnHover}),lt&&t.createElement("div",{className:"rpv-core__annotation-text-icon"},lt==="check"&&t.createElement(C,null),lt==="comment"&&t.createElement(Vt,null),lt==="help"&&t.createElement(ve,null),lt==="insert"&&t.createElement(Ee,null),lt==="key"&&t.createElement(Yt,null),lt==="note"&&t.createElement(Kt,null),(lt==="newparagraph"||lt==="paragraph")&&t.createElement(he,null)),ot.slot.children),O&&O.annotationType===f.AnnotationType.Popup&&ot.popup.opened&&t.createElement(zt,{annotation:O,page:W,viewport:X}))})},je=function(r){var g=r.annotation,O=r.page,W=r.viewport,X=g.hasPopup===!1,J=Y(g),ut=nt(g),rt=!!(g.hasPopup||J||ut);return t.createElement(Re,{annotation:g,hasPopup:X,ignoreBorder:!0,isRenderable:rt,page:O,viewport:W},function(V){return t.createElement("div",u({},V.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":g.id,onClick:V.popup.toggleOnClick,onMouseEnter:V.popup.openOnHover,onMouseLeave:V.popup.closeOnHover}),V.slot.children)})},ln=function(r){var g=r.annotations,O=r.doc,W=r.outlines,X=r.page,J=r.pageIndex,ut=r.plugins,rt=r.rotation,V=r.scale,lt=r.onExecuteNamedAction,ot=r.onJumpFromLinkAnnotation,Mt=r.onJumpToDest,kt=t.useRef(),xt=X.getViewport({rotation:rt,scale:V}).clone({dontFlip:!0}),Xt=g.filter(function(Gt){return!Gt.parentId});return b(function(){var Gt=kt.current;Gt&&ut.forEach(function(Ht){Ht.onAnnotationLayerRender&&Ht.onAnnotationLayerRender({annotations:Xt,container:Gt,pageIndex:J,rotation:rt,scale:V})})},[]),t.createElement("div",{ref:kt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(J)},Xt.map(function(Gt){var Ht=g.find(function(Le){return Le.parentId===Gt.id});switch(Gt.annotationType){case f.AnnotationType.Caret:return t.createElement(Ue,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Circle:return t.createElement(st,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.FileAttachment:return t.createElement(Ot,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.FreeText:return t.createElement(Qt,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Highlight:return t.createElement(te,{key:Gt.id,annotation:Gt,childAnnotation:Ht,page:X,viewport:xt});case f.AnnotationType.Ink:return t.createElement(ne,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Line:return t.createElement(Ie,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Link:return t.createElement(_,{key:Gt.id,annotation:Gt,annotationContainerRef:kt,doc:O,outlines:W,page:X,pageIndex:J,scale:V,viewport:xt,onExecuteNamedAction:lt,onJumpFromLinkAnnotation:ot,onJumpToDest:Mt});case f.AnnotationType.Polygon:return t.createElement(j,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Polyline:return t.createElement(K,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Popup:return t.createElement(zt,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Square:return t.createElement(it,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Squiggly:return t.createElement(gt,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Stamp:return t.createElement(Rt,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.StrikeOut:return t.createElement(qt,{key:Gt.id,annotation:Gt,page:X,viewport:xt});case f.AnnotationType.Text:return t.createElement(De,{key:Gt.id,annotation:Gt,childAnnotation:Ht,page:X,viewport:xt});case f.AnnotationType.Underline:return t.createElement(je,{key:Gt.id,annotation:Gt,page:X,viewport:xt});default:return t.createElement(t.Fragment,{key:Gt.id})}}))},Ze=function(r){var g=r.page,O=r.renderAnnotations,W=et(),X=t.useState({loading:!0,annotations:[]}),J=X[0],ut=X[1];return t.useEffect(function(){g.getAnnotations({intent:"display"}).then(function(rt){W.current&&ut({loading:!1,annotations:rt})})},[]),J.loading?t.createElement(t.Fragment,null):O(J.annotations)},vn=function(r){var g=r.doc,O=r.outlines,W=r.page,X=r.pageIndex,J=r.plugins,ut=r.rotation,rt=r.scale,V=r.onExecuteNamedAction,lt=r.onJumpFromLinkAnnotation,ot=r.onJumpToDest;return t.createElement(Ze,{page:W,renderAnnotations:function(Mt){return t.createElement(ln,{annotations:Mt,doc:g,outlines:O,page:W,pageIndex:X,plugins:J,rotation:ut,scale:rt,onExecuteNamedAction:V,onJumpFromLinkAnnotation:lt,onJumpToDest:ot})}})},_n=function(r,g){var O=r%g;return O===0?r:Math.floor(r-O)},wn=function(r){var g=r.canvasLayerRef,O=r.height,W=r.page,X=r.pageIndex,J=r.plugins,ut=r.rotation,rt=r.scale,V=r.width,lt=r.onRenderCanvasCompleted,ot=t.useRef();return b(function(){var Mt=ot.current;Mt&&Mt.cancel();var kt=g.current;kt.removeAttribute("data-testid"),J.forEach(function(ye){ye.onCanvasLayerRender&&ye.onCanvasLayerRender({ele:kt,pageIndex:X,rotation:ut,scale:rt,status:f.LayerRenderStatus.PreRender})});var xt=W.getViewport({rotation:ut,scale:rt}),Xt=window.devicePixelRatio||1,Gt=Math.sqrt(16777216/(xt.width*xt.height)),Ht=Xt>Gt;Ht?kt.style.transform="scale(1, 1)":kt.style.removeProperty("transform");var Le=Math.min(Gt,Xt),pe=function(ye,We){var He,ze;if(Math.floor(ye)===ye)return[ye,1];var Ve=1/ye;if(Ve>We)return[1,We];if(Math.floor(Ve)===Ve)return[1,Ve];for(var qe=ye>1?Ve:ye,cn=0,en=1,hn=1,rn=1;;){var an=cn+hn,on=en+rn;if(on>We)break;qe<=an/on?(hn=(He=[an,on])[0],rn=He[1]):(cn=(ze=[an,on])[0],en=ze[1])}return qe<(cn/en+hn/rn)/2?qe===ye?[cn,en]:[en,cn]:qe===ye?[hn,rn]:[rn,hn]}(Le,8),me=pe[0],Se=pe[1];kt.width=_n(xt.width*Le,me),kt.height=_n(xt.height*Le,me),kt.style.width="".concat(_n(xt.width,Se),"px"),kt.style.height="".concat(_n(xt.height,Se),"px"),kt.hidden=!0;var se=kt.getContext("2d",{alpha:!1}),Ce=Ht||Xt!==1?[Le,0,0,Le,0,0]:null;return ot.current=W.render({canvasContext:se,transform:Ce,viewport:xt}),ot.current.promise.then(function(){kt.hidden=!1,kt.setAttribute("data-testid","core__canvas-layer-".concat(X)),J.forEach(function(ye){ye.onCanvasLayerRender&&ye.onCanvasLayerRender({ele:kt,pageIndex:X,rotation:ut,scale:rt,status:f.LayerRenderStatus.DidRender})}),lt()},function(){lt()}),function(){kt&&(kt.width=0,kt.height=0)}},[]),t.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(O,"px"),width:"".concat(V,"px")}},t.createElement("canvas",{ref:g}))},ti=function(r){var g=r.height,O=r.page,W=r.rotation,X=r.scale,J=r.width,ut=t.useRef();return b(function(){var rt=ut.current,V=O.getViewport({rotation:W,scale:X});O.getOperatorList().then(function(lt){(function(){var ot=ut.current;ot&&(ot.innerHTML="")})(),new Z.SVGGraphics(O.commonObjs,O.objs).getSVG(lt,V).then(function(ot){ot.style.height="".concat(g,"px"),ot.style.width="".concat(J,"px"),rt.appendChild(ot)})})},[]),t.createElement("div",{className:"rpv-core__svg-layer",ref:ut})},ds=function(r){var g=r.containerRef,O=r.page,W=r.pageIndex,X=r.plugins,J=r.rotation,ut=r.scale,rt=r.onRenderTextCompleted,V=t.useRef(),lt=function(){var ot=g.current;ot&&([].slice.call(ot.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Mt){return ot.removeChild(Mt)}),[].slice.call(ot.querySelectorAll('br[role="presentation"]')).forEach(function(Mt){return ot.removeChild(Mt)}))};return b(function(){var ot=V.current;ot&&ot.cancel();var Mt=g.current;if(Mt){Mt.removeAttribute("data-testid");var kt=O.getViewport({rotation:J,scale:ut});return X.forEach(function(xt){xt.onTextLayerRender&&xt.onTextLayerRender({ele:Mt,pageIndex:W,scale:ut,status:f.LayerRenderStatus.PreRender})}),O.getTextContent().then(function(xt){lt(),V.current=Z.renderTextLayer({container:Mt,textContent:xt,textContentSource:xt,viewport:kt}),V.current.promise.then(function(){Mt.setAttribute("data-testid","core__text-layer-".concat(W)),[].slice.call(Mt.children).forEach(function(Xt){Xt.classList.contains("rpv-core__text-layer-text--not")||Xt.classList.add("rpv-core__text-layer-text")}),X.forEach(function(Xt){Xt.onTextLayerRender&&Xt.onTextLayerRender({ele:Mt,pageIndex:W,scale:ut,status:f.LayerRenderStatus.DidRender})}),rt()},function(){Mt.removeAttribute("data-testid"),rt()})}),function(){var xt;lt(),(xt=V.current)===null||xt===void 0||xt.cancel()}}},[]),t.createElement("div",{className:"rpv-core__text-layer",ref:g})},fs=function(r){var g=r.doc,O=r.measureRef,W=r.outlines,X=r.pageIndex,J=r.pageRotation,ut=r.pageSize,rt=r.plugins,V=r.renderPage,lt=r.renderQueueKey,ot=r.rotation,Mt=r.scale,kt=r.shouldRender,xt=r.viewMode,Xt=r.onExecuteNamedAction,Gt=r.onJumpFromLinkAnnotation,Ht=r.onJumpToDest,Le=r.onRenderCompleted,pe=r.onRotatePage,me=et(),Se=t.useState(null),se=Se[0],Ce=Se[1],ye=t.useState(!1),We=ye[0],He=ye[1],ze=t.useState(!1),Ve=ze[0],qe=ze[1],cn=t.useRef(),en=t.useRef(),hn=Math.abs(ot+J)%180==0,rn=ut.pageWidth*Mt,an=ut.pageHeight*Mt,on=hn?rn:an,sn=hn?an:rn,mn=(ut.rotation+ot+J)%360,Cn=t.useRef(0),En=V||function(fn){return t.createElement(t.Fragment,null,fn.canvasLayer.children,fn.textLayer.children,fn.annotationLayer.children)};return t.useEffect(function(){Ce(null),He(!1),qe(!1)},[J,ot,Mt]),t.useEffect(function(){kt&&me.current&&!se&&ge(g,X).then(function(fn){me.current&&(Cn.current=lt,Ce(fn))})},[kt,se]),t.useEffect(function(){We&&Ve&&(lt!==Cn.current?(Ce(null),He(!1),qe(!1)):Le(X))},[We,Ve]),t.createElement("div",{className:P({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":xt===f.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":xt===f.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":xt===f.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(X),ref:O,style:{height:"".concat(sn,"px"),width:"".concat(on,"px")}},se?t.createElement(t.Fragment,null,En({annotationLayer:{attrs:{},children:t.createElement(vn,{doc:g,outlines:W,page:se,pageIndex:X,plugins:rt,rotation:mn,scale:Mt,onExecuteNamedAction:Xt,onJumpFromLinkAnnotation:Gt,onJumpToDest:Ht})},canvasLayer:{attrs:{},children:t.createElement(wn,{canvasLayerRef:cn,height:sn,page:se,pageIndex:X,plugins:rt,rotation:mn,scale:Mt,width:on,onRenderCanvasCompleted:function(){me.current&&He(!0)}})},canvasLayerRendered:We,doc:g,height:sn,pageIndex:X,rotation:mn,scale:Mt,svgLayer:{attrs:{},children:t.createElement(ti,{height:sn,page:se,rotation:mn,scale:Mt,width:on})},textLayer:{attrs:{},children:t.createElement(ds,{containerRef:en,page:se,pageIndex:X,plugins:rt,rotation:mn,scale:Mt,onRenderTextCompleted:function(){me.current&&qe(!0)}})},textLayerRendered:Ve,width:on,markRendered:Le,onRotatePage:function(fn){return pe(X,fn)}}),rt.map(function(fn,bn){return fn.renderPageLayer?t.createElement(t.Fragment,{key:bn},fn.renderPageLayer({canvasLayerRef:cn,canvasLayerRendered:We,doc:g,height:sn,pageIndex:X,rotation:mn,scale:Mt,textLayerRef:en,textLayerRendered:Ve,width:on})):t.createElement(t.Fragment,{key:bn})})):t.createElement(R,{testId:"core__page-layer-loading-".concat(X)}))},ps=function(r,g){var O=g.rect;return r.height!==O.height||r.width!==O.width?O:r};(function(r){r.Horizontal="Horizontal",r.Vertical="Vertical",r.Both="Both"})(At||(At={}));var gs=function(r){return 1-Math.pow(1-r,4)},ei=1e-4,pr={left:0,top:0},gr={capture:!1,passive:!0},ms=function(r){var g=r.elementRef,O=r.enableSmoothScroll,W=r.isRtl,X=r.scrollDirection,J=r.onSmoothScroll,ut=t.useState(pr),rt=ut[0],V=ut[1],lt=t.useState(g.current),ot=lt[0],Mt=lt[1],kt=W?-1:1,xt=t.useRef(X);xt.current=X;var Xt=t.useRef(pr),Gt=t.useRef(!0),Ht=t.useCallback(function(){Gt.current=!0,O&&V(Xt.current),J(!1)},[]),Le=t.useCallback(function(){if(ot){switch(xt.current){case At.Horizontal:Xt.current={left:kt*ot.scrollLeft,top:0};break;case At.Both:Xt.current={left:kt*ot.scrollLeft,top:ot.scrollTop};break;case At.Vertical:default:Xt.current={left:0,top:ot.scrollTop}}O&&!Gt.current||V(Xt.current)}},[ot]);b(function(){Mt(g.current)}),b(function(){if(ot)return ot.addEventListener("scroll",Le,gr),function(){ot.removeEventListener("scroll",Le,gr)}},[ot]);var pe=t.useCallback(function(me,Se){var se=g.current;if(!se)return Promise.resolve();var Ce={left:0,top:0};switch(xt.current){case At.Horizontal:Ce.left=kt*me.left;break;case At.Both:Ce.left=kt*me.left,Ce.top=me.top;break;case At.Vertical:default:Ce.top=me.top}return Se?(Gt.current=!1,J(!0),new Promise(function(ye,We){(function(He,ze,Ve,qe,cn,en){cn===void 0&&(cn=function(bn){return bn}),en===void 0&&(en=function(){});var hn=0,rn=0,an=!1;switch(ze){case At.Horizontal:rn=He.scrollLeft,hn=0;case At.Both:rn=He.scrollLeft,hn=He.scrollTop;break;case At.Vertical:default:rn=0,hn=He.scrollTop}var on=function(){an||(an=!0,He.scrollLeft=Ve.left,He.scrollTop=Ve.top,en())};if(Math.abs(hn-Ve.top)<=ei&&ze===At.Vertical)on();else if(Math.abs(rn-Ve.left)<=ei&&ze===At.Horizontal)on();else{var sn,mn=-1,Cn=rn-Ve.left,En=hn-Ve.top,fn=function(bn){mn===-1&&(mn=bn);var Pn=bn-mn,Ae=Math.min(Pn/qe,1),be=cn(Ae),ae={left:rn-Cn*be,top:hn-En*be};switch(ze){case At.Horizontal:He.scrollLeft=ae.left;break;case At.Both:He.scrollLeft=ae.left,He.scrollTop=ae.top;break;case At.Vertical:default:He.scrollTop=ae.top}Math.abs(ae.top-Ve.top)<=ei&&Math.abs(ae.left-Ve.left)<=ei&&!an&&(window.cancelAnimationFrame(sn),on()),Pn<qe?sn=window.requestAnimationFrame(fn):window.cancelAnimationFrame(sn)};sn=window.requestAnimationFrame(fn)}})(se,xt.current,Ce,400,gs,function(){Ht(),ye()})})):new Promise(function(ye,We){switch(xt.current){case At.Horizontal:se.scrollLeft=Ce.left;break;case At.Both:se.scrollLeft=Ce.left,se.scrollTop=Ce.top;break;case At.Vertical:default:se.scrollTop=Ce.top}ye()})},[g]);return{scrollOffset:rt,scrollTo:pe}},Vn=function(r,g,O){return Math.max(r,Math.min(O,g))},vs=function(r,g){if(g!==f.ViewMode.DualPageWithCover)return 0;if(!function(X){var J=X.length;if(J===1)return!1;for(var ut=1;ut<J;ut++)if(X[ut].height!==X[0].height||X[ut].width!==X[0].width)return!0;return!1}(r))return 2*r[0].width;var O=St(r.slice(1),2).map(function(X){return X.length===2?X[0].width+X[1].width:X[0].width}),W=[r[0].width].concat(O);return Math.max.apply(Math,W)},bs={left:0,top:0},_s={left:0,top:0},Ai={left:0,top:0},ys={left:0,top:0},As={height:0,width:0},mr={left:0,top:0},vr="data-virtual-index",Ss=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Es=function(r){var g=r.enableSmoothScroll,O=r.isRtl,W=r.numberOfItems,X=r.parentRef,J=r.setRenderRange,ut=r.sizes,rt=r.scrollMode,V=r.viewMode,lt=t.useState(!1),ot=lt[0],Mt=lt[1],kt=t.useCallback(function(Ae){return Mt(Ae)},[]),xt=t.useRef(rt);xt.current=rt;var Xt=t.useRef(V);Xt.current=V;var Gt=rt===f.ScrollMode.Wrapped||V===f.ViewMode.DualPageWithCover||V===f.ViewMode.DualPage?At.Both:rt===f.ScrollMode.Horizontal?At.Horizontal:At.Vertical,Ht=ms({elementRef:X,enableSmoothScroll:g,isRtl:O,scrollDirection:Gt,onSmoothScroll:kt}),Le=Ht.scrollOffset,pe=Ht.scrollTo,me=function(Ae){var be=Ae.elementRef,ae=t.useState(be.current),ue=ae[0],oe=ae[1],Pe=t.useRef(!1),xe=t.useReducer(ps,{height:0,width:0}),de=xe[0],ee=xe[1];return b(function(){be.current!==ue&&oe(be.current)}),b(function(){if(ue&&!Pe.current){Pe.current=!0;var Me=ue.getBoundingClientRect(),Oe=Me.height,Qe=Me.width;ee({rect:{height:Oe,width:Qe}})}},[ue]),t.useEffect(function(){if(ue){var Me=new ResizeObserver(function(Oe,Qe){Oe.forEach(function(Ye){if(Ye.target===ue){var pn=Ye.contentRect,yn=pn.height,Fe=pn.width;ee({rect:{height:yn,width:Fe}})}})});return Me.observe(ue),function(){Me.unobserve(ue)}}},[ue]),de}({elementRef:X}),Se=t.useRef({scrollOffset:mr,measurements:[]});Se.current.scrollOffset=Le;var se=t.useMemo(function(){return Array(W).fill(-1)},[]),Ce=t.useState(se),ye=Ce[0],We=Ce[1],He=t.useMemo(function(){var Ae=new IntersectionObserver(function(be){be.forEach(function(ae){var ue=ae.isIntersecting?ae.intersectionRatio:-1,oe=ae.target.getAttribute(vr);if(oe){var Pe=parseInt(oe,10);0<=Pe&&Pe<W&&We(function(xe){return xe[Pe]=ue,function(de,ee,Me){for(var Oe,Qe=0,Ye=ee.length;Qe<Ye;Qe++)!Oe&&Qe in ee||(Oe||(Oe=Array.prototype.slice.call(ee,0,Qe)),Oe[Qe]=ee[Qe]);return de.concat(Oe||Array.prototype.slice.call(ee))}([],xe)})}})},{threshold:Ss});return Ae},[]),ze=t.useMemo(function(){return rt===f.ScrollMode.Page&&V===f.ViewMode.SinglePage?function(Ae,be,ae){for(var ue=[],oe=0;oe<Ae;oe++){var Pe={height:Math.max(be.height,ae[oe].height),width:Math.max(be.width,ae[oe].width)},xe=oe===0?ys:ue[oe-1].end,de={left:xe.left+Pe.width,top:xe.top+Pe.height};ue[oe]={index:oe,start:xe,size:Pe,end:de,visibility:-1}}return ue}(W,me,ut):V===f.ViewMode.DualPageWithCover?function(Ae,be,ae,ue){for(var oe=[],Pe=0,xe=0,de=Ai,ee=0;ee<Ae;ee++){var Me=ee===0?{height:ue===f.ScrollMode.Page?Math.max(be.height,ae[ee].height):ae[ee].height,width:ue===f.ScrollMode.Page?Math.max(be.width,ae[ee].width):ae[ee].width}:{height:ue===f.ScrollMode.Page?Math.max(be.height,ae[ee].height):ae[ee].height,width:Math.max(be.width/2,ae[ee].width)};ue===f.ScrollMode.Page?de=ee===0?Ai:{left:ee%2==0?Me.width:0,top:Math.floor((ee-1)/2)*Me.height+oe[0].end.top}:ee===0?(de=Ai,Pe=ae[0].height,xe=0):ee%2==1?(de={left:0,top:Pe+=xe},xe=ee===Ae-1?ae[ee].height:Math.max(ae[ee].height,ae[ee+1].height)):de={left:oe[ee-1].end.left,top:Pe};var Oe={left:de.left+Me.width,top:de.top+Me.height};oe[ee]={index:ee,start:de,size:Me,end:Oe,visibility:-1}}return oe}(W,me,ut,rt):V===f.ViewMode.DualPage?function(Ae,be,ae,ue){for(var oe=[],Pe=0,xe=0,de=_s,ee=0;ee<Ae;ee++){var Me={height:ue===f.ScrollMode.Page?Math.max(be.height,ae[ee].height):ae[ee].height,width:Math.max(be.width/2,ae[ee].width)};ue===f.ScrollMode.Page?de={left:ee%2==0?0:Me.width,top:Math.floor(ee/2)*Me.height}:ee%2==0?(de={left:0,top:Pe+=xe},xe=ee===Ae-1?ae[ee].height:Math.max(ae[ee].height,ae[ee+1].height)):de={left:oe[ee-1].end.left,top:Pe};var Oe={left:de.left+Me.width,top:de.top+Me.height};oe[ee]={index:ee,start:de,size:Me,end:Oe,visibility:-1}}return oe}(W,me,ut,rt):function(Ae,be,ae,ue){for(var oe=[],Pe=0,xe={left:0,top:0},de=0,ee=bs,Me=0;Me<Ae;Me++){var Oe=ae[Me];if(Me===0)Pe=Oe.width,xe={left:0,top:0},de=Oe.height;else switch(ue){case f.ScrollMode.Wrapped:(Pe+=Oe.width)<be.width?(ee={left:oe[Me-1].end.left,top:xe.top},de=Math.max(de,Oe.height)):(Pe=Oe.width,xe={left:(ee={left:xe.left,top:xe.top+de}).left,top:ee.top},de=Oe.height);break;case f.ScrollMode.Horizontal:case f.ScrollMode.Vertical:default:ee=oe[Me-1].end}var Qe={left:ee.left+Oe.width,top:ee.top+Oe.height};oe[Me]={index:Me,start:ee,size:Oe,end:Qe,visibility:-1}}return oe}(W,me,ut,rt)},[rt,ut,V,me]),Ve=ze[W-1]?{height:ze[W-1].end.top,width:ze[W-1].end.left}:As;Se.current.measurements=ze;var qe=t.useMemo(function(){var Ae=function(Me,Oe,Qe,Ye){var pn=0;switch(Me){case At.Horizontal:pn=Ye.left;break;case At.Vertical:default:pn=Ye.top}var yn=Oe.length-1,Fe=function($e,Tn,Nn,ii){for(;$e<=Tn;){var Ln=($e+Tn)/2|0,Gn=ii(Ln);if(Gn<Nn)$e=Ln+1;else{if(!(Gn>Nn))return Ln;Tn=Ln-1}}return $e>0?$e-1:0}(0,yn,pn,function($e){switch(Me){case At.Horizontal:return Oe[$e].start.left;case At.Both:case At.Vertical:default:return Oe[$e].start.top}});if(Me===At.Both)for(var gn=Oe[Fe].start.top;Fe-1>=0&&Oe[Fe-1].start.top===gn&&Oe[Fe-1].start.left>=Ye.left;)Fe--;for(var tn=Fe;tn<=yn;){var nn={top:Oe[tn].start.top-Ye.top,left:Oe[tn].start.left-Ye.left},un={height:Qe.height-nn.top,width:Qe.width-nn.left};if(Me===At.Horizontal&&un.width<0||Me===At.Vertical&&un.height<0||Me===At.Both&&(un.width<0||un.height<0))break;tn++}return{start:Fe,end:tn}}(Gt,ze,me,Le),be=Ae.start,ae=Ae.end,ue=ye.slice(Vn(0,W,be),Vn(0,W,ae)),oe=be+ue.reduce(function(Me,Oe,Qe,Ye){return Oe>Ye[Me]?Qe:Me},0),Pe=oe=Vn(0,W-1,oe),xe=J({endPage:ae,numPages:W,startPage:be}),de=xe.startPage,ee=xe.endPage;switch(de=Math.max(de,0),ee=Math.min(ee,W-1),V){case f.ViewMode.DualPageWithCover:oe>0&&(Pe=oe%2==1?oe:oe-1),de=de===0?0:de%2==1?de:de-1,W-(ee=ee%2==1?ee-1:ee)<=2&&(ee=W-1);break;case f.ViewMode.DualPage:Pe=oe%2==0?oe:oe-1,de=de%2==0?de:de-1,ee=ee%2==1?ee:ee-1;break;case f.ViewMode.SinglePage:default:Pe=oe}return{startPage:de,endPage:ee,maxVisbilityIndex:Pe}},[ze,me,Le,V,ye]),cn=qe.startPage,en=qe.endPage,hn=qe.maxVisbilityIndex,rn=t.useMemo(function(){for(var Ae=[],be=function(ue){var oe=ze[ue],Pe=u(u({},oe),{visibility:ye[ue]!==void 0?ye[ue]:-1,measureRef:function(xe){xe&&(xe.setAttribute(vr,"".concat(ue)),He.observe(xe))}});Ae.push(Pe)},ae=cn;ae<=en;ae++)be(ae);return Ae},[cn,en,ye,ze]),an=t.useCallback(function(Ae,be){var ae=Se.current.measurements[Vn(0,W-1,Ae)],ue=xt.current===f.ScrollMode.Page?mr:be;return ae?pe({left:ue.left+ae.start.left,top:ue.top+ae.start.top},g):Promise.resolve()},[pe,g]),on=t.useCallback(function(Ae,be){var ae=Se.current.measurements,ue=ae[Ae].start,oe=ae.find(function(xe){return xe.start.top-ue.top>1e-12});if(!oe)return Promise.resolve();var Pe=oe.index;switch(Xt.current){case f.ViewMode.DualPage:Pe=Pe%2==0?Pe:Pe+1;break;case f.ViewMode.DualPageWithCover:Pe=Pe%2==1?Pe:Pe+1}return an(Pe,be)},[]),sn=t.useCallback(function(Ae,be){for(var ae=Se.current.measurements,ue=ae[Ae].start,oe=Ae,Pe=!1,xe=W-1;xe>=0;xe--)if(ue.top-ae[xe].start.top>1e-12){Pe=!0,oe=ae[xe].index;break}if(!Pe)return Promise.resolve();switch(Xt.current){case f.ViewMode.DualPage:oe=oe%2==0?oe:oe-1;break;case f.ViewMode.DualPageWithCover:oe=oe%2==0?oe-1:oe}return oe===Ae&&(oe=Ae-1),an(oe,be)},[]),mn=t.useCallback(function(Ae,be){if(Xt.current===f.ViewMode.DualPageWithCover||Xt.current===f.ViewMode.DualPage)return on(Ae,be);switch(xt.current){case f.ScrollMode.Wrapped:return on(Ae,be);case f.ScrollMode.Horizontal:case f.ScrollMode.Vertical:default:return an(Ae+1,be)}},[]),Cn=t.useCallback(function(Ae,be){if(Xt.current===f.ViewMode.DualPageWithCover||Xt.current===f.ViewMode.DualPage)return sn(Ae,be);switch(xt.current){case f.ScrollMode.Wrapped:return sn(Ae,be);case f.ScrollMode.Horizontal:case f.ScrollMode.Vertical:default:return an(Ae-1,be)}},[]),En=t.useCallback(function(){return function(Ae,be){switch(be){case f.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ae.width,"px")};case f.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ae.height,"px"),width:"100%"}}}(Ve,xt.current)},[Ve]),fn=t.useCallback(function(Ae){return function(be,ae,ue){return ue!==f.ScrollMode.Page?{}:{height:"".concat(ae.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(be.start.top,"px)")}}(Ae,me,xt.current)},[me]),bn=t.useCallback(function(Ae){return function(be,ae,ue,oe,Pe){var xe,de,ee,Me,Oe,Qe,Ye,pn=ae?"right":"left",yn=ae?-1:1,Fe=ue.length,gn=be.start.left*yn,tn=be.size,nn=tn.height,un=tn.width;if(oe===f.ViewMode.DualPageWithCover){var $e=Pe===f.ScrollMode.Page?0:be.start.top;return be.index===0||Fe%2==0&&be.index===Fe-1?((xe={height:"".concat(nn,"px"),minWidth:"".concat(vs(ue,oe),"px"),width:"100%"})[pn]=0,xe.position="absolute",xe.top=0,xe.transform="translate(".concat(gn,"px, ").concat($e,"px)"),xe):((de={height:"".concat(nn,"px"),width:"".concat(un,"px")})[pn]=0,de.position="absolute",de.top=0,de.transform="translate(".concat(gn,"px, ").concat($e,"px)"),de)}if(oe===f.ViewMode.DualPage)return(ee={height:"".concat(nn,"px"),width:"".concat(un,"px")})[pn]=0,ee.position="absolute",ee.top=0,ee.transform="translate(".concat(gn,"px, ").concat(Pe===f.ScrollMode.Page?0:be.start.top,"px)"),ee;switch(Pe){case f.ScrollMode.Horizontal:return(Me={height:"100%",width:"".concat(un,"px")})[pn]=0,Me.position="absolute",Me.top=0,Me.transform="translateX(".concat(gn,"px)"),Me;case f.ScrollMode.Page:return(Oe={height:"".concat(nn,"px"),width:"".concat(un,"px")})[pn]=0,Oe.position="absolute",Oe.top=0,Oe;case f.ScrollMode.Wrapped:return(Qe={height:"".concat(nn,"px"),width:"".concat(un,"px")})[pn]=0,Qe.position="absolute",Qe.top=0,Qe.transform="translate(".concat(gn,"px, ").concat(be.start.top,"px)"),Qe;case f.ScrollMode.Vertical:default:return(Ye={height:"".concat(nn,"px"),width:"100%"})[pn]=0,Ye.position="absolute",Ye.top=0,Ye.transform="translateY(".concat(be.start.top,"px)"),Ye}}(Ae,O,ut,Xt.current,xt.current)},[O,ut]),Pn=t.useCallback(function(Ae,be){var ae=Se.current,ue=ae.measurements,oe=ae.scrollOffset,Pe=ue[Vn(0,W-1,be)];if(Pe){var xe=xt.current===f.ScrollMode.Page?{left:Pe.start.left,top:Pe.start.top}:{left:oe.left*Ae,top:oe.top*Ae};return pe(xe,!1)}return Promise.resolve()},[]);return t.useEffect(function(){return function(){He.disconnect()}},[]),{boundingClientRect:me,isSmoothScrolling:ot,startPage:cn,endPage:en,maxVisbilityIndex:hn,virtualItems:rn,getContainerStyles:En,getItemContainerStyles:fn,getItemStyles:bn,scrollToItem:an,scrollToNextItem:mn,scrollToPreviousItem:Cn,zoom:Pn}},Si=function(r,g,O,W,X,J){var ut=O;switch(!0){case(X===f.ViewMode.DualPageWithCover&&J>=3):case(X===f.ViewMode.DualPage&&J>=3):ut=2*O;break;default:ut=O}switch(W){case f.SpecialZoomLevel.ActualSize:return 1;case f.SpecialZoomLevel.PageFit:return Math.min((r.clientWidth-17)/ut,(r.clientHeight-16)/g);case f.SpecialZoomLevel.PageWidth:return(r.clientWidth-17)/ut}},ws=function(r){var g,O,W=r.getCurrentPage,X=(g=50,O=t.useRef([]),t.useEffect(function(){return function(){O.current=[]}},[]),{push:function(lt){var ot=O.current;ot.length+1>g&&ot.shift(),ot.push(lt),O.current=ot},map:function(lt){return O.current.map(function(ot){return lt(ot)})},pop:function(){var lt=O.current;if(lt.length===0)return null;var ot=lt.pop();return O.current=lt,ot}}),J=function(lt){var ot=t.useRef([]);return t.useEffect(function(){return function(){ot.current=[]}},[]),{dequeue:function(){var Mt=ot.current;if(Mt.length===0)return null;var kt=Mt.shift();return ot.current=Mt,kt||null},enqueue:function(Mt){var kt=ot.current;kt.length+1>lt&&kt.pop(),ot.current=[Mt].concat(kt)},map:function(Mt){return ot.current.map(function(kt){return Mt(kt)})}}}(50),ut=function(){var lt=J.dequeue();return lt&&X.push(lt),lt&&lt.pageIndex===W()?ut():lt},rt=function(){var lt=X.pop();return lt&&J.enqueue(lt),lt&&lt.pageIndex===W()?rt():lt},V=t.useCallback(function(lt){X.push(lt)},[]);return{getNextDestination:ut,getPreviousDestination:rt,markVisitedDestination:V}},br=function(r){var g=[];return r.map(function(O){g=g.concat(O).concat(function(W){var X=[];return W.items&&W.items.length>0&&(X=X.concat(br(W.items))),X}(O))}),g},_r={capture:!1,passive:!0},Cs={height:0,width:0},Ei={height:0,width:0},Ps=function(r){var g=r.getCurrentPage,O=r.getCurrentScrollMode,W=r.jumpToPage,X=r.targetRef,J=t.useState(f.FullScreenMode.Normal),ut=J[0],rt=J[1],V=function(){var ye=t.useState(Cs),We=ye[0],He=ye[1],ze=k(function(){He({height:window.innerHeight,width:window.innerWidth})},100);return b(function(){return window.addEventListener("resize",ze,_r),function(){window.removeEventListener("resize",ze,_r)}},[]),We}(),lt=t.useState(Ei),ot=lt[0],Mt=lt[1],kt=t.useRef(Ei),xt=t.useRef(g()),Xt=t.useRef(Ei),Gt=t.useState(X.current),Ht=Gt[0],Le=Gt[1],pe=t.useRef();b(function(){X.current!==Ht&&Le(X.current)},[]),b(function(){if(Ht){var ye=new ResizeObserver(function(We){We.forEach(function(He){var ze=He.target.getBoundingClientRect(),Ve=ze.height,qe=ze.width;Mt({height:Ve,width:qe})})});return ye.observe(Ht),function(){ye.unobserve(Ht),ye.disconnect()}}},[Ht]);var me=t.useCallback(function(ye){var We=Q();return We&&We!==ye?(rt(f.FullScreenMode.Normal),q(We)):Promise.resolve()},[]),Se=t.useCallback(function(ye){ye&&A()&&(Le(ye),me(ye).then(function(){pe.current=ye,rt(f.FullScreenMode.Entering),function(We){l&&We[M.RequestFullScreen]()}(ye)}))},[]),se=t.useCallback(function(){Q()&&(rt(f.FullScreenMode.Exitting),q(document))},[]),Ce=t.useCallback(function(){Ht&&Q()!==Ht&&rt(f.FullScreenMode.Exitting)},[Ht]);return t.useEffect(function(){switch(ut){case f.FullScreenMode.Entering:pe.current&&(pe.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),xt.current=g(),kt.current={height:window.innerHeight,width:window.innerWidth};break;case f.FullScreenMode.Entered:O()===f.ScrollMode.Page?W(xt.current).then(function(){rt(f.FullScreenMode.EnteredCompletely)}):rt(f.FullScreenMode.EnteredCompletely);break;case f.FullScreenMode.Exitting:pe.current&&(pe.current.style.backgroundColor="",pe.current=null),xt.current=g();break;case f.FullScreenMode.Exited:rt(f.FullScreenMode.Normal),O()===f.ScrollMode.Page&&W(xt.current)}},[ut]),t.useEffect(function(){if(ut!==f.FullScreenMode.Normal)return ut===f.FullScreenMode.Entering&&V.height===ot.height&&V.width===ot.width&&V.height>0&&V.width>0&&(Xt.current.height===0||V.height==Xt.current.height)?(Xt.current={height:window.innerHeight,width:window.innerWidth},void rt(f.FullScreenMode.Entered)):void(ut===f.FullScreenMode.Exitting&&kt.current.height===V.height&&kt.current.width===V.width&&V.height>0&&V.width>0&&rt(f.FullScreenMode.Exited))},[ut,V,ot]),t.useEffect(function(){var ye;return ye=Ce,l&&document.addEventListener(M.FullScreenChange,ye),function(){(function(We){l&&document.removeEventListener(M.FullScreenChange,We)})(Ce)}},[Ht]),{enterFullScreenMode:Se,exitFullScreenMode:se,fullScreenMode:ut}},xs={buildPageStyles:function(){return{}},transformSize:function(r){return r.size}},On={left:0,top:0},Ts=function(r){var g=r.currentFile,O=r.defaultScale,W=r.doc,X=r.enableSmoothScroll,J=r.initialPage,ut=r.initialRotation,rt=r.initialScale,V=r.pageLayout,lt=r.pageSizes,ot=r.plugins,Mt=r.renderPage,kt=r.scrollMode,xt=r.setRenderRange,Xt=r.viewMode,Gt=r.viewerState,Ht=r.onDocumentLoad,Le=r.onOpenFile,pe=r.onPageChange,me=r.onRotate,Se=r.onRotatePage,se=r.onZoom,Ce=W.numPages,ye=W.loadingTask.docId,We=t.useContext(Nt).l10n,He=t.useContext(B),ze=He.direction===f.TextDirection.RightToLeft,Ve=t.useRef(),qe=t.useRef(),cn=t.useState(J),en=cn[0],hn=cn[1],rn=t.useRef(null),an=ws({getCurrentPage:function(){return Fe.current.pageIndex}}),on=t.useState(ut),sn=on[0],mn=on[1],Cn=pt(sn),En=t.useState(!1),fn=En[0],bn=En[1],Pn=t.useState(new Map),Ae=Pn[0],be=Pn[1],ae=t.useState(kt),ue=ae[0],oe=ae[1],Pe=pt(ue),xe=t.useState(Xt),de=xe[0],ee=xe[1],Me=pt(de),Oe=function(Bt){var ke=et(),Ne=t.useState([]),Xe=Ne[0],Ge=Ne[1];return t.useEffect(function(){Bt.getOutline().then(function(Be){if(ke.current&&Be!==null){var dn=br(Be);Ge(dn)}})},[]),Xe}(W),Qe=t.useState(rt),Ye=Qe[0],pn=Qe[1],yn=pt(Ye),Fe=t.useRef(Gt),gn=t.useRef(typeof O=="string"?O:null),tn=t.useRef(-1),nn=t.useRef(-1),un=t.useRef(J),$e=Ps({getCurrentPage:function(){return Fe.current.pageIndex},getCurrentScrollMode:function(){return Fe.current.scrollMode},jumpToPage:function(Bt){return Rn(Bt)},targetRef:qe}),Tn=t.useState(-1),Nn=Tn[0],ii=Tn[1],Ln=t.useState(0),Gn=Ln[0],Ds=Ln[1],An=yt({doc:W});t.useEffect(function(){return function(){jt.clear(),le.clear()}},[ye]);var Er=t.useMemo(function(){return Object.assign({},xs,V)},[]),Is=t.useMemo(function(){return Array(Ce).fill(0).map(function(Bt,ke){var Ne=[lt[ke].pageHeight,lt[ke].pageWidth],Xe=Math.abs(sn)%180==0?{height:Ne[0],width:Ne[1]}:{height:Ne[1],width:Ne[0]},Ge={height:Xe.height*Ye,width:Xe.width*Ye};return Er.transformSize({numPages:Ce,pageIndex:ke,size:Ge})})},[sn,Ye]),Ke=Es({enableSmoothScroll:X,isRtl:ze,numberOfItems:Ce,parentRef:qe,scrollMode:ue,setRenderRange:xt,sizes:Is,viewMode:de}),Os=k(function(){!gn.current||Fe.current.fullScreenMode!==f.FullScreenMode.Normal||J>0&&un.current===J||Dn(gn.current)},200);(function(Bt){var ke=Bt.targetRef,Ne=Bt.onResize;b(function(){var Xe=new ResizeObserver(function(Be){Be.forEach(function(dn){Ne(dn.target)})}),Ge=ke.current;if(Ge)return Xe.observe(Ge),function(){Xe.unobserve(Ge)}},[])})({targetRef:qe,onResize:Os});var kn=function(Bt){var ke=Bt;ot.forEach(function(Ne){Ne.onViewerStateChange&&(ke=Ne.onViewerStateChange(ke))}),Fe.current=ke},Ns=function(){return qe.current},Bs=function(){return Fe.current},js=t.useCallback(function(Bt){an.markVisitedDestination(Bt)},[]),Pi=t.useCallback(function(Bt){var ke=Bt.pageIndex,Ne=Bt.bottomOffset,Xe=Bt.leftOffset,Ge=Bt.scaleTo,Be=qe.current,dn=Fe.current;return Be&&dn?new Promise(function(Mn,Fi){ge(W,ke).then(function(ri){var Fn=ri.getViewport({scale:1}),si=0,Mr=(typeof Ne=="function"?Ne(Fn.width,Fn.height):Ne)||0,ai=(typeof Xe=="function"?Xe(Fn.width,Fn.height):Xe)||0,Bn=dn.scale;switch(Ge){case f.SpecialZoomLevel.PageFit:si=0,ai=0,Dn(f.SpecialZoomLevel.PageFit);break;case f.SpecialZoomLevel.PageWidth:Bn=Si(Be,lt[ke].pageHeight,lt[ke].pageWidth,f.SpecialZoomLevel.PageWidth,Xt,Ce),si=(Fn.height-Mr)*Bn,ai*=Bn,Dn(Bn);break;default:si=(Fn.height-Mr)*Bn,ai*=Bn}switch(dn.scrollMode){case f.ScrollMode.Horizontal:Ke.scrollToItem(ke,{left:ai,top:0}).then(function(){Mn()});break;case f.ScrollMode.Vertical:default:Ke.scrollToItem(ke,{left:0,top:si}).then(function(){Mn()})}})}):Promise.resolve()},[]),wr=t.useCallback(function(Bt){return an.markVisitedDestination(Bt),Pi(Bt)},[]),Hs=t.useCallback(function(){var Bt=an.getNextDestination();return Bt?Pi(Bt):Promise.resolve()},[]),Us=t.useCallback(function(){var Bt=an.getPreviousDestination();return Bt?Pi(Bt):Promise.resolve()},[]),Ws=t.useCallback(function(){return Ke.scrollToNextItem(Fe.current.pageIndex,On)},[]),Rn=t.useCallback(function(Bt){return 0<=Bt&&Bt<Ce?Ke.scrollToItem(Bt,On):Promise.resolve()},[]),zs=t.useCallback(function(){return Ke.scrollToPreviousItem(Fe.current.pageIndex,On)},[]),Cr=t.useCallback(function(Bt){var ke,Ne;(ke=Bt.name,Ne=ke.split(/\./).pop(),Ne?Ne.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Xe){var Ge=new FileReader;Ge.readAsArrayBuffer(Bt),Ge.onload=function(){var Be=new Uint8Array(Ge.result);Xe(Be)}}).then(function(Xe){Le(Bt.name,Xe)})},[Le]),Pr=t.useCallback(function(Bt){var ke=Bt===f.RotateDirection.Backward?-90:90,Ne=Fe.current.rotation,Xe=Ne===360||Ne===-360?ke:Ne+ke;An.markNotRendered(),mn(Xe),kn(u(u({},Fe.current),{rotation:Xe})),me({direction:Bt,doc:W,rotation:Xe})},[]),xi=t.useCallback(function(Bt,ke){var Ne=ke===f.RotateDirection.Backward?-90:90,Xe=Fe.current.pagesRotation,Ge=(Xe.has(Bt)?Xe.get(Bt):ut)+Ne,Be=Xe.set(Bt,Ge);be(Be),bn(function(dn){return!dn}),kn(u(u({},Fe.current),{pagesRotation:Be,rotatedPage:Bt})),Se({direction:ke,doc:W,pageIndex:Bt,rotation:Ge}),An.markRendering(Bt),ii(Bt)},[]),xr=t.useCallback(function(Bt){kn(u(u({},Fe.current),{scrollMode:Bt})),oe(Bt)},[]),Tr=t.useCallback(function(Bt){kn(u(u({},Fe.current),{viewMode:Bt})),ee(Bt)},[]),Dn=t.useCallback(function(Bt){var ke=qe.current,Ne=Fe.current.pageIndex;if(!(Ne<0||Ne>=Ce)){var Xe=lt[Ne].pageHeight,Ge=lt[Ne].pageWidth,Be=ke?typeof Bt=="string"?Si(ke,Xe,Ge,Bt,Fe.current.viewMode,Ce):Bt:1;gn.current=typeof Bt=="string"?Bt:null,Be!==Fe.current.scale&&(Ds(function(dn){return dn+1}),An.markNotRendered(),pn(Be),se({doc:W,scale:Be}),kn(u(u({},Fe.current),{scale:Be})))}},[]),Vs=t.useCallback(function(Bt){$e.enterFullScreenMode(Bt)},[]),Gs=t.useCallback(function(){$e.exitFullScreenMode()},[]);t.useEffect(function(){kn(u(u({},Fe.current),{fullScreenMode:$e.fullScreenMode}))},[$e.fullScreenMode]),t.useEffect(function(){var Bt={enterFullScreenMode:Vs,exitFullScreenMode:Gs,getPagesContainer:Ns,getViewerState:Bs,jumpToDestination:wr,jumpToNextDestination:Hs,jumpToPreviousDestination:Us,jumpToNextPage:Ws,jumpToPreviousPage:zs,jumpToPage:Rn,openFile:Cr,rotate:Pr,rotatePage:xi,setViewerState:kn,switchScrollMode:xr,switchViewMode:Tr,zoom:Dn};return ot.forEach(function(ke){ke.install&&ke.install(Bt)}),function(){ot.forEach(function(ke){ke.uninstall&&ke.uninstall(Bt)})}},[ye]),t.useEffect(function(){Ht({doc:W,file:g}),ot.forEach(function(Bt){Bt.onDocumentLoad&&Bt.onDocumentLoad({doc:W,file:g})})},[ye]);var Ti,ki,Ri,kr=Ke.boundingClientRect;Ti=function(){J&&Rn(J)},ki=kr.height>0&&kr.width>0,Ri=t.useRef(!1),b(function(){ki&&!Ri.current&&(Ri.current=!0,Ti())},[Ti,ki]),b(function(){var Bt=Fe.current.pageIndex;Bt>-1&&Pe!==ue&&Ke.scrollToItem(Bt,On).then(function(){$e.fullScreenMode===f.FullScreenMode.EnteredCompletely&&(X||An.markNotRendered(),tn.current=-1)})},[ue]),b(function(){var Bt=Fe.current.pageIndex;Bt>-1&&Cn!==sn&&Ke.scrollToItem(Bt,On)},[sn]),b(function(){yn!=0&&yn!=Fe.current.scale&&Ke.zoom(Fe.current.scale/yn,Fe.current.pageIndex).then(function(){$e.fullScreenMode===f.FullScreenMode.EnteredCompletely&&(nn.current=-1)})},[Ye]),b(function(){if(Me!==Fe.current.viewMode){var Bt=Ke.startPage,ke=Ke.endPage,Ne=Ke.virtualItems;An.markNotRendered(),An.setRange(Bt,ke);for(var Xe=function(Be){var dn=Ne.find(function(Mn){return Mn.index===Be});dn&&An.setVisibility(Be,dn.visibility)},Ge=Bt;Ge<=ke;Ge++)Xe(Ge);Mi()}},[de]),b(function(){var Bt=Fe.current.pageIndex;Bt>-1&&Me!==de&&Ke.scrollToItem(Bt,On)},[de]),b(function(){var Bt=Fe.current.pageIndex;Bt>0&&Bt===J&&un.current===J&&gn.current&&(un.current=-1,Dn(gn.current))},[en]),t.useEffect(function(){Ke.isSmoothScrolling||rn.current!==null&&rn.current===en||(rn.current=en,pe({currentPage:en,doc:W}))},[en,Ke.isSmoothScrolling]),t.useEffect(function(){$e.fullScreenMode===f.FullScreenMode.Entering&&Fe.current.scrollMode===f.ScrollMode.Page&&(tn.current=Fe.current.pageIndex),$e.fullScreenMode===f.FullScreenMode.EnteredCompletely&&Fe.current.scrollMode===f.ScrollMode.Page&&X&&(tn.current=-1),$e.fullScreenMode===f.FullScreenMode.EnteredCompletely&&gn.current&&(nn.current=Fe.current.pageIndex,Dn(gn.current))},[$e.fullScreenMode]),t.useEffect(function(){if($e.fullScreenMode!==f.FullScreenMode.Entering&&$e.fullScreenMode!==f.FullScreenMode.Exitting&&!Ke.isSmoothScrolling){var Bt=Ke.startPage,ke=Ke.endPage,Ne=Ke.maxVisbilityIndex,Xe=Ke.virtualItems,Ge=Ne,Be=$e.fullScreenMode===f.FullScreenMode.Entered||$e.fullScreenMode===f.FullScreenMode.EnteredCompletely;if(!(Be&&Ge!==tn.current&&tn.current>-1||Be&&Ge!==nn.current&&nn.current>-1)){hn(Ge),kn(u(u({},Fe.current),{pageIndex:Ge})),An.setRange(Bt,ke);for(var dn=function(Fi){var ri=Xe.find(function(Fn){return Fn.index===Fi});ri&&An.setVisibility(Fi,ri.visibility)},Mn=Bt;Mn<=ke;Mn++)dn(Mn);Mi()}}},[Ke.startPage,Ke.endPage,Ke.isSmoothScrolling,Ke.maxVisbilityIndex,$e.fullScreenMode,fn,sn,Ye]);var qs=t.useCallback(function(Bt){An.markRendered(Bt),Mi()},[Gn]),Mi=function(){var Bt=An.getHighestPriorityPage();Bt>-1&&An.isInRange(Bt)&&(An.markRendering(Bt),ii(Bt))},Xs=function(Bt){var ke=en-1,Ne=en+1;switch(Bt){case"FirstPage":Rn(0);break;case"LastPage":Rn(Ce-1);break;case"NextPage":Ne<Ce&&Rn(Ne);break;case"PrevPage":ke>=0&&Rn(ke)}},$s=t.useCallback(function(){var Bt=Ke.virtualItems,ke=[];switch(de){case f.ViewMode.DualPage:ke=St(Bt,2);break;case f.ViewMode.DualPageWithCover:Bt.length&&(ke=Bt[0].index===0?[[Bt[0]]].concat(St(Bt.slice(1),2)):St(Bt,2));break;case f.ViewMode.SinglePage:default:ke=St(Bt,1)}var Ne=We&&We.core?We.core.pageLabel:"Page {{pageIndex}}",Xe={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Ve,style:{height:"100%"}},children:t.createElement(t.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:P({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ue===f.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ze,"rpv-core__inner-pages--single":ue===f.ScrollMode.Page,"rpv-core__inner-pages--vertical":ue===f.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ue===f.ScrollMode.Wrapped}),ref:qe,style:{height:"100%",position:"relative"}},children:t.createElement("div",{"data-testid":"core__inner-current-page-".concat(en),style:Object.assign({"--scale-factor":Ye},Ke.getContainerStyles())},ke.map(function(Ge){return t.createElement("div",{className:P({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ue===f.ScrollMode.Page}),style:Ke.getItemContainerStyles(Ge[0]),key:"".concat(Ge[0].index,"-").concat(de)},Ge.map(function(Be){var dn=de===f.ViewMode.DualPageWithCover&&(Be.index===0||Ce%2==0&&Be.index===Ce-1);return t.createElement("div",{"aria-label":Ne.replace("{{pageIndex}}","".concat(Be.index+1)),className:P({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":de===f.ViewMode.DualPage&&Be.index%2==0,"rpv-core__inner-page--dual-odd":de===f.ViewMode.DualPage&&Be.index%2==1,"rpv-core__inner-page--dual-cover":dn,"rpv-core__inner-page--dual-cover-even":de===f.ViewMode.DualPageWithCover&&!dn&&Be.index%2==0,"rpv-core__inner-page--dual-cover-odd":de===f.ViewMode.DualPageWithCover&&!dn&&Be.index%2==1,"rpv-core__inner-page--single":de===f.ViewMode.SinglePage&&ue===f.ScrollMode.Page}),role:"region",key:"".concat(Be.index,"-").concat(de),style:Object.assign({},Ke.getItemStyles(Be),Er.buildPageStyles({numPages:Ce,pageIndex:Be.index,scrollMode:ue,viewMode:de}))},t.createElement(fs,{doc:W,measureRef:Be.measureRef,outlines:Oe,pageIndex:Be.index,pageRotation:Ae.has(Be.index)?Ae.get(Be.index):0,pageSize:lt[Be.index],plugins:ot,renderPage:Mt,renderQueueKey:Gn,rotation:sn,scale:Ye,shouldRender:Nn===Be.index,viewMode:de,onExecuteNamedAction:Xs,onJumpFromLinkAnnotation:js,onJumpToDest:wr,onRenderCompleted:qs,onRotatePage:xi}))}))}))}};return ot.forEach(function(Ge){Ge.renderViewer&&(Xe=Ge.renderViewer({containerRef:Ve,doc:W,pagesContainerRef:qe,pagesRotation:Ae,pageSizes:lt,rotation:sn,slot:Xe,themeContext:He,jumpToPage:Rn,openFile:Cr,rotate:Pr,rotatePage:xi,switchScrollMode:xr,switchViewMode:Tr,zoom:Dn}))}),Xe},[ot,Ke]),Rr=t.useCallback(function(Bt){return t.createElement("div",u({},Bt.attrs,{style:Bt.attrs&&Bt.attrs.style?Bt.attrs.style:{}}),Bt.children,Bt.subSlot&&Rr(Bt.subSlot))},[]);return Rr($s())},yr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ks=function(r){var g=r.defaultScale,O=r.doc,W=r.render,X=r.scrollMode,J=r.viewMode,ut=t.useRef(),rt=t.useState({pageSizes:[],scale:0}),V=rt[0],lt=rt[1];return t.useLayoutEffect(function(){var ot=Array(O.numPages).fill(0).map(function(Mt,kt){return new Promise(function(xt,Xt){ge(O,kt).then(function(Gt){var Ht=Gt.getViewport({scale:1});xt({pageHeight:Ht.height,pageWidth:Ht.width,rotation:Ht.rotation})})})});Promise.all(ot).then(function(Mt){var kt=ut.current;if(kt&&Mt.length!==0){var xt=Mt[0].pageWidth,Xt=Mt[0].pageHeight,Gt=kt.parentElement,Ht=(Gt.clientWidth-45)/xt,Le=(Gt.clientHeight-45)/Xt,pe=Ht;switch(X){case f.ScrollMode.Horizontal:pe=Math.min(Ht,Le);break;case f.ScrollMode.Vertical:default:pe=Ht}var me,Se,se=g?typeof g=="string"?Si(Gt,Xt,xt,g,J,O.numPages):g:(me=pe,(Se=yr.findIndex(function(Ce){return Ce>=me}))===-1||Se===0?me:yr[Se-1]);lt({pageSizes:Mt,scale:se})}})},[O.loadingTask.docId]),V.pageSizes.length===0||V.scale===0?t.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ut},t.createElement(R,null)):W(V.pageSizes,V.scale)},ni=function(){},wi=function(r){function g(O,W){var X=r.call(this)||this;return X.verifyPassword=O,X.passwordStatus=W,X}return G(g,r),g}(ni),Rs=function(r){var g=r.passwordStatus,O=r.renderProtectedView,W=r.verifyPassword,X=r.onDocumentAskPassword,J=t.useContext(Nt).l10n,ut=t.useState(""),rt=ut[0],V=ut[1],lt=t.useContext(B).direction===f.TextDirection.RightToLeft,ot=function(){return W(rt)};return t.useEffect(function(){X&&X({verifyPassword:W})},[]),O?O({passwordStatus:g,verifyPassword:W}):t.createElement("div",{className:"rpv-core__asking-password-wrapper"},t.createElement("div",{className:P({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":lt})},t.createElement("div",{className:"rpv-core__asking-password-message"},g===f.PasswordStatus.RequiredPassword&&J.core.askingPassword.requirePasswordToOpen,g===f.PasswordStatus.WrongPassword&&J.core.wrongPassword.tryAgain),t.createElement("div",{className:"rpv-core__asking-password-body"},t.createElement("div",{className:P({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!lt,"rpv-core__asking-password-input--rtl":lt})},t.createElement(x,{testId:"core__asking-password-input",type:"password",value:rt,onChange:V,onKeyDown:function(Mt){Mt.key==="Enter"&&ot()}})),t.createElement(F,{onClick:ot},J.core.askingPassword.submit))))},Ar=function(r){function g(O){var W=r.call(this)||this;return W.doc=O,W}return G(g,r),g}(ni),Sr=function(r){function g(O){var W=r.call(this)||this;return W.error=O,W}return G(g,r),g}(ni),Ci=function(r){function g(O){var W=r.call(this)||this;return W.percentages=O,W}return G(g,r),g}(ni),Ms=function(r){var g=r.characterMap,O=r.file,W=r.httpHeaders,X=r.render,J=r.renderError,ut=r.renderLoader,rt=r.renderProtectedView,V=r.transformGetDocumentParams,lt=r.withCredentials,ot=r.onDocumentAskPassword,Mt=t.useContext(B).direction===f.TextDirection.RightToLeft,kt=t.useState(new Ci(0)),xt=kt[0],Xt=kt[1],Gt=t.useRef(""),Ht=et();return t.useEffect(function(){Gt.current="",Xt(new Ci(0));var Le=new Z.PDFWorker({name:"PDFWorker_".concat(Date.now())}),pe=Object.assign({httpHeaders:W,withCredentials:lt,worker:Le},typeof O=="string"?{url:O}:{data:O},g?{cMapUrl:g.url,cMapPacked:g.isCompressed}:{}),me=V?V(pe):pe,Se=Z.getDocument(me);return Se.onPassword=function(se,Ce){switch(Ce){case Z.PasswordResponses.NEED_PASSWORD:Ht.current&&Xt(new wi(se,f.PasswordStatus.RequiredPassword));break;case Z.PasswordResponses.INCORRECT_PASSWORD:Ht.current&&Xt(new wi(se,f.PasswordStatus.WrongPassword))}},Se.onProgress=function(se){var Ce=se.total>0?Math.min(100,100*se.loaded/se.total):100;Ht.current&&Gt.current===""&&Xt(new Ci(Ce))},Se.promise.then(function(se){Gt.current=se.loadingTask.docId,Ht.current&&Xt(new Ar(se))},function(se){return Ht.current&&!Le.destroyed&&Xt(new Sr({message:se.message||"Cannot load document",name:se.name}))}),function(){Se.destroy(),Le.destroy()}},[O]),xt instanceof wi?t.createElement(Rs,{passwordStatus:xt.passwordStatus,renderProtectedView:rt,verifyPassword:xt.verifyPassword,onDocumentAskPassword:ot}):xt instanceof Ar?X(xt.doc):xt instanceof Sr?J?J(xt.error):t.createElement("div",{className:P({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Mt})},t.createElement("div",{className:"rpv-core__doc-error-text"},xt.error.message)):t.createElement("div",{"data-testid":"core__doc-loading",className:P({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Mt})},ut?ut(xt.percentages):t.createElement(R,null))},Fs=function(r,g){var O=t.useMemo(function(){return r==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":r},[]),W=t.useState(O),X=W[0],J=W[1],ut=pt(X);return t.useEffect(function(){if(r==="auto"){var rt=window.matchMedia("(prefers-color-scheme: dark)"),V=function(lt){J(lt.matches?"dark":"light")};return rt.addEventListener("change",V),function(){return rt.removeEventListener("change",V)}}},[]),t.useEffect(function(){X!==ut&&g&&g(X)},[X]),t.useEffect(function(){r!==X&&J(r)},[r]),{currentTheme:X,setCurrentTheme:J}},Ls=function(r){return{startPage:r.startPage-3,endPage:r.endPage+3}};f.Button=function(r){var g=r.children,O=r.testId,W=r.onClick,X=t.useContext(B).direction===f.TextDirection.RightToLeft,J=O?{"data-testid":O}:{};return t.createElement("button",u({className:P({"rpv-core__button":!0,"rpv-core__button--rtl":X}),type:"button",onClick:W},J),g)},f.Icon=v,f.LazyRender=function(r){var g=r.attrs,O=r.children,W=r.testId,X=t.useState(!1),J=X[0],ut=X[1],rt=W?u(u({},g),{"data-testid":W}):g,V=w({once:!0,onVisibilityChanged:function(lt){lt.isVisible&&ut(!0)}});return t.createElement("div",u({ref:V},rt),J&&O)},f.LocalizationContext=Nt,f.Menu=function(r){var g=r.children,O=t.useRef(),W=t.useRef([]),X=t.useContext(B).direction===f.TextDirection.RightToLeft,J=function(rt){if(O.current)switch(rt.key){case"Tab":rt.preventDefault();break;case"ArrowDown":rt.preventDefault(),ut(function(V,lt){return lt+1});break;case"ArrowUp":rt.preventDefault(),ut(function(V,lt){return lt-1});break;case"End":rt.preventDefault(),ut(function(V,lt){return V.length-1});break;case"Home":rt.preventDefault(),ut(function(V,lt){return 0})}},ut=function(rt){if(O.current){var V=W.current,lt=V.findIndex(function(Mt){return Mt.getAttribute("tabindex")==="0"}),ot=Math.min(V.length-1,Math.max(0,rt(V,lt)));lt>=0&&lt<=V.length-1&&V[lt].setAttribute("tabindex","-1"),V[ot].setAttribute("tabindex","0"),V[ot].focus()}};return b(function(){var rt=O.current;if(rt){var V=function(lt){var ot=[];return lt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Mt){if(Mt instanceof HTMLElement){var kt=Mt.parentElement;(kt===lt||window.getComputedStyle(kt).display!=="none")&&ot.push(Mt)}}),ot}(rt);W.current=V}},[]),b(function(){return document.addEventListener("keydown",J),function(){document.removeEventListener("keydown",J)}},[]),t.createElement("div",{ref:O,"aria-orientation":"vertical",className:P({"rpv-core__menu":!0,"rpv-core__menu--rtl":X}),role:"menu",tabIndex:0},g)},f.MenuDivider=function(){return t.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},f.MenuItem=function(r){var g=r.checked,O=g!==void 0&&g,W=r.children,X=r.icon,J=X===void 0?null:X,ut=r.isDisabled,rt=ut!==void 0&&ut,V=r.testId,lt=r.onClick,ot=t.useContext(B).direction===f.TextDirection.RightToLeft,Mt=V?{"data-testid":V}:{};return t.createElement("button",u({className:P({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":rt,"rpv-core__menu-item--ltr":!ot,"rpv-core__menu-item--rtl":ot}),role:"menuitem",tabIndex:-1,type:"button",onClick:lt},Mt),t.createElement("div",{className:P({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!ot,"rpv-core__menu-item-icon--rtl":ot})},J),t.createElement("div",{className:P({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!ot,"rpv-core__menu-item-label--rtl":ot})},W),t.createElement("div",{className:P({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!ot,"rpv-core__menu-item-check--rtl":ot})},O&&t.createElement(C,null)))},f.MinimalButton=function(r){var g=r.ariaLabel,O=g===void 0?"":g,W=r.ariaKeyShortcuts,X=W===void 0?"":W,J=r.children,ut=r.isDisabled,rt=ut!==void 0&&ut,V=r.isSelected,lt=V!==void 0&&V,ot=r.testId,Mt=r.onClick,kt=t.useContext(B).direction===f.TextDirection.RightToLeft,xt=ot?{"data-testid":ot}:{};return t.createElement("button",u({"aria-label":O},X&&{"aria-keyshortcuts":X},rt&&{"aria-disabled":!0},{className:P({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":rt,"rpv-core__minimal-button--rtl":kt,"rpv-core__minimal-button--selected":lt}),type:"button",onClick:Mt},xt),J)},f.Modal=function(r){var g=r.ariaControlsSuffix,O=r.closeOnClickOutside,W=r.closeOnEscape,X=r.content,J=r.isOpened,ut=J!==void 0&&J,rt=r.target,V=g||"".concat(T());return t.createElement(I,{target:rt?function(lt,ot){return t.createElement("div",{"aria-expanded":ot?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(V)},rt(lt,ot))}:null,content:function(lt){return t.createElement(c,null,t.createElement(s,{ariaControlsSuffix:V,closeOnClickOutside:O,closeOnEscape:W,onToggle:lt},X(lt)))},isOpened:ut})},f.Popover=function(r){var g=r.ariaHasPopup,O=g===void 0?"dialog":g,W=r.ariaControlsSuffix,X=r.closeOnClickOutside,J=r.closeOnEscape,ut=r.content,rt=r.lockScroll,V=rt===void 0||rt,lt=r.offset,ot=r.position,Mt=r.target,kt=S(!1),xt=kt.opened,Xt=kt.toggle,Gt=t.useRef(),Ht=t.useMemo(function(){return W||"".concat(T())},[]);return t.createElement("div",{ref:Gt,"aria-expanded":xt?"true":"false","aria-haspopup":O,"aria-controls":"rpv-core__popver-body-".concat(Ht)},Mt(Xt,xt),xt&&t.createElement(t.Fragment,null,V&&t.createElement(Pt,{closeOnEscape:J,onClose:Xt}),t.createElement(Jt,{ariaControlsSuffix:Ht,closeOnClickOutside:X,offset:lt,position:ot,targetRef:Gt,onClose:Xt},ut(Xt))))},f.PrimaryButton=F,f.ProgressBar=function(r){var g=r.progress,O=t.useContext(B).direction===f.TextDirection.RightToLeft;return t.createElement("div",{className:P({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":O})},t.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(g,"%")}},g,"%"))},f.Separator=function(){return t.createElement("div",{className:"rpv-core__separator"})},f.Spinner=R,f.Splitter=function(r){var g=r.constrain,O=t.useContext(B).direction===f.TextDirection.RightToLeft,W=t.useRef(),X=t.useRef(),J=t.useRef(),ut=t.useRef(0),rt=t.useRef(0),V=t.useRef(0),lt=t.useRef(0),ot={capture:!0},Mt=function(xt){var Xt=W.current,Gt=X.current,Ht=J.current;if(Xt&&Gt&&Ht){var Le=lt.current,pe=xt.clientX-ut.current,me=V.current+(O?-pe:pe),Se=Xt.parentElement.getBoundingClientRect().width,se=100*me/Se;if(Xt.classList.add("rpv-core__splitter--resizing"),g){var Ce=Se-me-Le;if(!g({firstHalfPercentage:se,firstHalfSize:me,secondHalfPercentage:100*Ce/Se,secondHalfSize:Ce}))return}Gt.style.width="".concat(se,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Gt.classList.add("rpv-core__splitter-sibling--resizing"),Ht.classList.add("rpv-core__splitter-sibling--resizing")}},kt=function(xt){var Xt=W.current,Gt=X.current,Ht=J.current;Xt&&Gt&&Ht&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Xt.classList.remove("rpv-core__splitter--resizing"),Gt.classList.remove("rpv-core__splitter-sibling--resizing"),Ht.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Mt,ot),document.removeEventListener("mouseup",kt,ot))};return t.useEffect(function(){var xt=W.current;xt&&(lt.current=xt.getBoundingClientRect().width,X.current=xt.previousElementSibling,J.current=xt.nextElementSibling)},[]),t.createElement("div",{ref:W,className:"rpv-core__splitter",onMouseDown:function(xt){var Xt=X.current;Xt&&(ut.current=xt.clientX,rt.current=xt.clientY,V.current=Xt.getBoundingClientRect().width,document.addEventListener("mousemove",Mt,ot),document.addEventListener("mouseup",kt,ot))}})},f.TextBox=x,f.ThemeContext=B,f.Tooltip=function(r){var g=r.ariaControlsSuffix,O=r.content,W=r.offset,X=r.position,J=r.target,ut=S(!1),rt=ut.opened,V=ut.toggle,lt=t.useRef(),ot=t.useRef(),Mt=t.useMemo(function(){return g||"".concat(T())},[]);a(function(){lt.current&&document.activeElement&&lt.current.contains(document.activeElement)&&xt()});var kt=function(){V(f.ToggleStatus.Open)},xt=function(){V(f.ToggleStatus.Close)};return t.createElement(t.Fragment,null,t.createElement("div",{ref:lt,"aria-describedby":"rpv-core__tooltip-body-".concat(Mt),onBlur:function(Xt){Xt.relatedTarget instanceof HTMLElement&&Xt.currentTarget.parentElement&&Xt.currentTarget.parentElement.contains(Xt.relatedTarget)?ot.current&&(ot.current.style.display="none"):xt()},onFocus:kt,onMouseEnter:kt,onMouseLeave:xt},J),rt&&t.createElement(ht,{ariaControlsSuffix:Mt,contentRef:ot,offset:W,position:X,targetRef:lt},O()))},f.Viewer=function(r){var g=r.characterMap,O=r.defaultScale,W=r.enableSmoothScroll,X=W===void 0||W,J=r.fileUrl,ut=r.httpHeaders,rt=ut===void 0?{}:ut,V=r.initialPage,lt=V===void 0?0:V,ot=r.pageLayout,Mt=r.initialRotation,kt=Mt===void 0?0:Mt,xt=r.localization,Xt=r.plugins,Gt=Xt===void 0?[]:Xt,Ht=r.renderError,Le=r.renderLoader,pe=r.renderPage,me=r.renderProtectedView,Se=r.scrollMode,se=Se===void 0?f.ScrollMode.Vertical:Se,Ce=r.setRenderRange,ye=Ce===void 0?Ls:Ce,We=r.transformGetDocumentParams,He=r.theme,ze=He===void 0?{direction:f.TextDirection.LeftToRight,theme:"light"}:He,Ve=r.viewMode,qe=Ve===void 0?f.ViewMode.SinglePage:Ve,cn=r.withCredentials,en=cn!==void 0&&cn,hn=r.onDocumentAskPassword,rn=r.onDocumentLoad,an=rn===void 0?function(){}:rn,on=r.onPageChange,sn=on===void 0?function(){}:on,mn=r.onRotate,Cn=mn===void 0?function(){}:mn,En=r.onRotatePage,fn=En===void 0?function(){}:En,bn=r.onSwitchTheme,Pn=bn===void 0?function(){}:bn,Ae=r.onZoom,be=Ae===void 0?function(){}:Ae,ae=t.useState({data:J,name:typeof J=="string"?J:"",shouldLoad:!1}),ue=ae[0],oe=ae[1],Pe=function(tn,nn){oe({data:nn,name:tn,shouldLoad:!0})},xe=t.useState(!1),de=xe[0],ee=xe[1],Me=pt(ue);t.useEffect(function(){var tn,nn,un,$e;tn=Me.data,$e=typeof(nn=J),(un=typeof tn)=="string"&&$e==="string"&&tn===nn||un==="object"&&$e==="object"&&tn.length===nn.length&&tn.every(function(Tn,Nn){return Tn===nn[Nn]})||oe({data:J,name:typeof J=="string"?J:"",shouldLoad:de})},[J,de]);var Oe=w({onVisibilityChanged:function(tn){ee(tn.isVisible),tn.isVisible&&oe(function(nn){return Object.assign({},nn,{shouldLoad:!0})})}}),Qe=typeof ze=="string"?{direction:f.TextDirection.LeftToRight,theme:ze}:ze,Ye=t.useState(xt||Tt),pn=Ye[0],yn=Ye[1],Fe={l10n:pn,setL10n:yn},gn=Object.assign({},{direction:Qe.direction},Fs(Qe.theme||"light",Pn));return t.useEffect(function(){xt&&yn(xt)},[xt]),t.createElement(Nt.Provider,{value:Fe},t.createElement(B.Provider,{value:gn},t.createElement("div",{ref:Oe,className:"rpv-core__viewer rpv-core__viewer--".concat(gn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},ue.shouldLoad&&t.createElement(Ms,{characterMap:g,file:ue.data,httpHeaders:rt,render:function(tn){return t.createElement(ks,{defaultScale:O,doc:tn,render:function(nn,un){return t.createElement(Ts,{currentFile:{data:ue.data,name:ue.name},defaultScale:O,doc:tn,enableSmoothScroll:X,initialPage:lt,initialRotation:kt,initialScale:un,pageLayout:ot,pageSizes:nn,plugins:Gt,renderPage:pe,scrollMode:se,setRenderRange:ye,viewMode:qe,viewerState:{file:ue,fullScreenMode:f.FullScreenMode.Normal,pageIndex:-1,pageHeight:nn[0].pageHeight,pageWidth:nn[0].pageWidth,pagesRotation:new Map,rotation:kt,scale:un,scrollMode:se,viewMode:qe},onDocumentLoad:an,onOpenFile:Pe,onPageChange:sn,onRotate:Cn,onRotatePage:fn,onZoom:be})},scrollMode:se,viewMode:qe})},renderError:Ht,renderLoader:Le,renderProtectedView:me,transformGetDocumentParams:We,withCredentials:en,onDocumentAskPassword:hn}))))},f.Worker=function(r){var g=r.children,O=r.workerUrl;return Z.GlobalWorkerOptions.workerSrc=O,t.createElement(t.Fragment,null,g)},f.chunk=St,f.classNames=P,f.createStore=function(r){var g=r||{},O={},W=function(J,ut){var rt;g=u(u({},g),((rt={})[J]=ut,rt)),(O[J]||[]).forEach(function(V){return V(g[J])})},X=function(J){return g[J]};return{subscribe:function(J,ut){O[J]=(O[J]||[]).concat(ut)},unsubscribe:function(J,ut){O[J]=(O[J]||[]).filter(function(rt){return rt!==ut})},update:function(J,ut){W(J,ut)},updateCurrentValue:function(J,ut){var rt=X(J);rt!==void 0&&W(J,ut(rt))},get:function(J){return X(J)}}},f.getDestination=_e,f.getPage=ge,f.isFullScreenEnabled=A,f.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},f.useDebounceCallback=k,f.useIntersectionObserver=w,f.useIsMounted=et,f.useIsomorphicLayoutEffect=b,f.usePrevious=pt,f.useRenderQueue=yt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;const ModalPdfPreview=({pdfFile:f,isOpen:m,onClose:mt})=>{if(reactExports.useEffect(()=>(m?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[m]),!m)return null;const p=()=>{const t=document.createElement("a");t.href=f,t.download="AfsalMadathingalResume.pdf",document.body.appendChild(t),t.click(),document.body.removeChild(t)},E=t=>{t.stopPropagation()};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0  z-50 bg-black bg-opacity-90 flex items-center justify-center p-2 sm:p-4 backdrop-blur-sm overflow-hidden",onClick:E,children:jsxRuntimeExports.jsxs("div",{className:"bg-cli-bg rounded-lg w-full max-w-6xl h-[95vh] sm:h-[90vh] flex flex-col relative border-2 border-[#00ff00] shadow-[0_0_20px_rgba(0,255,0,0.5)]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-4 border-b-2 border-[#00ff00]",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-[#00ff00]",children:"My Resume"}),jsxRuntimeExports.jsx("button",{onClick:mt,className:"p-1.5 sm:p-2 text-[#00ff00] hover:bg-[#00ff00] hover:text-black rounded-full transition-all duration-300",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden bg-cli-panel",onClick:t=>t.stopPropagation(),children:jsxRuntimeExports.jsx("div",{className:"h-full",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:f,defaultScale:1,className:"h-full"})})})}),jsxRuntimeExports.jsx("div",{className:"border-t-2 border-[#00ff00] p-2 sm:p-4 flex justify-center items-center bg-cli-bg",children:jsxRuntimeExports.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 px-6 py-2 text-black bg-gradient-to-r from-[#00ff00] to-white hover:from-[#00ff00] hover:to-[#ccffcc] rounded-lg shadow-[0_0_15px_rgba(0,255,0,0.6)] hover:shadow-[0_0_20px_rgba(0,255,0,1)] transition-all duration-300 font-bold",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base",children:"Download"})]})})]})})},Home=()=>{const f=useNavigate(),{isModalOpen:m,openModal:mt,closeModal:p}=useModal();reactExports.useEffect(()=>{localStorage.setItem("isModalOpen",m)},[m]),reactExports.useEffect(()=>{window.scrollTo(0,0)},[]);const E=[{platform:"youtube",url:"https://www.youtube.com/channel/UCXzFLnasrvMPjx9YAajU9Rg"},{platform:"github",url:"https://github.com/afsalmadathingal"},{platform:"linkedin",url:"https://www.linkedin.com/in/afsalmadathingal/"}];return jsxRuntimeExports.jsx(AnimatedPage,{children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-8 lg:gap-16 pt-8 lg:pt-16",children:[jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/3 flex justify-center",children:jsxRuntimeExports.jsx(image_default,{isBlurred:!0,width:300,height:300,src:profilePic,alt:"profile-image",className:"rounded-full bg-transparent border border-white/20"})}),jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col items-center lg:items-start space-y-6",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl lg:text-5xl text-white font-bold text-center lg:text-left",children:["Hi, I'm"," ",jsxRuntimeExports.jsxs("span",{className:"text-terminal-500",children:["Afsal",jsxRuntimeExports.jsx("span",{className:"blinking-cursor",children:"|"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-w-2xl",children:jsxRuntimeExports.jsxs("p",{className:"md:text-xl lg:text-2xl text-gray-300 text-center lg:text-left xs:text-sm",children:["Full Stack Web Developer specializing in the MERN stack with expertise in JavaScript, React, Node.js, and MongoDB.",jsxRuntimeExports.jsx("span",{className:"blinking-cursor",children:"|"})]})}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs(button_default,{onClick:mt,className:"text-white hover:bg-gradient-to-r from-terminal-600 to-matrix-dark border-2 border-white/50 border-dashed hover:border-white/100 hover:border-solid",variant:"bordered",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-eye"})," View My Resume"]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ModalPdfPreview,{pdfFile:resume,isOpen:m,onClose:p})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center lg:items-start space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold",children:"Connect with me"}),jsxRuntimeExports.jsx("div",{className:"flex space-x-6",children:E.map(t=>jsxRuntimeExports.jsx("i",{onClick:()=>window.open(t.url),className:`fa-brands fa-${t.platform} cursor-pointer text-white text-2xl lg:text-3xl hover:text-terminal-500 transition-colors`},t.platform))}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center lg:items-start space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-white",children:"Or"}),jsxRuntimeExports.jsxs("p",{className:"text-sm lg:text-base",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-envelope text-[#00ff00]"})," ",jsxRuntimeExports.jsx("span",{className:"text-white",children:"Madathingalafsal@gmail.com"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm lg:text-base",children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-phone text-[#00ff00]"})," ",jsxRuntimeExports.jsx("span",{onClick:()=>f("/contact"),className:"text-white cursor-pointer hover:text-[#00ff00] transition-colors",children:"Request a call"})]})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"h-1 bg-[#00ff00] w-7/12 mx-auto mb-24 mt-16 rounded-lg shadow-[0_0_15px_rgba(0,255,0,0.8)]"})]})})};export{Home as default};
